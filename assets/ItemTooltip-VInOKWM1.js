import{j as We,r as E,c as p,d as He,w as Oe,m as Ke,Q as Xe,k as m,x as be,l as o,t as y,n as O,u as c,q as oe,E as U,F as ae,p as se,f as R,B as ye,z as u,W as Ye}from"./vue-vendor-Y-QMGarF.js";import{c as H,a as Qe,u as Ze,P as we,S as et,f as tt,b as xe,n as Je,_ as at}from"./index-gEiOSoBu.js";const Se=H("coins",[["path",{d:"M13.744 17.736a6 6 0 1 1-7.48-7.48",key:"bq4yh3"}],["path",{d:"M15 6h1v4",key:"11y1tn"}],["path",{d:"m6.134 14.768.866-.5 2 3.464",key:"17snzx"}],["circle",{cx:"16",cy:"8",r:"6",key:"14bfc9"}]]);const st=H("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const lt=H("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const it=H("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const pe=H("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const rt=H("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const nt=H("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ot=H("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function ct(e,s){const J=new Map;for(const i of Object.values(e)){if(!i?.talisman)continue;const{id:d,rarity:g}=i.talisman,w=`${d}__${g}`,k=J.get(w);k?k.count++:J.set(w,{id:d,rarity:g,count:1})}const N=[];for(const{id:i,rarity:d,count:g}of J.values()){const w=s[d];if(!w)continue;const k=w.find(b=>b.talisman===i);if(!k)continue;const B=[],F={};for(const b of[2,3,4]){const f=`bonus_${b}`,D=k[f];if(!D)continue;const q=g>=b;if(B.push({required:b,bonuses:D,active:q}),q)for(const[V,L]of Object.entries(D))F[V]||(F[V]=0),F[V]+=L}B.length>0&&N.push({setName:k.set_name,talismanName:i,rarity:d,count:g,activeBonuses:F,thresholds:B})}return N}function Be(e){return{powerStones:Array(e).fill(null),talisman:null}}const ut=["id","level","tier","grade","default_grade","upgradeLevel","weight","armor_weight","speed","atk_speed","casting_speed","purchase_price","sale_price","repair_price","satis_kapali","gender","req_level"];function Le(e,s){if(!e||s<0)return{...e};const J=1+s/200,N={...e};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const d=e[i];if(typeof d=="number"&&!ut.includes(i)&&!i.endsWith("_id")&&i!=="id"&&d!==0){const g=d*J;N[i]=Math.round(g*10)/10}}return N.grade=s,N}const Q=e=>{if(e)return{...e,upgradeLevel:e.upgradeLevel!==void 0?Math.min(15,Math.max(0,e.upgradeLevel)):0}},dt=We("planner",()=>{const e=E([]),s=E(null),J=E(null),N=E(null),i=E(!1),d=E(null),g=E({}),w=E({}),k=E({}),B=E({}),F=E({}),b=E({}),f=E({}),D=E(!1),q=async()=>{if(!i.value)try{const a=await fetch("/CodexFall/datas/plannerData.json");if(!a.ok)throw new Error("Failed to load planner data");d.value=await a.json(),d.value.equipmentSlots.forEach(n=>{n.id in g.value||(g.value[n.id]=null)}),d.value.attributes.forEach(n=>{n.id in B.value||(B.value[n.id]=0)}),d.value.clanPassives&&d.value.clanPassives.forEach(n=>{n.id in f.value||(f.value[n.id]=0)}),i.value=!0}catch(t){console.error("Failed to load planner data",t)}},V=p(()=>Object.values(B.value).reduce((t,a)=>t+a,0)),L=p(()=>d.value?.config||null),le=p(()=>L.value?.maxAttributePoints||600),G=p(()=>L.value?.maxAttributePerAttr||100),Z=p(()=>L.value?.maxUpgradeLevel||15),ce=p(()=>L.value?.maxSkillLevel||25),K=p(()=>L.value?.maxGrade||320),ee=p(()=>L.value?.socketConfig||{maxPowerStones:3,maxTalismans:1}),fe=p(()=>L.value?.rarityThresholds||{uncommon:1,rare:10,epic:19}),te=p(()=>L.value?.gearscoreExcludedSlots||["card1","card2"]),ue=p(()=>L.value?.gradeSliderTicks||[0,80,160,240,320]),ie=p(()=>L.value?.upgradeBonuses||{0:0,1:0,2:14,3:24,4:42,5:76,6:106,7:142,8:184,9:232,10:286,11:346,12:412,13:484,14:562,15:646}),X=p(()=>d.value?.powerStoneStats||{}),de=p(()=>d.value?.rarityColors||{1:{hex:"#e6edf3",rgba:"rgba(230, 237, 243, 1)"},2:{hex:"#56B65C",rgba:"rgba(86, 182, 92, 1)"},3:{hex:"#4F8EFF",rgba:"rgba(79, 142, 255, 1)"},4:{hex:"#C572FF",rgba:"rgba(197, 114, 255, 1)"},5:{hex:"#FFB347",rgba:"rgba(255, 179, 71, 1)"},6:{hex:"#FFD700",rgba:"rgba(255, 215, 0, 1)"}}),l=p(()=>d.value?.modifiableStats||["physical_ap","physical_dp","magic_ap","magic_dp","hp","mp","accuracy","evasion"]),v=["head","chest","gloves","boots"],r=p(()=>v.reduce((t,a)=>{const n=g.value[a];return t+(n?.armor_weight||0)},0)),x=p(()=>{const t=r.value;return(d.value?.weightClassBuffs||[]).find(n=>t>=n.minWeight&&t<=n.maxWeight)||null}),M=p(()=>d.value?.cardStats||{}),I=p(()=>d.value?.clanPassives||[]),A=t=>(d.value?.equipmentSlots||[]).find(S=>S.id===t)?.socketsEnabled??!1,re=p(()=>!d.value?.classes||!J.value?null:d.value.classes.find(t=>t.id===J.value)||null),he=p(()=>{const t=re.value;return!t||!t.subclasses||!N.value?null:t.subclasses.find(a=>a.id===N.value)||null}),_e=p(()=>d.value?.setBonuses?ct(k.value,d.value.setBonuses):[]),Ee=p(()=>{const t={},a={},n=(h,_)=>{t[h]||(t[h]=0),t[h]+=_},S=(h,_)=>{a[h]||(a[h]=0),a[h]+=_};d.value?.attributes&&d.value.attributes.forEach(h=>{const _=B.value[h.id]||0;_>0&&h.bonuses.forEach(j=>{n(j.stat,_*j.multiplier)})}),Object.keys(g.value).forEach(h=>{const _=h,j=g.value[_];if(!j)return;const Y=w.value[_],ge=Y?.stats||{},me=Y?.upgradeLevel||0,Ae=Y?.grade??j.grade??j.default_grade??0,Ue=Le(j,Ae),Ne=1+(ie.value[me.toString()]||0)/100;if((d.value?.statKeys||[]).forEach(T=>{let z;const W=ge[T.key],$e=Number(j[T.key])||0;W!==void 0&&Number(W)!==$e?z=Number(W):z=Number(Ue[T.key]),!isNaN(z)&&z>0&&n(T.key,z*Ne)}),j.id&&M.value[j.id]){const T=M.value[j.id];for(const[z,W]of Object.entries(T))z==="hp"||z==="mp"?S(z,Number(W)):n(z,Number(W))}const ke=k.value[_];ke&&ke.powerStones&&ke.powerStones.forEach(T=>{if(T&&X.value[T])for(const[z,W]of Object.entries(X.value[T]))n(z,Number(W)*Ne)})});for(const h of _e.value)for(const[_,j]of Object.entries(h.activeBonuses))n(_,j);for(const[h,_]of Object.entries(a))t[h]&&(t[h]=t[h]*(1+_/100));const C={};I.value.forEach(h=>{const _=f.value[h.id]||0;if(_>0&&h.effects){const j=_-1;for(const[Y,ge]of Object.entries(h.effects)){const me=ge[j];me&&(C[Y]||(C[Y]=0),C[Y]+=me)}}});for(const[h,_]of Object.entries(C))t[h]&&(t[h]=t[h]*(1+_/100));const $=x.value;if($&&$.bonuses)for(const[h,_]of Object.entries($.bonuses))_.type==="percent"?(t[h]===void 0&&(t[h]=0),t[h]=t[h]*(1+_.value/100)):_.type==="flat"&&n(h,_.value);for(const[h,_]of Object.entries(t))t[h]=Math.round(_*100)/100;return t});(()=>{const t=localStorage.getItem("quinfall_saved_builds");if(t)try{const a=JSON.parse(t);a.forEach(n=>{n.equipmentOverrides&&Object.keys(n.equipmentOverrides).forEach(S=>{n.equipmentOverrides[S]=Q(n.equipmentOverrides[S])})}),e.value=a}catch{console.error("Failed to parse builds from localStorage")}})();const ve=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(e.value))},P=()=>{if(!s.value)return;const t=e.value.findIndex(a=>a.id===s.value);if(t!==-1){e.value[t].charClass=J.value,e.value[t].subclass=N.value,e.value[t].equipment=JSON.parse(JSON.stringify(g.value));const a=JSON.parse(JSON.stringify(w.value)),n={};Object.keys(a).forEach(S=>{n[S]=Q(a[S])}),e.value[t].equipmentOverrides=n,e.value[t].equipmentSockets=JSON.parse(JSON.stringify(k.value)),e.value[t].attributes=JSON.parse(JSON.stringify(B.value)),e.value[t].skillLevels=JSON.parse(JSON.stringify(F.value)),e.value[t].skillStones=JSON.parse(JSON.stringify(b.value)),e.value[t].clanPassivesLevels=JSON.parse(JSON.stringify(f.value)),ve()}},Fe=t=>{J.value=t,N.value=null,F.value={},b.value={},g.value.weapon=null,g.value.offhand=null,w.value.weapon=void 0,w.value.offhand=void 0,P()},Me=t=>{N.value=t,P()},je=(t,a)=>{a<1&&(a=1),F.value[t]=a,P()},qe=(t,a)=>{b.value[t]=a,P()},Ie=(t,a)=>{f.value[t]=a,P()},Pe=(t,a)=>{a=Math.max(0,Math.min(G.value,isNaN(a)?0:a)),B.value[t]=a,P()},Ce=(t,a)=>{g.value[t]=a,w.value[t]=void 0,k.value[t]=void 0,P()},ze=t=>{g.value[t]=null,w.value[t]=void 0,k.value[t]=void 0,P()},Re=(t,a)=>{w.value[t]=Q(a),P()},De=(t,a,n)=>{k.value[t]||(k.value[t]=Be(ee.value.maxPowerStones));const S=k.value[t];a>=0&&a<S.powerStones.length&&(S.powerStones[a]=n),P()},Te=(t,a)=>{const n=k.value[t];n&&a>=0&&a<n.powerStones.length&&(n.powerStones[a]=null),P()},Ve=(t,a)=>{k.value[t]||(k.value[t]=Be(ee.value.maxPowerStones)),k.value[t].talisman=a,P()},Ge=t=>{const a=k.value[t];a&&(a.talisman=null),P()},ne=()=>{J.value=null,N.value=null,Object.keys(g.value).forEach(t=>{g.value[t]=null}),w.value={},k.value={},Object.keys(B.value).forEach(t=>{B.value[t]=0}),F.value={},b.value={},Object.keys(f.value).forEach(t=>{f.value[t]=0}),s.value=null};return{savedBuilds:e,currentBuildId:s,selectedClass:J,equipment:g,equipmentOverrides:w,equipmentSockets:k,attributes:B,totalAttributePoints:V,currentClassData:re,currentSubclassData:he,stats:Ee,activeSetBonuses:_e,setClass:Fe,setSubclass:Me,setSkillLevel:je,setSkillStone:qe,setClanPassiveLevel:Ie,setAttribute:Pe,equipItem:Ce,unequipItem:ze,setItemOverride:Re,setPowerStone:De,removePowerStone:Te,setTalisman:Ve,removeTalisman:Ge,isSocketsEnabled:A,resetPlanner:ne,saveCurrentBuild:t=>{const a=JSON.parse(JSON.stringify(w.value)),n={};Object.keys(a).forEach(C=>{n[C]=Q(a[C])});const S={id:s.value||Date.now().toString(),name:t,charClass:J.value,subclass:N.value,equipment:JSON.parse(JSON.stringify(g.value)),equipmentOverrides:n,equipmentSockets:JSON.parse(JSON.stringify(k.value)),attributes:JSON.parse(JSON.stringify(B.value)),skillLevels:JSON.parse(JSON.stringify(F.value)),skillStones:JSON.parse(JSON.stringify(b.value)),clanPassivesLevels:JSON.parse(JSON.stringify(f.value))};if(s.value){const C=e.value.findIndex($=>$.id===s.value);C!==-1?(S.name=t,e.value[C]=S):e.value.push(S)}else s.value=S.id,e.value.push(S);ve()},loadBuild:t=>{const a=e.value.find(S=>S.id===t);if(!a)return;s.value=a.id,J.value=a.charClass,N.value=a.subclass||null,g.value=JSON.parse(JSON.stringify(a.equipment||{}));const n=JSON.parse(JSON.stringify(a.equipmentOverrides||{}));w.value={},Object.keys(n).forEach(S=>{w.value[S]=Q(n[S])}),k.value=JSON.parse(JSON.stringify(a.equipmentSockets||{})),B.value=JSON.parse(JSON.stringify(a.attributes||{})),F.value=JSON.parse(JSON.stringify(a.skillLevels||{})),b.value=JSON.parse(JSON.stringify(a.skillStones||{})),f.value=JSON.parse(JSON.stringify(a.clanPassivesLevels||{}))},deleteBuild:t=>{e.value=e.value.filter(a=>a.id!==t),s.value===t&&ne(),ve()},newBuild:(t,a=!1)=>{!a&&s.value!==null&&ne();const n=Date.now().toString();s.value=n;const S=JSON.parse(JSON.stringify(w.value)),C={};Object.keys(S).forEach($=>{C[$]=Q(S[$])}),e.value.push({id:n,name:t,charClass:J.value,subclass:N.value,equipment:JSON.parse(JSON.stringify(g.value)),equipmentOverrides:C,equipmentSockets:JSON.parse(JSON.stringify(k.value)),attributes:JSON.parse(JSON.stringify(B.value)),skillLevels:JSON.parse(JSON.stringify(F.value)),skillStones:JSON.parse(JSON.stringify(b.value)),clanPassivesLevels:JSON.parse(JSON.stringify(f.value))}),ve()},loadSharedBuild:t=>{ne(),J.value=t.charClass||null,N.value=t.subclass||null,g.value=JSON.parse(JSON.stringify(t.equipment||{}));const a=JSON.parse(JSON.stringify(t.equipmentOverrides||{}));w.value={},Object.keys(a).forEach(n=>{w.value[n]=Q(a[n])}),k.value=JSON.parse(JSON.stringify(t.equipmentSockets||{})),B.value=JSON.parse(JSON.stringify(t.attributes||{})),F.value=JSON.parse(JSON.stringify(t.skillLevels||{})),b.value=JSON.parse(JSON.stringify(t.skillStones||{})),f.value=JSON.parse(JSON.stringify(t.clanPassivesLevels||{})),D.value=!0,s.value=null},clearSharedBuild:()=>{D.value=!1,ne()},isSharedBuildPreview:D,isLoaded:i,plannerData:d,loadPlannerData:q,selectedSubclass:N,skillLevels:F,skillStones:b,clanPassivesLevels:f,clanPassivesDef:I,config:L,socketConfig:ee,maxAttributePoints:le,maxAttributePerAttr:G,maxUpgradeLevel:Z,maxSkillLevel:ce,maxGrade:K,powerStoneStatsMap:X,cardStatsMap:M,rarityThresholds:fe,gearscoreExcludedSlots:te,gradeSliderTicks:ue,rarityColors:de,modifiableStats:l,upgradeBonuses:ie,totalArmorWeight:r,activeWeightClass:x}}),vt={class:"tooltip-header"},mt={class:"header-top"},yt={class:"rarity-tier"},pt={class:"rarity-label"},ft={key:0,class:"tier-label"},ht={key:1,class:"level-label"},gt={class:"item-type"},kt={class:"header-main"},bt={class:"item-name"},St={class:"header-icon"},_t=["src"],Nt={class:"tooltip-body"},Ot={key:0,class:"primary-stats"},wt={key:0,class:"primary-stat-block"},xt={class:"primary-label"},Jt={class:"primary-value"},Bt={key:0,class:"bonus-value"},Lt={key:1,class:"primary-stat-block"},Et={class:"primary-label"},Ft={class:"primary-value"},Mt={key:0,class:"bonus-value"},jt={key:2,class:"grade-block"},qt={class:"grade-value"},It={class:"grade-label"},Pt={class:"stars-container"},Ct={key:1,class:"primary-stats"},zt={class:"primary-stat-block"},Rt={class:"primary-label"},Dt={class:"primary-value"},Tt={key:0,class:"bonus-value"},Vt={key:0,class:"grade-block"},Gt={class:"grade-value"},At={class:"grade-label"},Ut={class:"stars-container"},$t={key:2,class:"grade-only"},Wt={class:"grade-block"},Ht={class:"grade-value"},Kt={class:"grade-label"},Xt={class:"stars-container"},Yt={key:3,class:"item-description"},Qt={key:4,class:"traits-section"},Zt={class:"trait-label"},ea={class:"trait-value-container"},ta={class:"trait-value"},aa={key:0,class:"bonus-text"},sa={key:5,class:"socket-section"},la={class:"socket-section__title"},ia={key:0,class:"socket-stone-stats"},ra={key:0,class:"bonus-value",style:{"font-size":"0.75rem","margin-left":"2px"}},na={key:0,class:"socket-talisman-row"},oa={class:"socket-talisman-count"},ca={class:"pieces-label"},ua={key:6,class:"tooltip-footer"},da={key:0,class:"footer-prices"},va=["title"],ma={class:"footer-label"},ya={class:"footer-value"},pa={class:"footer-value-text"},fa=["title"],ha={class:"footer-label"},ga={class:"footer-value"},ka={class:"footer-value-text"},ba=["title"],Sa={class:"footer-label"},_a={class:"footer-value"},Na={class:"footer-value-text"},Oa={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},wa={class:"footer-icons-row"},xa=["title"],Ja=["title"],Ba=["title"],La={class:"icon-badge is-disabled",title:"No Data for Indestructible/Trash"},Ea={key:0,style:{"font-size":"0.8125rem",color:"#8b949e","text-align":"right"}},Fa={style:{color:"#e6edf3","font-weight":"600"}},Ma=He({__name:"ItemTooltip",props:{item:{},visible:{type:Boolean},x:{},y:{},overrideGrade:{},overrideRarity:{},overrideLevel:{},overrideUpgradeLevel:{},overrideStats:{},slotId:{}},setup(e){const s=e,J=Qe(),N=dt(),{t:i,locale:d}=Ze(),g=l=>l?d.value==="pt-BR"?l.baslik_loc_Portuguese||l.baslik_loc_English||l.id:d.value==="en"?l.baslik_loc_English||l.id:d.value==="es"?l.baslik_loc_Spanish||l.baslik_loc_English||l.id:l[`baslik_loc_${d.value}`]||l.baslik_loc_English||l.id:"",w=l=>l?d.value==="pt-BR"?l.aciklama_loc_Portuguese||l.aciklama_loc_English||"":d.value==="en"?l.aciklama_loc_English||"":d.value==="es"?l.aciklama_loc_Spanish||l.aciklama_loc_English||"":l[`aciklama_loc_${d.value}`]||l.aciklama_loc_English||"":"",k=l=>{let v;return s.overrideGrade!==void 0?v=xe(s.overrideGrade):s.overrideRarity!==void 0?v=s.overrideRarity:v=Je(l),{1:"#e6edf3",2:"#3fb950",3:"#58a6ff",4:"#bc8cff",5:"#d29922"}[v]||"#e6edf3"},B=l=>{let v;s.overrideGrade!==void 0?v=xe(s.overrideGrade):s.overrideRarity!==void 0?v=s.overrideRarity:v=Je(l);const x={1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[v]||"common";return i(`rarity.${x}`)},F=p(()=>s.overrideUpgradeLevel!==void 0?s.overrideUpgradeLevel:s.item?.upgradeLevel||0),b=p(()=>{const l=F.value;return(N.upgradeBonuses?.[l.toString()]||0)/100}),f=p(()=>Le(s.item,q.value)),D=p(()=>{if(!s.item)return[];if(L.value&&N.cardStatsMap[s.item.id]){const r=[],x=N.cardStatsMap[s.item.id];for(const[M,I]of Object.entries(x))r.push({key:M,label:i("stats."+M),value:`+${I}%`,bonus:0});return r}const l=[{key:"accuracy",label:i("stats.accuracy")},{key:"atk_speed",label:i("stats.atk_speed")},{key:"evasion",label:i("stats.evasion")},{key:"hp",label:i("stats.hp")},{key:"hp_regen",label:i("stats.hp_regen")},{key:"magic_ap",label:i("stats.magic_ap")},{key:"magic_dp",label:i("stats.magic_dp")},{key:"mp",label:i("stats.mp")},{key:"mp_regen",label:i("stats.mp_regen")},{key:"physical_ap",label:i("stats.physical_ap")},{key:"physical_dp",label:i("stats.physical_dp")},{key:"speed",label:i("stats.speed")},{key:"casting_speed",label:i("stats.casting_speed")},{key:"extra_damage_mob",label:i("stats.extra_damage_mob")},{key:"extra_damage_boss",label:i("stats.extra_damage_boss")}],v=f.value;return l.filter(r=>{if(le.value&&r.key==="hp"&&G.value.key==="hp")return!1;const x=s.item[r.key]!==void 0?Number(s.item[r.key]):0;return s.overrideStats&&s.overrideStats[r.key]!==void 0&&Number(s.overrideStats[r.key])!==x?!0:v[r.key]!==void 0&&v[r.key]!==null&&Number(v[r.key])!==0}).map(r=>{const x=s.item[r.key]!==void 0?Number(s.item[r.key]):0,M=s.overrideStats&&s.overrideStats[r.key]!==void 0&&Number(s.overrideStats[r.key])!==x,I=Number(M?s.overrideStats[r.key]:v[r.key]),A=b.value>0?Number((I*b.value).toFixed(2)):0;return{key:r.key,label:r.label,value:Number(I.toFixed(2)),bonus:A}})}),q=p(()=>s.overrideGrade!==void 0?s.overrideGrade:s.item?.grade||0),V=p(()=>{const l=q.value;return l<160?1:l>=160&&l<200?2:l>=200&&l<240?3:l>=240&&l<288?4:5}),L=p(()=>s.slotId==="card1"||s.slotId==="card2"||s.item?.tip_loc_English==="Power Card"),le=p(()=>s.slotId==="earring1"||s.slotId==="earring2"),G=p(()=>{const l=f.value,v=Number(s.item?.hp||0),r=Number(s.item?.mp||0),x=s.overrideStats?.hp!==void 0&&Number(s.overrideStats.hp)!==v,M=s.overrideStats?.mp!==void 0&&Number(s.overrideStats.mp)!==r,I=Number((x?s.overrideStats.hp:l?.hp)||0),A=Number((M?s.overrideStats.mp:l?.mp)||0);return I>=A?{key:"hp",label:i("stats.hp"),value:Number(I.toFixed(2)),bonus:b.value>0?Number((I*b.value).toFixed(2)):0}:{key:"mp",label:i("stats.mp"),value:Number(A.toFixed(2)),bonus:b.value>0?Number((A*b.value).toFixed(2)):0}}),Z=p(()=>s.slotId&&N.equipmentSockets[s.slotId]||null),ce=p(()=>Z.value?Z.value.powerStones.filter(l=>l!==null).map(l=>{const v=J.getItemById(l),r=N.powerStoneStatsMap[l]||{},x={};for(const[I,A]of Object.entries(r)){const re=Number(A),he=b.value>0?Number((re*b.value).toFixed(2)):0;x[I]={value:re,bonus:he}}const M=v?g(v):l;return{id:l,name:M,stats:x}}):[]),K=p(()=>{if(!Z.value?.talisman)return null;const l=Z.value.talisman;let v=0;for(const r of Object.values(N.equipmentSockets))r?.talisman?.id===l.id&&r?.talisman?.rarity===l.rarity&&v++;return{...l,count:v}}),ee=p(()=>{const l=K.value?.rarity;if(!l)return"#8b949e";switch(l){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#8b949e"}}),fe=l=>{const v=g(l),r=F.value;return r>0?`+${r} ${v}`:v},te=E(null),ue=E(0),ie=E(0),X=E(!1),de=async()=>{if(!te.value||!s.visible||(await Ye(),!te.value||!s.visible))return;const l=te.value.getBoundingClientRect(),v=15;let r=s.x+v,x=s.y-l.height-v;r+l.width>window.innerWidth&&(r=s.x-l.width-v),x<0&&(x=10),ue.value=r,ie.value=x,X.value=!0};return Oe(()=>s.visible,l=>{l?de():X.value=!1}),Oe([()=>s.x,()=>s.y],()=>{s.visible&&de()}),(l,v)=>Ke((u(),m("div",{ref_key:"tooltipRef",ref:te,class:"item-tooltip",style:be({left:`${ue.value}px`,top:`${ie.value}px`,opacity:X.value?1:0,transition:"opacity 0.05s ease","--rarity-color":k(e.item)})},[o("div",vt,[o("div",mt,[o("div",yt,[o("span",pt,y(B(e.item)),1),e.item?.tier?(u(),m("span",ft,"T"+y(e.item.tier),1)):O("",!0),e.overrideLevel||e.item?.level?(u(),m("span",ht,"Lv. "+y(e.overrideLevel||e.item?.level),1)):O("",!0)]),o("div",gt,y(e.item?.tip_loc_English||c(i)("item.item")),1)]),o("div",kt,[o("h3",bt,y(fe(e.item)),1)]),o("div",St,[e.item?.icon1?(u(),m("img",{key:0,src:c(J).getIconUrl(e.item.icon1)},null,8,_t)):(u(),oe(c(we),{key:1,size:40,class:"icon-fallback"}))])]),o("div",Nt,[f.value.physical_dp||f.value.physical_ap||f.value.magic_ap||f.value.magic_dp?(u(),m("div",Ot,[f.value.physical_dp||f.value.magic_dp?(u(),m("div",wt,[o("span",xt,y(f.value.physical_dp?c(i)("stats.physical_dp"):c(i)("stats.magic_dp")),1),o("span",Jt,[U(y(Number(((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:f.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:f.value.magic_dp)).toFixed(2)))+" ",1),b.value>0?(u(),m("span",Bt," (+"+y(Number((((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:f.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:f.value.magic_dp))*b.value).toFixed(2)))+") ",1)):O("",!0)])])):f.value.physical_ap||f.value.magic_ap?(u(),m("div",Lt,[o("span",Et,y(f.value.physical_ap?c(i)("stats.physical_ap"):c(i)("stats.magic_ap")),1),o("span",Ft,[U(y(Number(((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:f.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:f.value.magic_ap)).toFixed(2)))+" ",1),b.value>0?(u(),m("span",Mt," (+"+y(Number((((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:f.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:f.value.magic_ap))*b.value).toFixed(2)))+") ",1)):O("",!0)])])):O("",!0),q.value>0&&!L.value?(u(),m("div",jt,[o("span",qt,y(q.value),1),o("span",It,y(c(i)("item.simulateGrade")),1),o("div",Pt,[(u(),m(ae,null,se(5,r=>R(c(pe),{key:r,size:12,class:ye(["star-icon",{"star-active":r<=V.value}])},null,8,["class"])),64))])])):O("",!0)])):le.value&&G.value.value>0?(u(),m("div",Ct,[o("div",zt,[o("span",Rt,y(G.value.label),1),o("span",Dt,[U(y(G.value.value)+" ",1),G.value.bonus>0?(u(),m("span",Tt," (+"+y(G.value.bonus)+") ",1)):O("",!0)])]),q.value>0?(u(),m("div",Vt,[o("span",Gt,y(q.value),1),o("span",At,y(c(i)("item.simulateGrade")),1),o("div",Ut,[(u(),m(ae,null,se(5,r=>R(c(pe),{key:r,size:12,class:ye(["star-icon",{"star-active":r<=V.value}])},null,8,["class"])),64))])])):O("",!0)])):q.value>0&&!L.value&&!le.value?(u(),m("div",$t,[o("div",Wt,[o("span",Ht,y(q.value),1),o("span",Kt,y(c(i)("item.simulateGrade")),1),o("div",Xt,[(u(),m(ae,null,se(5,r=>R(c(pe),{key:r,size:12,class:ye(["star-icon",{"star-active":r<=V.value}])},null,8,["class"])),64))])])])):O("",!0),w(e.item)&&!L.value?(u(),m("p",Yt,y(w(e.item)),1)):O("",!0),D.value.length>0?(u(),m("div",Qt,[(u(!0),m(ae,null,se(D.value,r=>(u(),m("div",{class:"trait-row",key:r.key},[o("span",Zt,"â€¢ "+y(r.label)+":",1),o("span",ea,[o("span",ta,y(r.value),1),r.bonus>0?(u(),m("span",aa," (+"+y(r.bonus)+")",1)):O("",!0)])]))),128))])):O("",!0),ce.value.length>0||K.value?(u(),m("div",sa,[o("div",la,[R(c(st),{size:11}),o("span",null,y(c(i)("planner.sockets.title")),1)]),(u(!0),m(ae,null,se(ce.value,r=>(u(),m("div",{key:r.id,class:"socket-stone-row"},[R(c(pe),{size:10,class:"socket-power-icon"}),Object.keys(r.stats).length>0?(u(),m("span",ia,[(u(!0),m(ae,null,se(r.stats,(x,M)=>(u(),m("span",{key:M},[U(y(c(i)("stats."+M))+": "+y(x.value)+" ",1),x.bonus>0?(u(),m("span",ra,"(+"+y(x.bonus)+")",1)):O("",!0)]))),128))])):O("",!0)]))),128)),K.value?(u(),m("div",na,[R(c(it),{size:10,style:be({color:ee.value})},null,8,["style"]),o("span",{class:"socket-talisman-name",style:be({color:ee.value})},y(K.value.id),5),o("span",oa,[U(y(K.value.count)+"/4 ",1),o("span",ca,y(c(i)("planner.sockets.pieces")),1)])])):O("",!0)])):O("",!0),e.item?.sale_price||e.item?.price||e.item?.repair_price||e.item?.id||e.item?.satis_kapali!==void 0||e.item?.weight||e.item?.gender!==void 0?(u(),m("div",ua,[e.item?.sale_price||e.item?.price||e.item?.repair_price?(u(),m("div",da,[e.item?.price?(u(),m("div",{key:0,class:"footer-stat",title:c(i)("stats.purchase_price")},[o("span",ma,y(c(i)("stats.purchase_price"))+":",1),o("span",ya,[R(c(Se),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),v[0]||(v[0]=U()),o("span",pa,y(new Intl.NumberFormat(c(d)==="pt-BR"?"pt-BR":"en-US").format(e.item.price)),1)])],8,va)):O("",!0),e.item?.sale_price?(u(),m("div",{key:1,class:"footer-stat",title:c(i)("stats.sale_price")},[o("span",ha,y(c(i)("stats.sale_price"))+":",1),o("span",ga,[R(c(Se),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),v[1]||(v[1]=U()),o("span",ka,y(new Intl.NumberFormat(c(d)==="pt-BR"?"pt-BR":"en-US").format(e.item.sale_price)),1)])],8,fa)):O("",!0),e.item?.repair_price?(u(),m("div",{key:2,class:"footer-stat",title:c(i)("stats.repair_price")},[o("span",Sa,y(c(i)("stats.repair_price"))+":",1),o("span",_a,[R(c(Se),{size:12,class:"inline-icon blue",style:{"margin-right":"4px"}}),v[2]||(v[2]=U()),o("span",Na,y(new Intl.NumberFormat(c(d)==="pt-BR"?"pt-BR":"en-US").format(e.item.repair_price)),1)])],8,ba)):O("",!0)])):O("",!0),o("div",Oa,[o("div",wa,[e.item?.id?(u(),m("div",{key:0,class:"icon-badge",title:c(i)("common.itemID")+": "+e.item.id},[R(c(et),{size:14})],8,xa)):O("",!0),e.item?.satis_kapali!==void 0&&e.item?.satis_kapali!==null?(u(),m("div",{key:1,class:ye(["icon-badge",{"is-disabled":e.item.satis_kapali!==0}]),title:e.item.satis_kapali===0?c(i)("stats.salis_closed")+": "+c(i)("common.yes"):c(i)("stats.salis_closed")+": "+c(i)("common.no")},[e.item.satis_kapali===0?(u(),oe(c(we),{key:0,size:14,style:{color:"#3fb950"}})):(u(),oe(c(lt),{key:1,size:14,style:{color:"#f85149"}}))],10,Ja)):O("",!0),e.item?.gender!==void 0&&e.item?.gender!==null?(u(),m("div",{key:2,class:"icon-badge",title:c(i)("stats.gender")+": "+(e.item.gender===0?"Both":e.item.gender===1?"Male":"Female")},[e.item.gender===0?(u(),oe(c(ot),{key:0,size:14,style:{color:"#8b949e"}})):(u(),oe(c(nt),{key:1,size:14,style:{color:"#8b949e"}}))],8,Ba)):O("",!0),o("div",La,[R(c(rt),{size:14})])]),e.item?.weight!==void 0&&e.item?.weight!==null?(u(),m("div",Ea,[U(y(c(i)("common.weight"))+": ",1),o("span",Fa,y(c(tt)(e.item.weight)),1)])):O("",!0)])])):O("",!0)])],4)),[[Xe,e.visible]])}}),Aa=at(Ma,[["__scopeId","data-v-8a2e3094"]]);export{Se as C,st as G,Aa as I,lt as L,it as S,rt as T,ot as U,nt as a,pe as b,Le as c,dt as u};
