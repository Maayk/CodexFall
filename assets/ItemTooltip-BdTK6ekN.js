import{k as De,r as I,c as p,d as Re,w as pe,n as Te,S as Ve,l as v,y as me,m as n,t as m,p as O,u as c,x as le,G as A,F as Z,q as ee,j as q,C as ne,A as u,X as Ge}from"./vue-vendor-C0EkfGRl.js";import{c as U,a as Ae,u as Ue,P as he,S as $e,f as Ke,b as fe,n as ke,_ as He}from"./index-DPtP0km7.js";const ye=U("coins",[["path",{d:"M13.744 17.736a6 6 0 1 1-7.48-7.48",key:"bq4yh3"}],["path",{d:"M15 6h1v4",key:"11y1tn"}],["path",{d:"m6.134 14.768.866-.5 2 3.464",key:"17snzx"}],["circle",{cx:"16",cy:"8",r:"6",key:"14bfc9"}]]);const We=U("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const Xe=U("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Ye=U("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const ce=U("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Qe=U("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const Ze=U("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const et=U("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function tt(e,a){const k={};for(const f of e){if(!f)continue;const i=a[f];if(i)for(const[o,h]of Object.entries(i))k[o]||(k[o]=0),k[o]+=h}return k}function at(e,a){const k={};for(const f of Object.values(e)){if(!f)continue;const i=tt(f.powerStones,a);for(const[o,h]of Object.entries(i))k[o]||(k[o]=0),k[o]+=h}return k}function st(e,a){const k=new Map;for(const i of Object.values(e)){if(!i?.talisman)continue;const{id:o,rarity:h}=i.talisman,x=`${o}__${h}`,b=k.get(x);b?b.count++:k.set(x,{id:o,rarity:h,count:1})}const f=[];for(const{id:i,rarity:o,count:h}of k.values()){const x=a[o];if(!x)continue;const b=x.find(S=>S.talisman===i);if(!b)continue;const J=[],M={};for(const S of[2,3,4]){const _=`bonus_${S}`,V=b[_];if(!V)continue;const w=h>=S;if(J.push({required:S,bonuses:V,active:w}),w)for(const[D,R]of Object.entries(V))M[D]||(M[D]=0),M[D]+=R}J.length>0&&f.push({setName:b.set_name,talismanName:i,rarity:o,count:h,activeBonuses:M,thresholds:J})}return f}function be(e){return{powerStones:Array(e).fill(null),talisman:null}}const it=["id","level","tier","grade","default_grade","upgradeLevel","weight","armor_weight","speed","atk_speed","casting_speed","purchase_price","sale_price","repair_price","satis_kapali","gender","req_level"];function ge(e,a){if(!e||a<0)return{...e};const k=1+a/200,f={...e};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];if(typeof o=="number"&&!it.includes(i)&&!i.endsWith("_id")&&i!=="id"&&o!==0){const h=o*k;f[i]=Math.round(h*10)/10}}return f.grade=a,f}const te=e=>{if(e)return{...e,upgradeLevel:e.upgradeLevel!==void 0?Math.min(15,Math.max(0,e.upgradeLevel)):0}},lt=De("planner",()=>{const e=I([]),a=I(null),k=I(null),f=I(null),i=I(!1),o=I(null),h=I({}),x=I({}),b=I({}),J=I({}),M=I({}),S=I({}),_=async()=>{if(!i.value)try{const s=await fetch("/CodexFall/datas/plannerData.json");if(!s.ok)throw new Error("Failed to load planner data");o.value=await s.json(),o.value.equipmentSlots.forEach(y=>{y.id in h.value||(h.value[y.id]=null)}),o.value.attributes.forEach(y=>{y.id in J.value||(J.value[y.id]=0)}),i.value=!0}catch(t){console.error("Failed to load planner data",t)}},V=p(()=>Object.values(J.value).reduce((t,s)=>t+s,0)),w=p(()=>o.value?.config||null),D=p(()=>w.value?.maxAttributePoints||600),R=p(()=>w.value?.maxAttributePerAttr||100),ae=p(()=>w.value?.maxUpgradeLevel||15),G=p(()=>w.value?.maxSkillLevel||25),H=p(()=>w.value?.maxGrade||320),W=p(()=>w.value?.socketConfig||{maxPowerStones:3,maxTalismans:1}),$=p(()=>w.value?.rarityThresholds||{uncommon:1,rare:10,epic:19}),re=p(()=>w.value?.gearscoreExcludedSlots||["card1","card2"]),ue=p(()=>w.value?.gradeSliderTicks||[0,80,160,240,320]),K=p(()=>w.value?.upgradeBonuses||{0:0,1:0,2:14,3:24,4:42,5:76,6:106,7:142,8:184,9:232,10:286,11:346,12:412,13:484,14:562,15:646}),se=p(()=>o.value?.powerStoneStats||{}),oe=p(()=>o.value?.rarityColors||{1:{hex:"#e6edf3",rgba:"rgba(230, 237, 243, 1)"},2:{hex:"#56B65C",rgba:"rgba(86, 182, 92, 1)"},3:{hex:"#4F8EFF",rgba:"rgba(79, 142, 255, 1)"},4:{hex:"#C572FF",rgba:"rgba(197, 114, 255, 1)"},5:{hex:"#FFB347",rgba:"rgba(255, 179, 71, 1)"},6:{hex:"#FFD700",rgba:"rgba(255, 215, 0, 1)"}}),ie=p(()=>o.value?.modifiableStats||["physical_ap","physical_dp","magic_ap","magic_dp","hp","mp","accuracy","evasion"]),X=p(()=>o.value?.cardStats||{}),l=t=>(o.value?.equipmentSlots||[]).find(g=>g.id===t)?.socketsEnabled??!1,d=p(()=>!o.value?.classes||!k.value?null:o.value.classes.find(t=>t.id===k.value)||null),r=p(()=>{const t=d.value;return!t||!t.subclasses||!f.value?null:t.subclasses.find(s=>s.id===f.value)||null}),B=p(()=>o.value?.setBonuses?st(b.value,o.value.setBonuses):[]),E=p(()=>{const t={},s={},y=(N,F)=>{t[N]||(t[N]=0),t[N]+=F},g=(N,F)=>{s[N]||(s[N]=0),s[N]+=F};o.value?.attributes&&o.value.attributes.forEach(N=>{const F=J.value[N.id]||0;F>0&&N.bonuses.forEach(j=>{y(j.stat,F*j.multiplier)})}),Object.keys(h.value).forEach(N=>{const F=N,j=h.value[F];if(!j)return;const ve=x.value[F],Ee=ve?.stats||{},Le=ve?.upgradeLevel||0,qe=ve?.grade??j.grade??j.default_grade??0,Ce=ge(j,qe),ze=1+(K.value[Le.toString()]||0)/100;if((o.value?.statKeys||[]).forEach(Y=>{let P;const Q=Ee[Y.key],Pe=Number(j[Y.key])||0;Q!==void 0&&Number(Q)!==Pe?P=Number(Q):P=Number(Ce[Y.key]),!isNaN(P)&&P>0&&y(Y.key,P*ze)}),j.id&&X.value[j.id]){const Y=X.value[j.id];for(const[P,Q]of Object.entries(Y))P==="hp"||P==="mp"?g(P,Number(Q)):y(P,Number(Q))}});const z=at(b.value,se.value);for(const[N,F]of Object.entries(z))y(N,F);for(const N of B.value)for(const[F,j]of Object.entries(N.activeBonuses))y(F,j);for(const[N,F]of Object.entries(s))t[N]&&(t[N]=t[N]*(1+F/100));for(const[N,F]of Object.entries(t))t[N]=Math.round(F*100)/100;return t});(()=>{const t=localStorage.getItem("quinfall_saved_builds");if(t)try{const s=JSON.parse(t);s.forEach(y=>{y.equipmentOverrides&&Object.keys(y.equipmentOverrides).forEach(g=>{y.equipmentOverrides[g]=te(y.equipmentOverrides[g])})}),e.value=s}catch{console.error("Failed to parse builds from localStorage")}})();const C=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(e.value))},L=()=>{if(!a.value)return;const t=e.value.findIndex(s=>s.id===a.value);if(t!==-1){e.value[t].charClass=k.value,e.value[t].subclass=f.value,e.value[t].equipment=JSON.parse(JSON.stringify(h.value));const s=JSON.parse(JSON.stringify(x.value)),y={};Object.keys(s).forEach(g=>{y[g]=te(s[g])}),e.value[t].equipmentOverrides=y,e.value[t].equipmentSockets=JSON.parse(JSON.stringify(b.value)),e.value[t].attributes=JSON.parse(JSON.stringify(J.value)),e.value[t].skillLevels=JSON.parse(JSON.stringify(M.value)),e.value[t].skillStones=JSON.parse(JSON.stringify(S.value)),C()}},Se=t=>{k.value=t,f.value=null,M.value={},S.value={},h.value.weapon=null,h.value.offhand=null,x.value.weapon=void 0,x.value.offhand=void 0,L()},_e=t=>{f.value=t,L()},Ne=(t,s)=>{s<1&&(s=1),M.value[t]=s,L()},Oe=(t,s)=>{S.value[t]=s,L()},we=(t,s)=>{s=Math.max(0,Math.min(R.value,isNaN(s)?0:s)),J.value[t]=s,L()},xe=(t,s)=>{h.value[t]=s,x.value[t]=void 0,b.value[t]=void 0,L()},Be=t=>{h.value[t]=null,x.value[t]=void 0,b.value[t]=void 0,L()},Je=(t,s)=>{x.value[t]=te(s),L()},Fe=(t,s,y)=>{b.value[t]||(b.value[t]=be(W.value.maxPowerStones));const g=b.value[t];s>=0&&s<g.powerStones.length&&(g.powerStones[s]=y),L()},Ie=(t,s)=>{const y=b.value[t];y&&s>=0&&s<y.powerStones.length&&(y.powerStones[s]=null),L()},Me=(t,s)=>{b.value[t]||(b.value[t]=be(W.value.maxPowerStones)),b.value[t].talisman=s,L()},je=t=>{const s=b.value[t];s&&(s.talisman=null),L()},de=()=>{k.value=null,f.value=null,Object.keys(h.value).forEach(t=>{h.value[t]=null}),x.value={},b.value={},Object.keys(J.value).forEach(t=>{J.value[t]=0}),M.value={},S.value={},a.value=null};return{savedBuilds:e,currentBuildId:a,selectedClass:k,equipment:h,equipmentOverrides:x,equipmentSockets:b,attributes:J,totalAttributePoints:V,currentClassData:d,currentSubclassData:r,stats:E,activeSetBonuses:B,setClass:Se,setSubclass:_e,setSkillLevel:Ne,setSkillStone:Oe,setAttribute:we,equipItem:xe,unequipItem:Be,setItemOverride:Je,setPowerStone:Fe,removePowerStone:Ie,setTalisman:Me,removeTalisman:je,isSocketsEnabled:l,resetPlanner:de,saveCurrentBuild:t=>{const s=JSON.parse(JSON.stringify(x.value)),y={};Object.keys(s).forEach(z=>{y[z]=te(s[z])});const g={id:a.value||Date.now().toString(),name:t,charClass:k.value,subclass:f.value,equipment:JSON.parse(JSON.stringify(h.value)),equipmentOverrides:y,equipmentSockets:JSON.parse(JSON.stringify(b.value)),attributes:JSON.parse(JSON.stringify(J.value)),skillLevels:JSON.parse(JSON.stringify(M.value)),skillStones:JSON.parse(JSON.stringify(S.value))};if(a.value){const z=e.value.findIndex(N=>N.id===a.value);z!==-1?(g.name=t,e.value[z]=g):e.value.push(g)}else a.value=g.id,e.value.push(g);C()},loadBuild:t=>{const s=e.value.find(g=>g.id===t);if(!s)return;a.value=s.id,k.value=s.charClass,f.value=s.subclass||null,h.value=JSON.parse(JSON.stringify(s.equipment||{}));const y=JSON.parse(JSON.stringify(s.equipmentOverrides||{}));x.value={},Object.keys(y).forEach(g=>{x.value[g]=te(y[g])}),b.value=JSON.parse(JSON.stringify(s.equipmentSockets||{})),J.value=JSON.parse(JSON.stringify(s.attributes||{})),M.value=JSON.parse(JSON.stringify(s.skillLevels||{})),S.value=JSON.parse(JSON.stringify(s.skillStones||{}))},deleteBuild:t=>{e.value=e.value.filter(s=>s.id!==t),a.value===t&&de(),C()},newBuild:t=>{de();const s=Date.now().toString();a.value=s;const y=JSON.parse(JSON.stringify(x.value)),g={};Object.keys(y).forEach(z=>{g[z]=te(y[z])}),e.value.push({id:s,name:t,charClass:null,subclass:null,equipment:JSON.parse(JSON.stringify(h.value)),equipmentOverrides:g,equipmentSockets:JSON.parse(JSON.stringify(b.value)),attributes:JSON.parse(JSON.stringify(J.value)),skillLevels:{},skillStones:{}}),C()},isLoaded:i,plannerData:o,loadPlannerData:_,selectedSubclass:f,skillLevels:M,skillStones:S,config:w,socketConfig:W,maxAttributePoints:D,maxAttributePerAttr:R,maxUpgradeLevel:ae,maxSkillLevel:G,maxGrade:H,powerStoneStatsMap:se,cardStatsMap:X,rarityThresholds:$,gearscoreExcludedSlots:re,gradeSliderTicks:ue,rarityColors:oe,modifiableStats:ie,upgradeBonuses:K}}),rt={class:"tooltip-header"},ot={class:"header-top"},nt={class:"rarity-tier"},ct={class:"rarity-label"},ut={key:0,class:"tier-label"},dt={key:1,class:"level-label"},vt={class:"item-type"},mt={class:"header-main"},yt={class:"item-name"},pt={class:"header-icon"},ht=["src"],ft={class:"tooltip-body"},kt={key:0,class:"primary-stats"},bt={key:0,class:"primary-stat-block"},gt={class:"primary-label"},St={class:"primary-value"},_t={key:0,class:"bonus-value"},Nt={key:1,class:"primary-stat-block"},Ot={class:"primary-label"},wt={class:"primary-value"},xt={key:0,class:"bonus-value"},Bt={key:2,class:"grade-block"},Jt={class:"grade-value"},Ft={class:"grade-label"},It={class:"stars-container"},Mt={key:1,class:"primary-stats"},jt={class:"primary-stat-block"},Et={class:"primary-label"},Lt={class:"primary-value"},qt={key:0,class:"bonus-value"},Ct={key:0,class:"grade-block"},zt={class:"grade-value"},Pt={class:"grade-label"},Dt={class:"stars-container"},Rt={key:2,class:"grade-only"},Tt={class:"grade-block"},Vt={class:"grade-value"},Gt={class:"grade-label"},At={class:"stars-container"},Ut={key:3,class:"item-description"},$t={key:4,class:"traits-section"},Kt={class:"trait-label"},Ht={class:"trait-value-container"},Wt={class:"trait-value"},Xt={key:0,class:"bonus-text"},Yt={key:5,class:"socket-section"},Qt={class:"socket-section__title"},Zt={key:0,class:"socket-stone-stats"},ea={key:0,class:"socket-talisman-row"},ta={class:"socket-talisman-count"},aa={class:"pieces-label"},sa={key:6,class:"tooltip-footer"},ia={key:0,class:"footer-prices"},la=["title"],ra={class:"footer-label"},oa={class:"footer-value"},na={class:"footer-value-text"},ca=["title"],ua={class:"footer-label"},da={class:"footer-value"},va={class:"footer-value-text"},ma=["title"],ya={class:"footer-label"},pa={class:"footer-value"},ha={class:"footer-value-text"},fa={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},ka={class:"footer-icons-row"},ba=["title"],ga=["title"],Sa=["title"],_a={class:"icon-badge is-disabled",title:"No Data for Indestructible/Trash"},Na={key:0,style:{"font-size":"0.8125rem",color:"#8b949e","text-align":"right"}},Oa={style:{color:"#e6edf3","font-weight":"600"}},wa=Re({__name:"ItemTooltip",props:{item:{},visible:{type:Boolean},x:{},y:{},overrideGrade:{},overrideRarity:{},overrideLevel:{},overrideUpgradeLevel:{},overrideStats:{},slotId:{}},setup(e){const a=e,k=Ae(),f=lt(),{t:i,locale:o}=Ue(),h=l=>l?o.value==="pt-BR"?l.baslik_loc_Portuguese||l.baslik_loc_English||l.id:o.value==="en"?l.baslik_loc_English||l.id:o.value==="es"?l.baslik_loc_Spanish||l.baslik_loc_English||l.id:l[`baslik_loc_${o.value}`]||l.baslik_loc_English||l.id:"",x=l=>l?o.value==="pt-BR"?l.aciklama_loc_Portuguese||l.aciklama_loc_English||"":o.value==="en"?l.aciklama_loc_English||"":o.value==="es"?l.aciklama_loc_Spanish||l.aciklama_loc_English||"":l[`aciklama_loc_${o.value}`]||l.aciklama_loc_English||"":"",b=l=>{let d;return a.overrideGrade!==void 0?d=fe(a.overrideGrade):a.overrideRarity!==void 0?d=a.overrideRarity:d=ke(l),{1:"#e6edf3",2:"#3fb950",3:"#58a6ff",4:"#bc8cff",5:"#d29922"}[d]||"#e6edf3"},J=l=>{let d;a.overrideGrade!==void 0?d=fe(a.overrideGrade):a.overrideRarity!==void 0?d=a.overrideRarity:d=ke(l);const B={1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[d]||"common";return i(`rarity.${B}`)},M=p(()=>a.overrideUpgradeLevel!==void 0?a.overrideUpgradeLevel:a.item?.upgradeLevel||0),S=p(()=>{const l=M.value;return(f.upgradeBonuses?.[l.toString()]||0)/100}),_=p(()=>ge(a.item,w.value)),V=p(()=>{if(!a.item)return[];if(R.value&&f.cardStatsMap[a.item.id]){const r=[],B=f.cardStatsMap[a.item.id];for(const[E,T]of Object.entries(B))r.push({key:E,label:i("stats."+E),value:`+${T}%`,bonus:0});return r}const l=[{key:"accuracy",label:i("stats.accuracy")},{key:"atk_speed",label:i("stats.atk_speed")},{key:"evasion",label:i("stats.evasion")},{key:"hp",label:i("stats.hp")},{key:"hp_regen",label:i("stats.hp_regen")},{key:"magic_ap",label:i("stats.magic_ap")},{key:"magic_dp",label:i("stats.magic_dp")},{key:"mp",label:i("stats.mp")},{key:"mp_regen",label:i("stats.mp_regen")},{key:"physical_ap",label:i("stats.physical_ap")},{key:"physical_dp",label:i("stats.physical_dp")},{key:"speed",label:i("stats.speed")},{key:"casting_speed",label:i("stats.casting_speed")},{key:"extra_damage_mob",label:i("stats.extra_damage_mob")},{key:"extra_damage_boss",label:i("stats.extra_damage_boss")}],d=_.value;return l.filter(r=>{if(ae.value&&r.key==="hp"&&G.value.key==="hp")return!1;const B=a.item[r.key]!==void 0?Number(a.item[r.key]):0;return a.overrideStats&&a.overrideStats[r.key]!==void 0&&Number(a.overrideStats[r.key])!==B?!0:d[r.key]!==void 0&&d[r.key]!==null&&Number(d[r.key])!==0}).map(r=>{const B=a.item[r.key]!==void 0?Number(a.item[r.key]):0,E=a.overrideStats&&a.overrideStats[r.key]!==void 0&&Number(a.overrideStats[r.key])!==B,T=Number(E?a.overrideStats[r.key]:d[r.key]),C=S.value>0?Number((T*S.value).toFixed(2)):0;return{key:r.key,label:r.label,value:Number(T.toFixed(2)),bonus:C}})}),w=p(()=>a.overrideGrade!==void 0?a.overrideGrade:a.item?.grade||0),D=p(()=>{const l=w.value;return l<160?1:l>=160&&l<200?2:l>=200&&l<240?3:l>=240&&l<288?4:5}),R=p(()=>a.slotId==="card1"||a.slotId==="card2"||a.item?.tip_loc_English==="Power Card"),ae=p(()=>a.slotId==="earring1"||a.slotId==="earring2"),G=p(()=>{const l=_.value,d=Number(a.item?.hp||0),r=Number(a.item?.mp||0),B=a.overrideStats?.hp!==void 0&&Number(a.overrideStats.hp)!==d,E=a.overrideStats?.mp!==void 0&&Number(a.overrideStats.mp)!==r,T=Number((B?a.overrideStats.hp:l?.hp)||0),C=Number((E?a.overrideStats.mp:l?.mp)||0);return T>=C?{key:"hp",label:i("stats.hp"),value:Number(T.toFixed(2)),bonus:S.value>0?Number((T*S.value).toFixed(2)):0}:{key:"mp",label:i("stats.mp"),value:Number(C.toFixed(2)),bonus:S.value>0?Number((C*S.value).toFixed(2)):0}}),H=p(()=>a.slotId&&f.equipmentSockets[a.slotId]||null),W=p(()=>H.value?H.value.powerStones.filter(l=>l!==null).map(l=>{const d=k.getItemById(l),r=f.powerStoneStatsMap[l]||{},B=d?h(d):l;return{id:l,name:B,stats:r}}):[]),$=p(()=>{if(!H.value?.talisman)return null;const l=H.value.talisman;let d=0;for(const r of Object.values(f.equipmentSockets))r?.talisman?.id===l.id&&r?.talisman?.rarity===l.rarity&&d++;return{...l,count:d}}),re=p(()=>{const l=$.value?.rarity;if(!l)return"#8b949e";switch(l){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#8b949e"}}),ue=l=>{const d=h(l),r=M.value;return r>0?`+${r} ${d}`:d},K=I(null),se=I(0),oe=I(0),ie=I(!1),X=async()=>{if(!K.value||!a.visible||(await Ge(),!K.value||!a.visible))return;const l=K.value.getBoundingClientRect(),d=15;let r=a.x+d,B=a.y-l.height-d;r+l.width>window.innerWidth&&(r=a.x-l.width-d),B<0&&(B=10),se.value=r,oe.value=B,ie.value=!0};return pe(()=>a.visible,l=>{l?X():ie.value=!1}),pe([()=>a.x,()=>a.y],()=>{a.visible&&X()}),(l,d)=>Te((u(),v("div",{ref_key:"tooltipRef",ref:K,class:"item-tooltip",style:me({left:`${se.value}px`,top:`${oe.value}px`,opacity:ie.value?1:0,transition:"opacity 0.05s ease","--rarity-color":b(e.item)})},[n("div",rt,[n("div",ot,[n("div",nt,[n("span",ct,m(J(e.item)),1),e.item?.tier?(u(),v("span",ut,"T"+m(e.item.tier),1)):O("",!0),e.overrideLevel||e.item?.level?(u(),v("span",dt,"Lv. "+m(e.overrideLevel||e.item?.level),1)):O("",!0)]),n("div",vt,m(e.item?.tip_loc_English||c(i)("item.item")),1)]),n("div",mt,[n("h3",yt,m(ue(e.item)),1)]),n("div",pt,[e.item?.icon1?(u(),v("img",{key:0,src:c(k).getIconUrl(e.item.icon1)},null,8,ht)):(u(),le(c(he),{key:1,size:40,class:"icon-fallback"}))])]),n("div",ft,[_.value.physical_dp||_.value.physical_ap||_.value.magic_ap||_.value.magic_dp?(u(),v("div",kt,[_.value.physical_dp||_.value.magic_dp?(u(),v("div",bt,[n("span",gt,m(_.value.physical_dp?c(i)("stats.physical_dp"):c(i)("stats.magic_dp")),1),n("span",St,[A(m(Number(((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:_.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:_.value.magic_dp)).toFixed(2)))+" ",1),S.value>0?(u(),v("span",_t," (+"+m(Number((((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:_.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:_.value.magic_dp))*S.value).toFixed(2)))+") ",1)):O("",!0)])])):_.value.physical_ap||_.value.magic_ap?(u(),v("div",Nt,[n("span",Ot,m(_.value.physical_ap?c(i)("stats.physical_ap"):c(i)("stats.magic_ap")),1),n("span",wt,[A(m(Number(((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:_.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:_.value.magic_ap)).toFixed(2)))+" ",1),S.value>0?(u(),v("span",xt," (+"+m(Number((((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:_.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:_.value.magic_ap))*S.value).toFixed(2)))+") ",1)):O("",!0)])])):O("",!0),w.value>0&&!R.value?(u(),v("div",Bt,[n("span",Jt,m(w.value),1),n("span",Ft,m(c(i)("item.simulateGrade")),1),n("div",It,[(u(),v(Z,null,ee(5,r=>q(c(ce),{key:r,size:12,class:ne(["star-icon",{"star-active":r<=D.value}])},null,8,["class"])),64))])])):O("",!0)])):ae.value&&G.value.value>0?(u(),v("div",Mt,[n("div",jt,[n("span",Et,m(G.value.label),1),n("span",Lt,[A(m(G.value.value)+" ",1),G.value.bonus>0?(u(),v("span",qt," (+"+m(G.value.bonus)+") ",1)):O("",!0)])]),w.value>0?(u(),v("div",Ct,[n("span",zt,m(w.value),1),n("span",Pt,m(c(i)("item.simulateGrade")),1),n("div",Dt,[(u(),v(Z,null,ee(5,r=>q(c(ce),{key:r,size:12,class:ne(["star-icon",{"star-active":r<=D.value}])},null,8,["class"])),64))])])):O("",!0)])):w.value>0&&!R.value&&!ae.value?(u(),v("div",Rt,[n("div",Tt,[n("span",Vt,m(w.value),1),n("span",Gt,m(c(i)("item.simulateGrade")),1),n("div",At,[(u(),v(Z,null,ee(5,r=>q(c(ce),{key:r,size:12,class:ne(["star-icon",{"star-active":r<=D.value}])},null,8,["class"])),64))])])])):O("",!0),x(e.item)&&!R.value?(u(),v("p",Ut,m(x(e.item)),1)):O("",!0),V.value.length>0?(u(),v("div",$t,[(u(!0),v(Z,null,ee(V.value,r=>(u(),v("div",{class:"trait-row",key:r.key},[n("span",Kt,"â€¢ "+m(r.label)+":",1),n("span",Ht,[n("span",Wt,m(r.value),1),r.bonus>0?(u(),v("span",Xt," (+"+m(r.bonus)+")",1)):O("",!0)])]))),128))])):O("",!0),W.value.length>0||$.value?(u(),v("div",Yt,[n("div",Qt,[q(c(We),{size:11}),n("span",null,m(c(i)("planner.sockets.title")),1)]),(u(!0),v(Z,null,ee(W.value,r=>(u(),v("div",{key:r.id,class:"socket-stone-row"},[q(c(ce),{size:10,class:"socket-power-icon"}),Object.keys(r.stats).length>0?(u(),v("span",Zt,[(u(!0),v(Z,null,ee(r.stats,(B,E)=>(u(),v("span",{key:E},m(c(i)("stats."+E))+": "+m(B),1))),128))])):O("",!0)]))),128)),$.value?(u(),v("div",ea,[q(c(Ye),{size:10,style:me({color:re.value})},null,8,["style"]),n("span",{class:"socket-talisman-name",style:me({color:re.value})},m($.value.id),5),n("span",ta,[A(m($.value.count)+"/4 ",1),n("span",aa,m(c(i)("planner.sockets.pieces")),1)])])):O("",!0)])):O("",!0),e.item?.sale_price||e.item?.price||e.item?.repair_price||e.item?.id||e.item?.satis_kapali!==void 0||e.item?.weight||e.item?.gender!==void 0?(u(),v("div",sa,[e.item?.sale_price||e.item?.price||e.item?.repair_price?(u(),v("div",ia,[e.item?.price?(u(),v("div",{key:0,class:"footer-stat",title:c(i)("stats.purchase_price")},[n("span",ra,m(c(i)("stats.purchase_price"))+":",1),n("span",oa,[q(c(ye),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),d[0]||(d[0]=A()),n("span",na,m(new Intl.NumberFormat(c(o)==="pt-BR"?"pt-BR":"en-US").format(e.item.price)),1)])],8,la)):O("",!0),e.item?.sale_price?(u(),v("div",{key:1,class:"footer-stat",title:c(i)("stats.sale_price")},[n("span",ua,m(c(i)("stats.sale_price"))+":",1),n("span",da,[q(c(ye),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),d[1]||(d[1]=A()),n("span",va,m(new Intl.NumberFormat(c(o)==="pt-BR"?"pt-BR":"en-US").format(e.item.sale_price)),1)])],8,ca)):O("",!0),e.item?.repair_price?(u(),v("div",{key:2,class:"footer-stat",title:c(i)("stats.repair_price")},[n("span",ya,m(c(i)("stats.repair_price"))+":",1),n("span",pa,[q(c(ye),{size:12,class:"inline-icon blue",style:{"margin-right":"4px"}}),d[2]||(d[2]=A()),n("span",ha,m(new Intl.NumberFormat(c(o)==="pt-BR"?"pt-BR":"en-US").format(e.item.repair_price)),1)])],8,ma)):O("",!0)])):O("",!0),n("div",fa,[n("div",ka,[e.item?.id?(u(),v("div",{key:0,class:"icon-badge",title:c(i)("common.itemID")+": "+e.item.id},[q(c($e),{size:14})],8,ba)):O("",!0),e.item?.satis_kapali!==void 0&&e.item?.satis_kapali!==null?(u(),v("div",{key:1,class:ne(["icon-badge",{"is-disabled":e.item.satis_kapali!==0}]),title:e.item.satis_kapali===0?c(i)("stats.salis_closed")+": "+c(i)("common.yes"):c(i)("stats.salis_closed")+": "+c(i)("common.no")},[e.item.satis_kapali===0?(u(),le(c(he),{key:0,size:14,style:{color:"#3fb950"}})):(u(),le(c(Xe),{key:1,size:14,style:{color:"#f85149"}}))],10,ga)):O("",!0),e.item?.gender!==void 0&&e.item?.gender!==null?(u(),v("div",{key:2,class:"icon-badge",title:c(i)("stats.gender")+": "+(e.item.gender===0?"Both":e.item.gender===1?"Male":"Female")},[e.item.gender===0?(u(),le(c(et),{key:0,size:14,style:{color:"#8b949e"}})):(u(),le(c(Ze),{key:1,size:14,style:{color:"#8b949e"}}))],8,Sa)):O("",!0),n("div",_a,[q(c(Qe),{size:14})])]),e.item?.weight!==void 0&&e.item?.weight!==null?(u(),v("div",Na,[A(m(c(i)("common.weight"))+": ",1),n("span",Oa,m(c(Ke)(e.item.weight)),1)])):O("",!0)])])):O("",!0)])],4)),[[Ve,e.visible]])}}),La=He(wa,[["__scopeId","data-v-0a9d41aa"]]);export{ye as C,We as G,La as I,Xe as L,Ye as S,Qe as T,et as U,Ze as a,ge as c,lt as u};
