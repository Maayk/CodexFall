import{d as fe,r as b,o as ye,w as J,k as r,f as h,l as o,F as k,p as f,B as A,u as i,t as c,q as w,M as R,A as Z,n as g,C as ee,N as ge,x as se,E,D as xe,c as G,y as Ce,z as a}from"./vue-vendor-Y-QMGarF.js";import{u as Se,a as we,P as H,C as oe,f as Ge,S as Be,n as Me,_ as Te}from"./index-gEiOSoBu.js";import{A as Ae,C as te,W as Re,S as le,a as Ee,b as He,F as ne,c as De,L as Le,T as Pe,R as ae,G as ze,B as $e,d as Fe,e as ie,f as D,g as We,h as Ie,i as Ve,j as Ne}from"./AppInput-BHEtRDfn.js";import{S as Oe,G as re,I as Ue}from"./ItemTooltip-VInOKWM1.js";import{H as ce,a as qe}from"./house-DVx7S5nl.js";import"./i18n-BpcxAb73.js";const Qe={key:0,class:"codex__layout codex__skeleton"},Ye={class:"codex__sidebar"},je={class:"codex__sidebar-section"},Ke={class:"codex__main"},Xe={class:"codex__table-container"},Je={class:"codex__table"},Ze={key:1,class:"codex__layout"},es={class:"codex__sidebar"},ss={class:"codex__sidebar-section"},os=["onClick"],ts=["title"],ls={key:0,class:"codex__sidebar-group-content"},ns={key:0,class:"codex__sidebar-group-items"},as=["onClick"],is=["title"],rs={key:1,class:"codex__sidebar-subgroups"},cs=["onClick"],us=["title"],ds={key:0,class:"codex__sidebar-subgroup-items"},ms=["onClick"],_s=["title"],ps={class:"codex__main"},hs={class:"codex__header"},vs={class:"codex__header-title"},bs={class:"codex__results-count"},ks={class:"codex__search"},fs={class:"codex__table-container"},ys={key:0,class:"codex__table"},gs={class:"col-name"},xs={class:"col-type"},Cs={class:"col-rarity"},Ss={class:"col-level"},ws={class:"col-weight"},Gs=["onClick","onMouseenter","onMousemove"],Bs={class:"col-name"},Ms={class:"item-name-cell"},Ts={class:"item-icon-wrapper"},As=["src"],Rs={class:"item-name-text"},Es={class:"item-id"},Hs={class:"col-type"},Ds={class:"col-rarity"},Ls={class:"col-level"},Ps={class:"col-weight"},zs={key:1,class:"codex__no-results"},$s={class:"codex__no-results-content"},Fs={class:"codex__no-results-title"},Ws={key:0,class:"codex__no-results-hint"},Is={key:0,class:"codex__pagination"},Vs=["disabled"],Ns=["disabled"],Os={class:"codex__page-info"},Us=["disabled"],qs=["disabled"],Qs=fe({__name:"Codex",setup(Ys){const I=Ce(),L=xe(),{t:u,locale:B}=Se(),m=we(),x=b({}),ue=s=>{x.value[s]=!x.value[s]},M=b(null),V=b(0),N=b(0),O=(s,t)=>{M.value=t,V.value=s.clientX,N.value=s.clientY},U=()=>{M.value=null},de=()=>{U()},y=b(""),d=b(L.params.category?decodeURIComponent(L.params.category):"all"),p=b(1),P=b(20),q=b(!m.isLoaded);ye(async()=>{m.isLoaded||await m.loadData(),q.value=!1,Y()}),J(()=>L.params.category,s=>{s&&(d.value=decodeURIComponent(s),p.value=1,Y())}),J([y,d],()=>{p.value=1});const _=[{name:"Weapons",icon:Ee,subGroups:[{name:"Melee",icon:Ae,types:["Dual Axe","Dual Dagger","Spear","Sword","Two Handed Sword","War Hammer"]},{name:"Ranged",icon:te,types:["Bow","Dual Crossbow"]},{name:"Magic",icon:Re,types:["Arcane Staff","Life Staff"]},{name:"Shield",icon:le,types:["Shield"]}]},{name:"Armors",icon:le,subGroups:[{name:"Heavy",icon:He,types:["Armor [Heavy]","Boots [Heavy]","Gauntlet [Heavy]","Helmet [Heavy]"]},{name:"Light",icon:ne,types:["Armor [Light]","Boots [Light]","Gauntlet [Light]","Helmet [Light]"]},{name:"Robe",icon:Oe,types:["Armor [Robe]","Boots [Robe]","Gauntlet [Robe]","Helmet [Robe]"]}]},{name:"Accessories",icon:re,types:["Bag","Bracelet","Earring","Necklace","Ring","Talisman"]},{name:"Consumables",icon:De,types:["Food","Potion","Supplement Potion"]},{name:"Materials & Crafting",icon:H,subGroups:[{name:"Materials",icon:Le,types:["Enhancement Material","Material","Quest Material","Usable Material"]},{name:"Stones",icon:re,types:["Rune Stone","Power Stone","Skill Stone","Puzzle Stone"]}]},{name:"Housing & Stations",icon:qe,subGroups:[{name:"Workbenches",icon:ce,types:["Alchemist’s Workbench","Auxiliary Workbenches","Blacksmith’s Forge","Carpenter's Workbench","Cook’s Workbench","Gem Cutting Workbench","Jewel Crafting Workbench","Tinkering Workbench","Loom","Sawmill","Smelter","Spinning Wheel","Tanning Rack","Essence Refiner"]},{name:"Furniture & Farm",icon:Pe,types:["Home Furnitures","Beehive","Farmable Animal","Seed"]}]},{name:"Tools",icon:ce,types:["Axe [Tool]","Fishing Rod [Tool]","Hunting Knife [Tool]","Pickaxe [Tool]","Sickle [Tool]"]},{name:"Mounts & Pets",icon:ae,subGroups:[{name:"Mounts",icon:ae,types:["Mount"]},{name:"Mount Equipment",icon:H,types:["Mount - Horseshoes","Mount - Saddle","Mount - Stirrups"]},{name:"Pets",icon:ze,types:["Pet"]}]},{name:"Miscellaneous",icon:ie,subGroups:[{name:"Ammunition",icon:te,types:["Arrow (Bow)","Arrow (Dual Crossbow)"]},{name:"Costumes",icon:ne,types:["Costume - Armor","Costume - Bow","Costume - Dual Axe","Costume - Dual Crossbow","Costume - Dual Dagger","Costume - Helmet","Costume - Mount","Costume - One Handed Sword","Costume - Pet","Costume - Quiver (Bow)","Costume - Quiver (Dual Crossbow)","Costume - Shield","Costume - Spear","Costume - Staff","Costume - Two Handed Sword","Costume - War Hammer"]},{name:"Skill Books",icon:$e,types:["Skill Book [Arcane Staff]","Skill Book [Bow]","Skill Book [Dual Axe]","Skill Book [Dual Crossbow]","Skill Book [Dual Dagger]","Skill Book [Life Staff]","Skill Book [Spear]","Skill Book [Sword]","Skill Book [Two Handed Sword]","Skill Book [War Hammer]"]},{name:"Vehicles & Ships",icon:Fe,types:["Defense Vehicles","Merchant Ship","Pirate Ship"]},{name:"Other",icon:ie,types:["Power Card"]}]}];Object.keys(m.expandedGroups).length===0&&_.forEach(s=>{m.expandedGroups[s.name]=!1});const Q=G(()=>m.expandedGroups),me=s=>{m.expandedGroups[s]=!m.expandedGroups[s]},Y=()=>{const s=d.value;if(s==="all")return;const t=_.find(e=>e.name===s);if(t){m.expandedGroups[t.name]=!0;return}for(const e of _)if(e.subGroups){const l=e.subGroups.find(n=>n.name===s);if(l){m.expandedGroups[e.name]=!0,x.value[l.name]=!0;return}}for(const e of _)if(e.types&&e.types.includes(s)){m.expandedGroups[e.name]=!0;return}for(const e of _)if(e.subGroups){for(const l of e.subGroups)if(l.types.includes(s)){m.expandedGroups[e.name]=!0,x.value[l.name]=!0;return}}},_e=G(()=>{const s=new Set(m.items.map(t=>t.tip_loc_English).filter(Boolean));return _.map(t=>{let e=[],l=[];return t.types&&(e=t.types.filter(n=>s.has(n)).sort((n,v)=>n.localeCompare(v))),t.subGroups&&(l=t.subGroups.map(n=>({...n,types:n.types.filter(v=>s.has(v)).sort((v,ke)=>v.localeCompare(ke))})).filter(n=>n.types.length>0)),{...t,types:e,subGroups:l}}).filter(t=>(t.types?.length||0)>0||(t.subGroups?.length||0)>0)}),z=G(()=>{let s=m.items;if(d.value!=="all"){const t=_.find(e=>e.name===d.value);if(t){const e=new Set;t.types&&t.types.forEach(l=>e.add(l)),t.subGroups&&t.subGroups.forEach(l=>{l.types.forEach(n=>e.add(n))}),s=s.filter(l=>e.has(l.tip_loc_English))}else{let e=null;for(const l of _)if(l.subGroups){const n=l.subGroups.find(v=>v.name===d.value);if(n){e=n.types;break}}if(e){const l=new Set(e);s=s.filter(n=>l.has(n.tip_loc_English))}else s=s.filter(l=>l.tip_loc_English===d.value)}}if(y.value.trim()&&(s=m.searchItems(y.value),d.value!=="all")){const t=_.find(e=>e.name===d.value);if(t){const e=new Set;t.types&&t.types.forEach(l=>e.add(l)),t.subGroups&&t.subGroups.forEach(l=>l.types.forEach(n=>e.add(n))),s=s.filter(l=>e.has(l.tip_loc_English))}else{let e=null;for(const l of _)if(l.subGroups){const n=l.subGroups.find(v=>v.name===d.value);if(n){e=n.types;break}}if(e){const l=new Set(e);s=s.filter(n=>l.has(n.tip_loc_English))}else s=s.filter(l=>l.tip_loc_English===d.value)}}return s}),C=G(()=>Math.ceil(z.value.length/P.value)),j=G(()=>{const s=(p.value-1)*P.value,t=s+P.value;return z.value.slice(s,t)}),pe=s=>{I.push(`/item/${s}`)},$=s=>{d.value=s,I.push(`/codex/${s}`)},he=s=>B.value==="pt-BR"?s.baslik_loc_Portuguese||s.baslik_loc_English||s.id:B.value==="en"?s.baslik_loc_English||s.id:B.value==="es"?s.baslik_loc_Spanish||s.baslik_loc_English||s.id:s[`baslik_loc_${B.value}`]||s.baslik_loc_English||s.id,ve=s=>{if(s==="all")return u("common.all")||"All Items";const t=_.find(e=>e.name===s);if(t)return F(t.name);for(const e of _)if(e.subGroups){const l=e.subGroups.find(n=>n.name===s);if(l)return W(l.name)}return S(s)},F=s=>{const e={Weapons:"weapons",Armors:"armors",Accessories:"accessories",Consumables:"consumables",Tools:"tools","Materials & Crafting":"materials",Materials:"materials","Mounts & Pets":"mountsPets","Housing & Stations":"housingStations",Costumes:"costumes","Skill Books":"skillBooks",Miscellaneous:"miscellaneous"}[s];return e?u(`codex.categories.${e}`):s},W=s=>{const e={Melee:"melee",Ranged:"ranged",Magic:"magic",Shield:"shield",Heavy:"heavy",Light:"light",Robe:"robe",Other:"other",Materials:"materials",Stones:"stones",Workbenches:"workbenches","Furniture & Farm":"furnitureFarm",Mounts:"mounts","Mount Equipment":"mountEquipment",Pets:"pets",Ammunition:"ammunition",Costumes:"costumes","Skill Books":"skillBooks","Vehicles & Ships":"vehiclesShips"}[s];return e?u(`codex.subcategories.${e}`):s},S=s=>{if(!s)return s;const t=s.toLowerCase().replace(/[^a-z0-9]/g,""),e=u(`codex.itemTypes.${t}`);return e===`codex.itemTypes.${t}`?s:e},K=s=>{const t=Me(s);return{1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[t]||"common"},X=s=>{const t=K(s);return{common:"#e6edf3",uncommon:"#238636",rare:"#1f6feb",epic:"#8957e5",legendary:"#d29922"}[t]||"#e6edf3"},be=s=>{const t=K(s);return u(`rarity.${t}`)||t},T=s=>{s>=1&&s<=C.value&&(p.value=s,window.scrollTo({top:0,behavior:"smooth"}))};return(s,t)=>(a(),r("div",{class:"codex",onMouseleave:de},[h(Ue,{item:M.value,visible:!!M.value,x:V.value,y:N.value},null,8,["item","visible","x","y"]),q.value?(a(),r("div",Qe,[o("aside",Ye,[o("div",je,[t[8]||(t[8]=o("div",{class:"skeleton-sidebar-item skeleton-pulse",style:{width:"80%","margin-bottom":"2rem"}},null,-1)),(a(),r(k,null,f(6,e=>o("div",{key:e,class:"skeleton-sidebar-group"},[...t[7]||(t[7]=[o("div",{class:"skeleton-sidebar-title skeleton-pulse"},null,-1),o("div",{class:"skeleton-sidebar-item skeleton-pulse"},null,-1),o("div",{class:"skeleton-sidebar-item skeleton-pulse",style:{width:"60%"}},null,-1),o("div",{class:"skeleton-sidebar-item skeleton-pulse",style:{width:"70%"}},null,-1)])])),64))])]),o("main",Ke,[t[12]||(t[12]=o("div",{class:"codex__header"},[o("div",{class:"skeleton-header-title skeleton-pulse"}),o("div",{class:"skeleton-search-bar skeleton-pulse"})],-1)),o("div",Xe,[o("table",Je,[o("thead",null,[o("tr",null,[(a(),r(k,null,f(5,e=>o("th",{key:"th"+e},[...t[9]||(t[9]=[o("div",{class:"skeleton-th skeleton-pulse"},null,-1)])])),64))])]),o("tbody",null,[(a(),r(k,null,f(10,e=>o("tr",{key:"tr"+e,class:"codex__table-row"},[t[11]||(t[11]=o("td",{class:"col-name"},[o("div",{class:"item-name-cell"},[o("div",{class:"skeleton-table-icon skeleton-pulse"}),o("div",{class:"skeleton-table-text-group"},[o("div",{class:"skeleton-table-title skeleton-pulse"}),o("div",{class:"skeleton-table-subtitle skeleton-pulse"})])])],-1)),(a(),r(k,null,f(4,l=>o("td",{key:"td"+l},[...t[10]||(t[10]=[o("div",{class:"skeleton-table-cell skeleton-pulse"},null,-1)])])),64))])),64))])])])])])):(a(),r("div",Ze,[o("aside",es,[o("div",ss,[o("div",{class:A(["codex__sidebar-item",{"codex__sidebar-item--active":d.value==="all"}]),onClick:t[0]||(t[0]=e=>$("all"))},[h(i(H),{size:18,class:"codex__sidebar-icon"}),o("span",null,c(i(u)("common.all")||"All Items"),1)],2),(a(!0),r(k,null,f(_e.value,e=>(a(),r("div",{key:e.name,class:"codex__sidebar-group"},[o("div",{class:"codex__sidebar-group-title",onClick:l=>me(e.name),style:{cursor:"pointer"}},[(a(),w(R(Q.value[e.name]?i(oe):i(D)),{size:16})),(a(),w(R(e.icon),{size:14,style:{"margin-left":"-4px"}})),o("span",{class:"truncate-text",title:F(e.name)},c(F(e.name)),9,ts)],8,os),h(ee,{name:"expand"},{default:Z(()=>[Q.value[e.name]?(a(),r("div",ls,[e.types&&e.types.length>0?(a(),r("div",ns,[(a(!0),r(k,null,f(e.types,l=>(a(),r("div",{key:l,class:A(["codex__sidebar-item codex__sidebar-item--sub",{"codex__sidebar-item--active":d.value===l}]),onClick:n=>$(l)},[h(i(D),{size:14,class:"codex__sidebar-icon-sm"}),o("span",{class:"truncate-text",title:S(l)},c(S(l)),9,is)],10,as))),128))])):g("",!0),e.subGroups&&e.subGroups.length>0?(a(),r("div",rs,[(a(!0),r(k,null,f(e.subGroups,l=>(a(),r("div",{key:l.name,class:"codex__sidebar-subgroup"},[o("div",{class:A(["codex__sidebar-subgroup-title",{"codex__sidebar-subgroup-title--active":d.value===l.name}]),onClick:n=>ue(l.name)},[(a(),w(R(x.value[l.name]?i(oe):i(D)),{size:14,class:"codex__sidebar-icon-sm"})),l.icon?(a(),w(R(l.icon),{key:0,size:12,class:"codex__sidebar-icon-sm",style:{"margin-left":"0.125rem"}})):g("",!0),o("span",{class:"truncate-text",title:W(l.name)},c(W(l.name)),9,us)],10,cs),h(ee,{name:"expand"},{default:Z(()=>[x.value[l.name]?(a(),r("div",ds,[(a(!0),r(k,null,f(l.types,n=>(a(),r("div",{key:n,class:A(["codex__sidebar-item codex__sidebar-item--inner-sub",{"codex__sidebar-item--active":d.value===n}]),onClick:ge(v=>$(n),["stop"])},[t[13]||(t[13]=o("div",{class:"indent-connector"},null,-1)),o("span",{class:"truncate-text",title:S(n)},c(S(n)),9,_s)],10,ms))),128))])):g("",!0)]),_:2},1024)]))),128))])):g("",!0)])):g("",!0)]),_:2},1024)]))),128))])]),o("main",ps,[o("div",hs,[o("div",vs,[o("h1",null,c(ve(d.value)),1),o("span",bs,c(i(u)("codex.itemsFound",{count:z.value.length})),1)]),o("div",ks,[h(We,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=e=>y.value=e),placeholder:i(u)("common.search")||"Pesquisar...","show-icon":!0},null,8,["modelValue","placeholder"])])]),o("div",fs,[j.value.length>0?(a(),r("table",ys,[o("thead",null,[o("tr",null,[o("th",gs,c(i(u)("item.name")),1),o("th",xs,c(i(u)("item.type")),1),o("th",Cs,c(i(u)("item.rarity")),1),o("th",Ss,c(i(u)("item.level")),1),o("th",ws,c(i(u)("common.weight")),1)])]),o("tbody",null,[(a(!0),r(k,null,f(j.value,e=>(a(),r("tr",{key:e.id,class:"codex__table-row",onClick:l=>pe(e.id),onMouseenter:l=>O(l,e),onMouseleave:U,onMousemove:l=>O(l,e)},[o("td",Bs,[o("div",Ms,[o("div",Ts,[e.icon1?(a(),r("img",{key:0,src:i(m).getIconUrl(e.icon1),class:"item-icon"},null,8,As)):(a(),w(i(H),{key:1,size:32,class:"item-icon-fallback"}))]),o("div",Rs,[o("span",{class:"item-title",style:se({color:X(e)})},c(he(e)),5),o("span",Es,"ID: "+c(e.id),1)])])]),o("td",Hs,c(e.tip_loc_English||"-"),1),o("td",Ds,[o("span",{class:"rarity-badge",style:se({color:X(e)})},c(be(e)),5)]),o("td",Ls,c(e.level>0?e.level:"-"),1),o("td",Ps,c(e.weight!==void 0&&e.weight!==null?i(Ge)(e.weight):"-"),1)],40,Gs))),128))])])):(a(),r("div",zs,[o("div",$s,[h(i(Be),{size:48,class:"codex__no-results-icon"}),o("h3",Fs,c(i(u)("common.noResults")||"No results found"),1),y.value?(a(),r("p",Ws,[E(c(i(u)("codex.noResultsFor")||"No items match")+' "',1),o("strong",null,c(y.value),1),t[14]||(t[14]=E('" ',-1))])):g("",!0),o("button",{class:"codex__clear-search",onClick:t[2]||(t[2]=e=>{y.value="",d.value="all"})},c(i(u)("codex.clearFilters")||"Clear filters"),1)])]))]),C.value>1?(a(),r("div",Is,[o("button",{class:"codex__page-btn",disabled:p.value===1,onClick:t[3]||(t[3]=e=>T(1))},[h(i(Ie),{size:16})],8,Vs),o("button",{class:"codex__page-btn",disabled:p.value===1,onClick:t[4]||(t[4]=e=>T(p.value-1))},[h(i(Ve),{size:16})],8,Ns),o("div",Os,[E(c(i(u)("common.page"))+" ",1),o("span",null,c(p.value),1),E(" "+c(i(u)("common.of"))+" ",1),o("span",null,c(C.value),1)]),o("button",{class:"codex__page-btn",disabled:p.value===C.value,onClick:t[5]||(t[5]=e=>T(p.value+1))},[h(i(D),{size:16})],8,Us),o("button",{class:"codex__page-btn",disabled:p.value===C.value,onClick:t[6]||(t[6]=e=>T(C.value))},[h(i(Ne),{size:16})],8,qs)])):g("",!0)])]))],32))}}),so=Te(Qs,[["__scopeId","data-v-43435c33"]]);export{so as default};
