import{k as Ae,r as F,c as f,d as Ue,w as _e,n as $e,S as Ke,l as m,y as ge,m as n,t as y,p as N,u as o,x as re,G as U,F as te,q as ae,j as D,C as me,A as c,X as He}from"./vue-vendor-C0EkfGRl.js";import{c as K,a as We,u as Xe,P as Ne,S as Ye,f as Qe,b as Oe,n as we,_ as Ze}from"./index-D-GlBJU-.js";const ke=K("coins",[["path",{d:"M13.744 17.736a6 6 0 1 1-7.48-7.48",key:"bq4yh3"}],["path",{d:"M15 6h1v4",key:"11y1tn"}],["path",{d:"m6.134 14.768.866-.5 2 3.464",key:"17snzx"}],["circle",{cx:"16",cy:"8",r:"6",key:"14bfc9"}]]);const et=K("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const tt=K("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const at=K("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const ye=K("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const st=K("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const lt=K("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const it=K("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function rt(e,a){const J=new Map;for(const i of Object.values(e)){if(!i?.talisman)continue;const{id:u,rarity:S}=i.talisman,O=`${u}__${S}`,g=J.get(O);g?g.count++:J.set(O,{id:u,rarity:S,count:1})}const _=[];for(const{id:i,rarity:u,count:S}of J.values()){const O=a[u];if(!O)continue;const g=O.find(k=>k.talisman===i);if(!g)continue;const B=[],E={};for(const k of[2,3,4]){const p=`bonus_${k}`,R=g[p];if(!R)continue;const P=S>=k;if(B.push({required:k,bonuses:R,active:P}),P)for(const[G,L]of Object.entries(R))E[G]||(E[G]=0),E[G]+=L}B.length>0&&_.push({setName:g.set_name,talismanName:i,rarity:u,count:S,activeBonuses:E,thresholds:B})}return _}function xe(e){return{powerStones:Array(e).fill(null),talisman:null}}const nt=["id","level","tier","grade","default_grade","upgradeLevel","weight","armor_weight","speed","atk_speed","casting_speed","purchase_price","sale_price","repair_price","satis_kapali","gender","req_level"];function Je(e,a){if(!e||a<0)return{...e};const J=1+a/200,_={...e};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const u=e[i];if(typeof u=="number"&&!nt.includes(i)&&!i.endsWith("_id")&&i!=="id"&&u!==0){const S=u*J;_[i]=Math.round(S*10)/10}}return _.grade=a,_}const Y=e=>{if(e)return{...e,upgradeLevel:e.upgradeLevel!==void 0?Math.min(15,Math.max(0,e.upgradeLevel)):0}},ot=Ae("planner",()=>{const e=F([]),a=F(null),J=F(null),_=F(null),i=F(!1),u=F(null),S=F({}),O=F({}),g=F({}),B=F({}),E=F({}),k=F({}),p=F({}),R=F(!1),P=async()=>{if(!i.value)try{const s=await fetch("/CodexFall/datas/plannerData.json");if(!s.ok)throw new Error("Failed to load planner data");u.value=await s.json(),u.value.equipmentSlots.forEach(v=>{v.id in S.value||(S.value[v.id]=null)}),u.value.attributes.forEach(v=>{v.id in B.value||(B.value[v.id]=0)}),u.value.clanPassives&&u.value.clanPassives.forEach(v=>{v.id in p.value||(p.value[v.id]=0)}),i.value=!0}catch(t){console.error("Failed to load planner data",t)}},G=f(()=>Object.values(B.value).reduce((t,s)=>t+s,0)),L=f(()=>u.value?.config||null),se=f(()=>L.value?.maxAttributePoints||600),A=f(()=>L.value?.maxAttributePerAttr||100),Q=f(()=>L.value?.maxUpgradeLevel||15),ne=f(()=>L.value?.maxSkillLevel||25),H=f(()=>L.value?.maxGrade||320),Z=f(()=>L.value?.socketConfig||{maxPowerStones:3,maxTalismans:1}),pe=f(()=>L.value?.rarityThresholds||{uncommon:1,rare:10,epic:19}),ee=f(()=>L.value?.gearscoreExcludedSlots||["card1","card2"]),oe=f(()=>L.value?.gradeSliderTicks||[0,80,160,240,320]),le=f(()=>L.value?.upgradeBonuses||{0:0,1:0,2:14,3:24,4:42,5:76,6:106,7:142,8:184,9:232,10:286,11:346,12:412,13:484,14:562,15:646}),W=f(()=>u.value?.powerStoneStats||{}),ce=f(()=>u.value?.rarityColors||{1:{hex:"#e6edf3",rgba:"rgba(230, 237, 243, 1)"},2:{hex:"#56B65C",rgba:"rgba(86, 182, 92, 1)"},3:{hex:"#4F8EFF",rgba:"rgba(79, 142, 255, 1)"},4:{hex:"#C572FF",rgba:"rgba(197, 114, 255, 1)"},5:{hex:"#FFB347",rgba:"rgba(255, 179, 71, 1)"},6:{hex:"#FFD700",rgba:"rgba(255, 215, 0, 1)"}}),l=f(()=>u.value?.modifiableStats||["physical_ap","physical_dp","magic_ap","magic_dp","hp","mp","accuracy","evasion"]),d=f(()=>u.value?.cardStats||{}),r=f(()=>u.value?.clanPassives||[]),w=t=>(u.value?.equipmentSlots||[]).find(b=>b.id===t)?.socketsEnabled??!1,M=f(()=>!u.value?.classes||!J.value?null:u.value.classes.find(t=>t.id===J.value)||null),C=f(()=>{const t=M.value;return!t||!t.subclasses||!_.value?null:t.subclasses.find(s=>s.id===_.value)||null}),T=f(()=>u.value?.setBonuses?rt(g.value,u.value.setBonuses):[]),ue=f(()=>{const t={},s={},v=(h,x)=>{t[h]||(t[h]=0),t[h]+=x},b=(h,x)=>{s[h]||(s[h]=0),s[h]+=x};u.value?.attributes&&u.value.attributes.forEach(h=>{const x=B.value[h.id]||0;x>0&&h.bonuses.forEach(q=>{v(q.stat,x*q.multiplier)})}),Object.keys(S.value).forEach(h=>{const x=h,q=S.value[x];if(!q)return;const X=O.value[x],fe=X?.stats||{},ve=X?.upgradeLevel||0,Te=X?.grade??q.grade??q.default_grade??0,Ve=Je(q,Te),be=1+(le.value[ve.toString()]||0)/100;if((u.value?.statKeys||[]).forEach(V=>{let z;const $=fe[V.key],Ge=Number(q[V.key])||0;$!==void 0&&Number($)!==Ge?z=Number($):z=Number(Ve[V.key]),!isNaN(z)&&z>0&&v(V.key,z*be)}),q.id&&d.value[q.id]){const V=d.value[q.id];for(const[z,$]of Object.entries(V))z==="hp"||z==="mp"?b(z,Number($)):v(z,Number($))}const he=g.value[x];he&&he.powerStones&&he.powerStones.forEach(V=>{if(V&&W.value[V])for(const[z,$]of Object.entries(W.value[V]))v(z,Number($)*be)})});for(const h of T.value)for(const[x,q]of Object.entries(h.activeBonuses))v(x,q);for(const[h,x]of Object.entries(s))t[h]&&(t[h]=t[h]*(1+x/100));const I={};r.value.forEach(h=>{const x=p.value[h.id]||0;if(x>0&&h.effects){const q=x-1;for(const[X,fe]of Object.entries(h.effects)){const ve=fe[q];ve&&(I[X]||(I[X]=0),I[X]+=ve)}}});for(const[h,x]of Object.entries(I))t[h]&&(t[h]=t[h]*(1+x/100));for(const[h,x]of Object.entries(t))t[h]=Math.round(x*100)/100;return t});(()=>{const t=localStorage.getItem("quinfall_saved_builds");if(t)try{const s=JSON.parse(t);s.forEach(v=>{v.equipmentOverrides&&Object.keys(v.equipmentOverrides).forEach(b=>{v.equipmentOverrides[b]=Y(v.equipmentOverrides[b])})}),e.value=s}catch{console.error("Failed to parse builds from localStorage")}})();const de=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(e.value))},j=()=>{if(!a.value)return;const t=e.value.findIndex(s=>s.id===a.value);if(t!==-1){e.value[t].charClass=J.value,e.value[t].subclass=_.value,e.value[t].equipment=JSON.parse(JSON.stringify(S.value));const s=JSON.parse(JSON.stringify(O.value)),v={};Object.keys(s).forEach(b=>{v[b]=Y(s[b])}),e.value[t].equipmentOverrides=v,e.value[t].equipmentSockets=JSON.parse(JSON.stringify(g.value)),e.value[t].attributes=JSON.parse(JSON.stringify(B.value)),e.value[t].skillLevels=JSON.parse(JSON.stringify(E.value)),e.value[t].skillStones=JSON.parse(JSON.stringify(k.value)),e.value[t].clanPassivesLevels=JSON.parse(JSON.stringify(p.value)),de()}},Be=t=>{J.value=t,_.value=null,E.value={},k.value={},S.value.weapon=null,S.value.offhand=null,O.value.weapon=void 0,O.value.offhand=void 0,j()},Le=t=>{_.value=t,j()},Fe=(t,s)=>{s<1&&(s=1),E.value[t]=s,j()},Ee=(t,s)=>{k.value[t]=s,j()},Me=(t,s)=>{p.value[t]=s,j()},qe=(t,s)=>{s=Math.max(0,Math.min(A.value,isNaN(s)?0:s)),B.value[t]=s,j()},Pe=(t,s)=>{S.value[t]=s,O.value[t]=void 0,g.value[t]=void 0,j()},je=t=>{S.value[t]=null,O.value[t]=void 0,g.value[t]=void 0,j()},Ie=(t,s)=>{O.value[t]=Y(s),j()},Ce=(t,s,v)=>{g.value[t]||(g.value[t]=xe(Z.value.maxPowerStones));const b=g.value[t];s>=0&&s<b.powerStones.length&&(b.powerStones[s]=v),j()},ze=(t,s)=>{const v=g.value[t];v&&s>=0&&s<v.powerStones.length&&(v.powerStones[s]=null),j()},De=(t,s)=>{g.value[t]||(g.value[t]=xe(Z.value.maxPowerStones)),g.value[t].talisman=s,j()},Re=t=>{const s=g.value[t];s&&(s.talisman=null),j()},ie=()=>{J.value=null,_.value=null,Object.keys(S.value).forEach(t=>{S.value[t]=null}),O.value={},g.value={},Object.keys(B.value).forEach(t=>{B.value[t]=0}),E.value={},k.value={},Object.keys(p.value).forEach(t=>{p.value[t]=0}),a.value=null};return{savedBuilds:e,currentBuildId:a,selectedClass:J,equipment:S,equipmentOverrides:O,equipmentSockets:g,attributes:B,totalAttributePoints:G,currentClassData:M,currentSubclassData:C,stats:ue,activeSetBonuses:T,setClass:Be,setSubclass:Le,setSkillLevel:Fe,setSkillStone:Ee,setClanPassiveLevel:Me,setAttribute:qe,equipItem:Pe,unequipItem:je,setItemOverride:Ie,setPowerStone:Ce,removePowerStone:ze,setTalisman:De,removeTalisman:Re,isSocketsEnabled:w,resetPlanner:ie,saveCurrentBuild:t=>{const s=JSON.parse(JSON.stringify(O.value)),v={};Object.keys(s).forEach(I=>{v[I]=Y(s[I])});const b={id:a.value||Date.now().toString(),name:t,charClass:J.value,subclass:_.value,equipment:JSON.parse(JSON.stringify(S.value)),equipmentOverrides:v,equipmentSockets:JSON.parse(JSON.stringify(g.value)),attributes:JSON.parse(JSON.stringify(B.value)),skillLevels:JSON.parse(JSON.stringify(E.value)),skillStones:JSON.parse(JSON.stringify(k.value)),clanPassivesLevels:JSON.parse(JSON.stringify(p.value))};if(a.value){const I=e.value.findIndex(h=>h.id===a.value);I!==-1?(b.name=t,e.value[I]=b):e.value.push(b)}else a.value=b.id,e.value.push(b);de()},loadBuild:t=>{const s=e.value.find(b=>b.id===t);if(!s)return;a.value=s.id,J.value=s.charClass,_.value=s.subclass||null,S.value=JSON.parse(JSON.stringify(s.equipment||{}));const v=JSON.parse(JSON.stringify(s.equipmentOverrides||{}));O.value={},Object.keys(v).forEach(b=>{O.value[b]=Y(v[b])}),g.value=JSON.parse(JSON.stringify(s.equipmentSockets||{})),B.value=JSON.parse(JSON.stringify(s.attributes||{})),E.value=JSON.parse(JSON.stringify(s.skillLevels||{})),k.value=JSON.parse(JSON.stringify(s.skillStones||{})),p.value=JSON.parse(JSON.stringify(s.clanPassivesLevels||{}))},deleteBuild:t=>{e.value=e.value.filter(s=>s.id!==t),a.value===t&&ie(),de()},newBuild:(t,s=!1)=>{!s&&a.value!==null&&ie();const v=Date.now().toString();a.value=v;const b=JSON.parse(JSON.stringify(O.value)),I={};Object.keys(b).forEach(h=>{I[h]=Y(b[h])}),e.value.push({id:v,name:t,charClass:J.value,subclass:_.value,equipment:JSON.parse(JSON.stringify(S.value)),equipmentOverrides:I,equipmentSockets:JSON.parse(JSON.stringify(g.value)),attributes:JSON.parse(JSON.stringify(B.value)),skillLevels:JSON.parse(JSON.stringify(E.value)),skillStones:JSON.parse(JSON.stringify(k.value)),clanPassivesLevels:JSON.parse(JSON.stringify(p.value))}),de()},loadSharedBuild:t=>{ie(),J.value=t.charClass||null,_.value=t.subclass||null,S.value=JSON.parse(JSON.stringify(t.equipment||{}));const s=JSON.parse(JSON.stringify(t.equipmentOverrides||{}));O.value={},Object.keys(s).forEach(v=>{O.value[v]=Y(s[v])}),g.value=JSON.parse(JSON.stringify(t.equipmentSockets||{})),B.value=JSON.parse(JSON.stringify(t.attributes||{})),E.value=JSON.parse(JSON.stringify(t.skillLevels||{})),k.value=JSON.parse(JSON.stringify(t.skillStones||{})),p.value=JSON.parse(JSON.stringify(t.clanPassivesLevels||{})),R.value=!0,a.value=null},clearSharedBuild:()=>{R.value=!1,ie()},isSharedBuildPreview:R,isLoaded:i,plannerData:u,loadPlannerData:P,selectedSubclass:_,skillLevels:E,skillStones:k,clanPassivesLevels:p,clanPassivesDef:r,config:L,socketConfig:Z,maxAttributePoints:se,maxAttributePerAttr:A,maxUpgradeLevel:Q,maxSkillLevel:ne,maxGrade:H,powerStoneStatsMap:W,cardStatsMap:d,rarityThresholds:pe,gearscoreExcludedSlots:ee,gradeSliderTicks:oe,rarityColors:ce,modifiableStats:l,upgradeBonuses:le}}),ct={class:"tooltip-header"},ut={class:"header-top"},dt={class:"rarity-tier"},vt={class:"rarity-label"},mt={key:0,class:"tier-label"},yt={key:1,class:"level-label"},pt={class:"item-type"},ft={class:"header-main"},ht={class:"item-name"},gt={class:"header-icon"},kt=["src"],St={class:"tooltip-body"},bt={key:0,class:"primary-stats"},_t={key:0,class:"primary-stat-block"},Nt={class:"primary-label"},Ot={class:"primary-value"},wt={key:0,class:"bonus-value"},xt={key:1,class:"primary-stat-block"},Jt={class:"primary-label"},Bt={class:"primary-value"},Lt={key:0,class:"bonus-value"},Ft={key:2,class:"grade-block"},Et={class:"grade-value"},Mt={class:"grade-label"},qt={class:"stars-container"},Pt={key:1,class:"primary-stats"},jt={class:"primary-stat-block"},It={class:"primary-label"},Ct={class:"primary-value"},zt={key:0,class:"bonus-value"},Dt={key:0,class:"grade-block"},Rt={class:"grade-value"},Tt={class:"grade-label"},Vt={class:"stars-container"},Gt={key:2,class:"grade-only"},At={class:"grade-block"},Ut={class:"grade-value"},$t={class:"grade-label"},Kt={class:"stars-container"},Ht={key:3,class:"item-description"},Wt={key:4,class:"traits-section"},Xt={class:"trait-label"},Yt={class:"trait-value-container"},Qt={class:"trait-value"},Zt={key:0,class:"bonus-text"},ea={key:5,class:"socket-section"},ta={class:"socket-section__title"},aa={key:0,class:"socket-stone-stats"},sa={key:0,class:"bonus-value",style:{"font-size":"0.75rem","margin-left":"2px"}},la={key:0,class:"socket-talisman-row"},ia={class:"socket-talisman-count"},ra={class:"pieces-label"},na={key:6,class:"tooltip-footer"},oa={key:0,class:"footer-prices"},ca=["title"],ua={class:"footer-label"},da={class:"footer-value"},va={class:"footer-value-text"},ma=["title"],ya={class:"footer-label"},pa={class:"footer-value"},fa={class:"footer-value-text"},ha=["title"],ga={class:"footer-label"},ka={class:"footer-value"},Sa={class:"footer-value-text"},ba={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},_a={class:"footer-icons-row"},Na=["title"],Oa=["title"],wa=["title"],xa={class:"icon-badge is-disabled",title:"No Data for Indestructible/Trash"},Ja={key:0,style:{"font-size":"0.8125rem",color:"#8b949e","text-align":"right"}},Ba={style:{color:"#e6edf3","font-weight":"600"}},La=Ue({__name:"ItemTooltip",props:{item:{},visible:{type:Boolean},x:{},y:{},overrideGrade:{},overrideRarity:{},overrideLevel:{},overrideUpgradeLevel:{},overrideStats:{},slotId:{}},setup(e){const a=e,J=We(),_=ot(),{t:i,locale:u}=Xe(),S=l=>l?u.value==="pt-BR"?l.baslik_loc_Portuguese||l.baslik_loc_English||l.id:u.value==="en"?l.baslik_loc_English||l.id:u.value==="es"?l.baslik_loc_Spanish||l.baslik_loc_English||l.id:l[`baslik_loc_${u.value}`]||l.baslik_loc_English||l.id:"",O=l=>l?u.value==="pt-BR"?l.aciklama_loc_Portuguese||l.aciklama_loc_English||"":u.value==="en"?l.aciklama_loc_English||"":u.value==="es"?l.aciklama_loc_Spanish||l.aciklama_loc_English||"":l[`aciklama_loc_${u.value}`]||l.aciklama_loc_English||"":"",g=l=>{let d;return a.overrideGrade!==void 0?d=Oe(a.overrideGrade):a.overrideRarity!==void 0?d=a.overrideRarity:d=we(l),{1:"#e6edf3",2:"#3fb950",3:"#58a6ff",4:"#bc8cff",5:"#d29922"}[d]||"#e6edf3"},B=l=>{let d;a.overrideGrade!==void 0?d=Oe(a.overrideGrade):a.overrideRarity!==void 0?d=a.overrideRarity:d=we(l);const w={1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[d]||"common";return i(`rarity.${w}`)},E=f(()=>a.overrideUpgradeLevel!==void 0?a.overrideUpgradeLevel:a.item?.upgradeLevel||0),k=f(()=>{const l=E.value;return(_.upgradeBonuses?.[l.toString()]||0)/100}),p=f(()=>Je(a.item,P.value)),R=f(()=>{if(!a.item)return[];if(L.value&&_.cardStatsMap[a.item.id]){const r=[],w=_.cardStatsMap[a.item.id];for(const[M,C]of Object.entries(w))r.push({key:M,label:i("stats."+M),value:`+${C}%`,bonus:0});return r}const l=[{key:"accuracy",label:i("stats.accuracy")},{key:"atk_speed",label:i("stats.atk_speed")},{key:"evasion",label:i("stats.evasion")},{key:"hp",label:i("stats.hp")},{key:"hp_regen",label:i("stats.hp_regen")},{key:"magic_ap",label:i("stats.magic_ap")},{key:"magic_dp",label:i("stats.magic_dp")},{key:"mp",label:i("stats.mp")},{key:"mp_regen",label:i("stats.mp_regen")},{key:"physical_ap",label:i("stats.physical_ap")},{key:"physical_dp",label:i("stats.physical_dp")},{key:"speed",label:i("stats.speed")},{key:"casting_speed",label:i("stats.casting_speed")},{key:"extra_damage_mob",label:i("stats.extra_damage_mob")},{key:"extra_damage_boss",label:i("stats.extra_damage_boss")}],d=p.value;return l.filter(r=>{if(se.value&&r.key==="hp"&&A.value.key==="hp")return!1;const w=a.item[r.key]!==void 0?Number(a.item[r.key]):0;return a.overrideStats&&a.overrideStats[r.key]!==void 0&&Number(a.overrideStats[r.key])!==w?!0:d[r.key]!==void 0&&d[r.key]!==null&&Number(d[r.key])!==0}).map(r=>{const w=a.item[r.key]!==void 0?Number(a.item[r.key]):0,M=a.overrideStats&&a.overrideStats[r.key]!==void 0&&Number(a.overrideStats[r.key])!==w,C=Number(M?a.overrideStats[r.key]:d[r.key]),T=k.value>0?Number((C*k.value).toFixed(2)):0;return{key:r.key,label:r.label,value:Number(C.toFixed(2)),bonus:T}})}),P=f(()=>a.overrideGrade!==void 0?a.overrideGrade:a.item?.grade||0),G=f(()=>{const l=P.value;return l<160?1:l>=160&&l<200?2:l>=200&&l<240?3:l>=240&&l<288?4:5}),L=f(()=>a.slotId==="card1"||a.slotId==="card2"||a.item?.tip_loc_English==="Power Card"),se=f(()=>a.slotId==="earring1"||a.slotId==="earring2"),A=f(()=>{const l=p.value,d=Number(a.item?.hp||0),r=Number(a.item?.mp||0),w=a.overrideStats?.hp!==void 0&&Number(a.overrideStats.hp)!==d,M=a.overrideStats?.mp!==void 0&&Number(a.overrideStats.mp)!==r,C=Number((w?a.overrideStats.hp:l?.hp)||0),T=Number((M?a.overrideStats.mp:l?.mp)||0);return C>=T?{key:"hp",label:i("stats.hp"),value:Number(C.toFixed(2)),bonus:k.value>0?Number((C*k.value).toFixed(2)):0}:{key:"mp",label:i("stats.mp"),value:Number(T.toFixed(2)),bonus:k.value>0?Number((T*k.value).toFixed(2)):0}}),Q=f(()=>a.slotId&&_.equipmentSockets[a.slotId]||null),ne=f(()=>Q.value?Q.value.powerStones.filter(l=>l!==null).map(l=>{const d=J.getItemById(l),r=_.powerStoneStatsMap[l]||{},w={};for(const[C,T]of Object.entries(r)){const ue=Number(T),Se=k.value>0?Number((ue*k.value).toFixed(2)):0;w[C]={value:ue,bonus:Se}}const M=d?S(d):l;return{id:l,name:M,stats:w}}):[]),H=f(()=>{if(!Q.value?.talisman)return null;const l=Q.value.talisman;let d=0;for(const r of Object.values(_.equipmentSockets))r?.talisman?.id===l.id&&r?.talisman?.rarity===l.rarity&&d++;return{...l,count:d}}),Z=f(()=>{const l=H.value?.rarity;if(!l)return"#8b949e";switch(l){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#8b949e"}}),pe=l=>{const d=S(l),r=E.value;return r>0?`+${r} ${d}`:d},ee=F(null),oe=F(0),le=F(0),W=F(!1),ce=async()=>{if(!ee.value||!a.visible||(await He(),!ee.value||!a.visible))return;const l=ee.value.getBoundingClientRect(),d=15;let r=a.x+d,w=a.y-l.height-d;r+l.width>window.innerWidth&&(r=a.x-l.width-d),w<0&&(w=10),oe.value=r,le.value=w,W.value=!0};return _e(()=>a.visible,l=>{l?ce():W.value=!1}),_e([()=>a.x,()=>a.y],()=>{a.visible&&ce()}),(l,d)=>$e((c(),m("div",{ref_key:"tooltipRef",ref:ee,class:"item-tooltip",style:ge({left:`${oe.value}px`,top:`${le.value}px`,opacity:W.value?1:0,transition:"opacity 0.05s ease","--rarity-color":g(e.item)})},[n("div",ct,[n("div",ut,[n("div",dt,[n("span",vt,y(B(e.item)),1),e.item?.tier?(c(),m("span",mt,"T"+y(e.item.tier),1)):N("",!0),e.overrideLevel||e.item?.level?(c(),m("span",yt,"Lv. "+y(e.overrideLevel||e.item?.level),1)):N("",!0)]),n("div",pt,y(e.item?.tip_loc_English||o(i)("item.item")),1)]),n("div",ft,[n("h3",ht,y(pe(e.item)),1)]),n("div",gt,[e.item?.icon1?(c(),m("img",{key:0,src:o(J).getIconUrl(e.item.icon1)},null,8,kt)):(c(),re(o(Ne),{key:1,size:40,class:"icon-fallback"}))])]),n("div",St,[p.value.physical_dp||p.value.physical_ap||p.value.magic_ap||p.value.magic_dp?(c(),m("div",bt,[p.value.physical_dp||p.value.magic_dp?(c(),m("div",_t,[n("span",Nt,y(p.value.physical_dp?o(i)("stats.physical_dp"):o(i)("stats.magic_dp")),1),n("span",Ot,[U(y(Number(((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:p.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:p.value.magic_dp)).toFixed(2)))+" ",1),k.value>0?(c(),m("span",wt," (+"+y(Number((((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:p.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:p.value.magic_dp))*k.value).toFixed(2)))+") ",1)):N("",!0)])])):p.value.physical_ap||p.value.magic_ap?(c(),m("div",xt,[n("span",Jt,y(p.value.physical_ap?o(i)("stats.physical_ap"):o(i)("stats.magic_ap")),1),n("span",Bt,[U(y(Number(((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:p.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:p.value.magic_ap)).toFixed(2)))+" ",1),k.value>0?(c(),m("span",Lt," (+"+y(Number((((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:p.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:p.value.magic_ap))*k.value).toFixed(2)))+") ",1)):N("",!0)])])):N("",!0),P.value>0&&!L.value?(c(),m("div",Ft,[n("span",Et,y(P.value),1),n("span",Mt,y(o(i)("item.simulateGrade")),1),n("div",qt,[(c(),m(te,null,ae(5,r=>D(o(ye),{key:r,size:12,class:me(["star-icon",{"star-active":r<=G.value}])},null,8,["class"])),64))])])):N("",!0)])):se.value&&A.value.value>0?(c(),m("div",Pt,[n("div",jt,[n("span",It,y(A.value.label),1),n("span",Ct,[U(y(A.value.value)+" ",1),A.value.bonus>0?(c(),m("span",zt," (+"+y(A.value.bonus)+") ",1)):N("",!0)])]),P.value>0?(c(),m("div",Dt,[n("span",Rt,y(P.value),1),n("span",Tt,y(o(i)("item.simulateGrade")),1),n("div",Vt,[(c(),m(te,null,ae(5,r=>D(o(ye),{key:r,size:12,class:me(["star-icon",{"star-active":r<=G.value}])},null,8,["class"])),64))])])):N("",!0)])):P.value>0&&!L.value&&!se.value?(c(),m("div",Gt,[n("div",At,[n("span",Ut,y(P.value),1),n("span",$t,y(o(i)("item.simulateGrade")),1),n("div",Kt,[(c(),m(te,null,ae(5,r=>D(o(ye),{key:r,size:12,class:me(["star-icon",{"star-active":r<=G.value}])},null,8,["class"])),64))])])])):N("",!0),O(e.item)&&!L.value?(c(),m("p",Ht,y(O(e.item)),1)):N("",!0),R.value.length>0?(c(),m("div",Wt,[(c(!0),m(te,null,ae(R.value,r=>(c(),m("div",{class:"trait-row",key:r.key},[n("span",Xt,"â€¢ "+y(r.label)+":",1),n("span",Yt,[n("span",Qt,y(r.value),1),r.bonus>0?(c(),m("span",Zt," (+"+y(r.bonus)+")",1)):N("",!0)])]))),128))])):N("",!0),ne.value.length>0||H.value?(c(),m("div",ea,[n("div",ta,[D(o(et),{size:11}),n("span",null,y(o(i)("planner.sockets.title")),1)]),(c(!0),m(te,null,ae(ne.value,r=>(c(),m("div",{key:r.id,class:"socket-stone-row"},[D(o(ye),{size:10,class:"socket-power-icon"}),Object.keys(r.stats).length>0?(c(),m("span",aa,[(c(!0),m(te,null,ae(r.stats,(w,M)=>(c(),m("span",{key:M},[U(y(o(i)("stats."+M))+": "+y(w.value)+" ",1),w.bonus>0?(c(),m("span",sa,"(+"+y(w.bonus)+")",1)):N("",!0)]))),128))])):N("",!0)]))),128)),H.value?(c(),m("div",la,[D(o(at),{size:10,style:ge({color:Z.value})},null,8,["style"]),n("span",{class:"socket-talisman-name",style:ge({color:Z.value})},y(H.value.id),5),n("span",ia,[U(y(H.value.count)+"/4 ",1),n("span",ra,y(o(i)("planner.sockets.pieces")),1)])])):N("",!0)])):N("",!0),e.item?.sale_price||e.item?.price||e.item?.repair_price||e.item?.id||e.item?.satis_kapali!==void 0||e.item?.weight||e.item?.gender!==void 0?(c(),m("div",na,[e.item?.sale_price||e.item?.price||e.item?.repair_price?(c(),m("div",oa,[e.item?.price?(c(),m("div",{key:0,class:"footer-stat",title:o(i)("stats.purchase_price")},[n("span",ua,y(o(i)("stats.purchase_price"))+":",1),n("span",da,[D(o(ke),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),d[0]||(d[0]=U()),n("span",va,y(new Intl.NumberFormat(o(u)==="pt-BR"?"pt-BR":"en-US").format(e.item.price)),1)])],8,ca)):N("",!0),e.item?.sale_price?(c(),m("div",{key:1,class:"footer-stat",title:o(i)("stats.sale_price")},[n("span",ya,y(o(i)("stats.sale_price"))+":",1),n("span",pa,[D(o(ke),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),d[1]||(d[1]=U()),n("span",fa,y(new Intl.NumberFormat(o(u)==="pt-BR"?"pt-BR":"en-US").format(e.item.sale_price)),1)])],8,ma)):N("",!0),e.item?.repair_price?(c(),m("div",{key:2,class:"footer-stat",title:o(i)("stats.repair_price")},[n("span",ga,y(o(i)("stats.repair_price"))+":",1),n("span",ka,[D(o(ke),{size:12,class:"inline-icon blue",style:{"margin-right":"4px"}}),d[2]||(d[2]=U()),n("span",Sa,y(new Intl.NumberFormat(o(u)==="pt-BR"?"pt-BR":"en-US").format(e.item.repair_price)),1)])],8,ha)):N("",!0)])):N("",!0),n("div",ba,[n("div",_a,[e.item?.id?(c(),m("div",{key:0,class:"icon-badge",title:o(i)("common.itemID")+": "+e.item.id},[D(o(Ye),{size:14})],8,Na)):N("",!0),e.item?.satis_kapali!==void 0&&e.item?.satis_kapali!==null?(c(),m("div",{key:1,class:me(["icon-badge",{"is-disabled":e.item.satis_kapali!==0}]),title:e.item.satis_kapali===0?o(i)("stats.salis_closed")+": "+o(i)("common.yes"):o(i)("stats.salis_closed")+": "+o(i)("common.no")},[e.item.satis_kapali===0?(c(),re(o(Ne),{key:0,size:14,style:{color:"#3fb950"}})):(c(),re(o(tt),{key:1,size:14,style:{color:"#f85149"}}))],10,Oa)):N("",!0),e.item?.gender!==void 0&&e.item?.gender!==null?(c(),m("div",{key:2,class:"icon-badge",title:o(i)("stats.gender")+": "+(e.item.gender===0?"Both":e.item.gender===1?"Male":"Female")},[e.item.gender===0?(c(),re(o(it),{key:0,size:14,style:{color:"#8b949e"}})):(c(),re(o(lt),{key:1,size:14,style:{color:"#8b949e"}}))],8,wa)):N("",!0),n("div",xa,[D(o(st),{size:14})])]),e.item?.weight!==void 0&&e.item?.weight!==null?(c(),m("div",Ja,[U(y(o(i)("common.weight"))+": ",1),n("span",Ba,y(o(Qe)(e.item.weight)),1)])):N("",!0)])])):N("",!0)])],4)),[[Ke,e.visible]])}}),Ra=Ze(La,[["__scopeId","data-v-8a2e3094"]]);export{ke as C,et as G,Ra as I,tt as L,at as S,st as T,it as U,lt as a,ye as b,Je as c,ot as u};
