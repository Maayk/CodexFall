import{k as Fe,r as $,c as I,d as Q,l as o,y as be,C as F,I as Te,j as C,u as s,p as q,m as e,t as r,x as Y,Q as Le,A as l,o as fe,b as ke,D as _e,B as G,G as ve,F as R,q as j,O as ie,w as De,n as oe,v as he,S as Re,U as Ve,V as Ae}from"./vue-vendor-RD7xoaMH.js";import{c as re,a as ce,u as ae,b as Ie,n as Ce,_ as W,X as we,S as Me,P as Ue,C as Ee,d as je}from"./index-Bi0ybQkz.js";import{A as Oe}from"./AppButton-CD188NuN.js";import{T as qe,I as xe}from"./ItemTooltip-gjwIY7Hh.js";import{A as He,S as Be,G as ze,C as Ge}from"./AppInput-B__e0iqx.js";import{I as Ke}from"./ItemRow-p9b4EfKt.js";import{u as Xe}from"./i18n-Bs37T9x3.js";const Ye=re("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Qe=re("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Je=re("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Ne=re("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const We=re("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ze=re("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const es=re("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),de=a=>{if(a)return{...a,upgradeLevel:a.upgradeLevel!==void 0?Math.min(15,Math.max(0,a.upgradeLevel)):0}},ee=Fe("planner",()=>{const a=$([]),u=$(null),t=$(null),p=$(null),d=$(!1),_=$(null),v=$({}),g=$({}),k=$({}),b=$({}),c=$({}),O=async()=>{if(!d.value)try{const S=await fetch("/CodexFall/datas/plannerData.json");if(!S.ok)throw new Error("Failed to load planner data");_.value=await S.json(),_.value.equipmentSlots.forEach(D=>{D.id in v.value||(v.value[D.id]=null)}),_.value.attributes.forEach(D=>{D.id in k.value||(k.value[D.id]=0)}),d.value=!0}catch(m){console.error("Failed to load planner data",m)}},w=I(()=>Object.values(k.value).reduce((m,S)=>m+S,0)),E=I(()=>_.value?.config||null),M=I(()=>E.value?.maxAttributePoints||600),T=I(()=>E.value?.maxAttributePerAttr||100),x=I(()=>E.value?.maxUpgradeLevel||15),N=I(()=>E.value?.maxSkillLevel||25),n=I(()=>E.value?.maxGrade||320),h=I(()=>E.value?.rarityThresholds||{uncommon:1,rare:10,epic:19}),i=I(()=>E.value?.gearscoreExcludedSlots||["card1","card2"]),B=I(()=>E.value?.gradeSliderTicks||[0,80,160,240,320]),K=I(()=>_.value?.rarityColors||{1:{hex:"#e6edf3",rgba:"rgba(230, 237, 243, 1)"},2:{hex:"#56B65C",rgba:"rgba(86, 182, 92, 1)"},3:{hex:"#4F8EFF",rgba:"rgba(79, 142, 255, 1)"},4:{hex:"#C572FF",rgba:"rgba(197, 114, 255, 1)"},5:{hex:"#FFB347",rgba:"rgba(255, 179, 71, 1)"},6:{hex:"#FFD700",rgba:"rgba(255, 215, 0, 1)"}}),se=I(()=>_.value?.modifiableStats||["physical_ap","physical_dp","magic_ap","magic_dp","hp","mp","accuracy","evasion"]),Z=I(()=>!_.value?.classes||!t.value?null:_.value.classes.find(m=>m.id===t.value)||null),ne=I(()=>{const m=Z.value;return!m||!m.subclasses||!p.value?null:m.subclasses.find(S=>S.id===p.value)||null}),ue=I(()=>{const m={},S=(D,J)=>{m[D]||(m[D]=0),m[D]+=J};return _.value?.attributes&&_.value.attributes.forEach(D=>{const J=k.value[D.id]||0;J>0&&D.bonuses.forEach(A=>{S(A.stat,J*A.multiplier)})}),Object.keys(v.value).forEach(D=>{const J=D,A=v.value[J];if(!A)return;const ge=g.value[J]?.stats||{};(_.value?.statKeys||[]).forEach($e=>{let pe;ge[$e.key]!==void 0?pe=Number(ge[$e.key]):pe=Number(A[$e.key]),!isNaN(pe)&&pe>0&&S($e.label,pe)})}),m});(()=>{const m=localStorage.getItem("quinfall_saved_builds");if(m)try{const S=JSON.parse(m);S.forEach(D=>{D.equipmentOverrides&&Object.keys(D.equipmentOverrides).forEach(J=>{D.equipmentOverrides[J]=de(D.equipmentOverrides[J])})}),a.value=S}catch{console.error("Failed to parse builds from localStorage")}})();const te=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(a.value))},U=()=>{if(!u.value)return;const m=a.value.findIndex(S=>S.id===u.value);if(m!==-1){a.value[m].charClass=t.value,a.value[m].subclass=p.value,a.value[m].equipment=JSON.parse(JSON.stringify(v.value));const S=JSON.parse(JSON.stringify(g.value)),D={};Object.keys(S).forEach(J=>{D[J]=de(S[J])}),a.value[m].equipmentOverrides=D,a.value[m].attributes=JSON.parse(JSON.stringify(k.value)),a.value[m].skillLevels=JSON.parse(JSON.stringify(b.value)),a.value[m].skillStones=JSON.parse(JSON.stringify(c.value)),te()}},z=m=>{t.value=m,p.value=null,b.value={},c.value={},v.value.weapon=null,v.value.offhand=null,g.value.weapon=void 0,g.value.offhand=void 0,U()},f=m=>{p.value=m,U()},L=(m,S)=>{S<1&&(S=1),b.value[m]=S,U()},y=(m,S)=>{c.value[m]=S,U()},P=(m,S)=>{S=Math.max(0,Math.min(T.value,isNaN(S)?0:S)),k.value[m]=S,U()},H=(m,S)=>{v.value[m]=S,g.value[m]=void 0,U()},me=m=>{v.value[m]=null,g.value[m]=void 0,U()},X=(m,S)=>{g.value[m]=de(S),U()},V=()=>{t.value=null,p.value=null,Object.keys(v.value).forEach(m=>{v.value[m]=null}),g.value={},Object.keys(k.value).forEach(m=>{k.value[m]=0}),b.value={},c.value={},u.value=null};return{savedBuilds:a,currentBuildId:u,selectedClass:t,equipment:v,equipmentOverrides:g,attributes:k,totalAttributePoints:w,currentClassData:Z,currentSubclassData:ne,stats:ue,setClass:z,setSubclass:f,setSkillLevel:L,setSkillStone:y,setAttribute:P,equipItem:H,unequipItem:me,setItemOverride:X,resetPlanner:V,saveCurrentBuild:m=>{const S=JSON.parse(JSON.stringify(g.value)),D={};Object.keys(S).forEach(A=>{D[A]=de(S[A])});const J={id:u.value||Date.now().toString(),name:m,charClass:t.value,subclass:p.value,equipment:JSON.parse(JSON.stringify(v.value)),equipmentOverrides:D,attributes:JSON.parse(JSON.stringify(k.value)),skillLevels:JSON.parse(JSON.stringify(b.value)),skillStones:JSON.parse(JSON.stringify(c.value))};if(u.value){const A=a.value.findIndex(ge=>ge.id===u.value);A!==-1?(J.name=m,a.value[A]=J):a.value.push(J)}else u.value=J.id,a.value.push(J);te()},loadBuild:m=>{const S=a.value.find(J=>J.id===m);if(!S)return;u.value=S.id,t.value=S.charClass,p.value=S.subclass||null,v.value=JSON.parse(JSON.stringify(S.equipment||{}));const D=JSON.parse(JSON.stringify(S.equipmentOverrides||{}));g.value={},Object.keys(D).forEach(J=>{g.value[J]=de(D[J])}),k.value=JSON.parse(JSON.stringify(S.attributes||{})),b.value=JSON.parse(JSON.stringify(S.skillLevels||{})),c.value=JSON.parse(JSON.stringify(S.skillStones||{}))},deleteBuild:m=>{a.value=a.value.filter(S=>S.id!==m),u.value===m&&V(),te()},newBuild:m=>{V();const S=Date.now().toString();u.value=S;const D=JSON.parse(JSON.stringify(g.value)),J={};Object.keys(D).forEach(A=>{J[A]=de(D[A])}),a.value.push({id:S,name:m,charClass:null,subclass:null,equipment:JSON.parse(JSON.stringify(v.value)),equipmentOverrides:J,attributes:JSON.parse(JSON.stringify(k.value)),skillLevels:{},skillStones:{}}),te()},isLoaded:d,plannerData:_,loadPlannerData:O,selectedSubclass:p,skillLevels:b,skillStones:c,config:E,maxAttributePoints:M,maxAttributePerAttr:T,maxUpgradeLevel:x,maxSkillLevel:N,maxGrade:n,rarityThresholds:h,gearscoreExcludedSlots:i,gradeSliderTicks:B,rarityColors:K,modifiableStats:se}}),ss={key:0,class:"planner-slot__placeholder"},ts=["src","alt"],ls={key:2,class:"planner-slot__active-ring"},as={key:3,class:"planner-slot__actions"},ns=["title"],os=["title"],is={key:4,class:"planner-slot__upgrade-badge"},rs=Q({__name:"PlannerSlot",props:{id:{},item:{},active:{type:Boolean}},emits:["click","edit"],setup(a,{emit:u}){const t=a,p=u,d=ce(),_=ee(),{t:v}=ae(),g=$(!1),k=$(0),b=$(0),c=x=>{t.item&&(g.value=!0,k.value=x.clientX,b.value=x.clientY)},O=()=>{g.value=!1},w=(x,N)=>{if(!x)return"#30363d";const n=_.equipmentOverrides[N];let h;n?.grade!==void 0?h=Ie(n.grade):n?.rarity!==void 0?h=n.rarity:h=Ce(x);const i=_.rarityColors;return i&&i[h]?.hex||"#e6edf3"},E=x=>{x.stopPropagation(),t.item&&(g.value=!1,p("edit",t.id,t.item))},M=x=>{x.stopPropagation(),t.item&&(g.value=!1,_.unequipItem(t.id))},T=I(()=>_.equipmentOverrides[t.id]?.upgradeLevel||0);return(x,N)=>(l(),o("div",{class:F(["planner-slot",{"planner-slot--empty":!a.item,"planner-slot--active":a.active}]),style:be({borderColor:a.item?`${w(a.item,a.id)}80`:"#30363d"}),onClick:N[0]||(N[0]=n=>p("click",a.id)),onMousemove:c,onMouseleave:O},[a.item?a.item?.icon1?(l(),o("img",{key:1,src:s(d).getIconUrl(a.item.icon1),class:"planner-slot__image",alt:s(v)("item.name")},null,8,ts)):q("",!0):(l(),o("div",ss,[Te(x.$slots,"icon",{},()=>[C(s(Ne),{size:20,class:"planner-slot__fallback-icon"})])])),a.active?(l(),o("div",ls)):q("",!0),a.item?(l(),o("div",as,[e("button",{class:"planner-slot__action-btn edit-btn",onClick:E,title:s(v)("planner.slots.edit")},[C(s(Je),{size:12})],8,ns),e("button",{class:"planner-slot__action-btn remove-btn",onClick:M,title:s(v)("planner.slots.remove")},[C(s(qe),{size:12})],8,os)])):q("",!0),a.item&&T.value>0?(l(),o("div",is,r(T.value),1)):q("",!0),(l(),Y(Le,{to:"body"},[a.item?(l(),Y(xe,{key:0,item:a.item,visible:g.value,x:k.value,y:b.value,overrideGrade:s(_).equipmentOverrides[a.id]?.grade,overrideRarity:s(_).equipmentOverrides[a.id]?.rarity,overrideLevel:s(_).equipmentOverrides[a.id]?.level,overrideUpgradeLevel:s(_).equipmentOverrides[a.id]?.upgradeLevel,overrideStats:s(_).equipmentOverrides[a.id]?.stats,slotId:a.id},null,8,["item","visible","x","y","overrideGrade","overrideRarity","overrideLevel","overrideUpgradeLevel","overrideStats","slotId"])):q("",!0)]))],38))}}),cs=W(rs,[["__scopeId","data-v-05361a43"]]),us={class:"planner-attr-card"},ds={class:"planner-attr-card__header"},vs={class:"planner-attr-card__title-group"},_s={class:"planner-attr-card__short"},ms={class:"planner-attr-card__title"},ps={class:"planner-attr-card__value"},hs={class:"planner-attr-card__controls"},bs=["disabled"],fs={class:"planner-attr-card__slider-container"},ks=["max","value"],ys=["disabled"],Ss={class:"planner-attr-card__bonus"},gs=Q({__name:"PlannerAttributeCard",props:{id:{},title:{},shortName:{},value:{},max:{},bonusText:{}},emits:["update:value"],setup(a,{emit:u}){const t=a,p=u,d=I(()=>t.max??100),_=()=>{t.value>0&&p("update:value",t.value-1)},v=()=>{t.value<d.value&&p("update:value",t.value+1)},g=k=>{const b=k.target;let c=parseInt(b.value,10);isNaN(c)&&(c=0),c>d.value&&(c=d.value),c<0&&(c=0),p("update:value",c)};return(k,b)=>(l(),o("div",us,[e("div",ds,[e("div",vs,[e("span",_s,r(a.shortName),1),e("span",ms,r(a.title),1)]),e("div",ps,r(a.value),1)]),e("div",hs,[e("button",{class:"planner-attr-card__btn",onClick:_,disabled:a.value<=0},"-",8,bs),e("div",fs,[e("input",{type:"range",min:0,max:d.value,value:a.value,onInput:g,class:"planner-attr-card__slider"},null,40,ks),e("div",{class:"planner-attr-card__slider-track-fill",style:be({width:`${a.value/d.value*100}%`})},null,4)]),e("button",{class:"planner-attr-card__btn",onClick:v,disabled:a.value>=d.value},"+",8,ys)]),e("div",Ss,r(a.bonusText),1)]))}}),$s=W(gs,[["__scopeId","data-v-f065bfe1"]]),Cs={class:"item-modal__header"},ws={class:"item-modal__title"},xs={key:0,class:"item-modal__slot-name"},Is={class:"item-modal__search-box"},Os={class:"item-modal__content"},Ls={key:0,class:"item-modal__list"},Es={key:1,class:"item-modal__empty"},Ns=Q({__name:"ItemSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(a,{emit:u}){const t=a,p=u,d=ce(),_=ee(),{t:v}=ae(),g=$(""),k=$(null),b=$(0),c=$(0),O=(n,h)=>{k.value=h,b.value=n.clientX,c.value=n.clientY},w=()=>{k.value=null},E=()=>{g.value="",k.value=null,p("close")},M=n=>{if(!n)return[];switch(n){case"weapon":switch(_.selectedClass){case"Sword & Shield":return["Sword"];case"Two-Handed Sword":return["Two Handed Sword"];case"Spear":return["Spear"];case"Dual Axe":return["Dual Axe"];case"Dual Dagger":return["Dual Dagger"];case"War Hammer":return["War Hammer"];case"Bow":return["Bow"];case"Dual Crossbow":return["Dual Crossbow"];case"Arcane Staff":return["Arcane Staff"];case"Life Staff":return["Life Staff"];default:return[]}case"offhand":return _.selectedClass==="Sword & Shield"?["Shield"]:[];case"head":return["Helmet [Heavy]","Helmet [Light]","Helmet [Robe]"];case"chest":return["Armor [Heavy]","Armor [Light]","Armor [Robe]"];case"gloves":return["Gauntlet [Heavy]","Gauntlet [Light]","Gauntlet [Robe]"];case"boots":return["Boots [Heavy]","Boots [Light]","Boots [Robe]"];case"earring1":case"earring2":return["Earring"];case"ring1":case"ring2":return["Ring"];case"bracelet":return["Bracelet"];case"necklace":return["Necklace"];case"card1":case"card2":return["Power Card"];default:return[]}},T=I(()=>{if(!t.slotId)return[];const n=M(t.slotId);let h=d.items.filter(i=>n.includes(i.tip_loc_English)&&i.baslik_loc_English);if(g.value){const i=g.value.toLowerCase();h=h.filter(B=>{const K=B.baslik_loc_English?.toLowerCase()||"",se=B.baslik_loc_Turkish?.toLowerCase()||"",Z=B.baslik_loc_Portuguese?.toLowerCase()||"",ne=B.baslik_loc_Spanish?.toLowerCase()||"";return K.includes(i)||se.includes(i)||Z.includes(i)||ne.includes(i)})}return h.slice(0,100)}),x=n=>{p("select",n),E()},N=n=>{n.key==="Escape"&&t.visible&&E()};return fe(()=>window.addEventListener("keydown",N)),ke(()=>window.removeEventListener("keydown",N)),(n,h)=>(l(),Y(Le,{to:"body"},[C(_e,{name:"modal"},{default:G(()=>[a.visible?(l(),o("div",{key:0,class:"item-modal-overlay",onClick:E},[e("div",{class:"item-modal",onClick:h[1]||(h[1]=ie(()=>{},["stop"]))},[e("div",Cs,[e("h3",ws,[ve(r(s(v)("planner.modals.selector.title"))+" ",1),a.slotId?(l(),o("span",xs,"("+r(a.slotId)+")",1)):q("",!0)]),e("button",{class:"item-modal__close-btn",onClick:E},[C(s(we),{size:20})])]),e("div",Is,[C(He,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=i=>g.value=i),placeholder:s(v)("planner.modals.common.search"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",Os,[T.value.length>0?(l(),o("div",Ls,[(l(!0),o(R,null,j(T.value,i=>(l(),Y(Ke,{key:i.id,item:i,disableNavigation:!0,onClick:B=>x(i),onHover:O,onLeave:w},null,8,["item","onClick"]))),128))])):(l(),o("div",Es,[C(s(Me),{size:32,class:"item-modal__empty-icon"}),e("p",null,r(s(v)("common.noResults")),1)]))])])])):q("",!0)]),_:1}),C(xe,{item:k.value,visible:!!k.value,x:b.value,y:c.value},null,8,["item","visible","x","y"])]))}}),Bs=W(Ns,[["__scopeId","data-v-a986aa30"]]),Ds={class:"item-card__header"},Ms={class:"header-top"},qs={class:"rarity-tier"},zs={class:"rarity-label"},Js={key:0,class:"tier-label"},Ps={class:"level-label"},Fs={class:"item-type"},Ts={class:"header-main"},Rs={class:"item-name"},Vs={class:"header-icon"},As=["src"],Us={class:"item-card__simulator compact"},js={class:"simulator-row"},Hs={class:"simulator-header"},Gs={class:"simulator-label"},Ks={class:"simulator-value"},Xs={class:"slider-wrapper"},Ys=["max"],Qs={class:"slider-ticks"},Ws={class:"simulator-row level-upgrade-row"},Zs={class:"level-upgrade-col"},et={class:"simulator-header"},st={class:"simulator-label"},tt={class:"simulator-value"},lt=["max"],at={class:"level-upgrade-col"},nt={class:"simulator-header"},ot={class:"simulator-label"},it={class:"simulator-value"},rt=["value"],ct={class:"item-card__body manual-edit-body"},ut={class:"edit-note"},dt={class:"traits-section"},vt=["for"],_t=["id","onUpdate:modelValue"],mt={class:"item-card__footer edit-footer"},pt=Q({__name:"ItemEditModal",props:{visible:{type:Boolean},slotId:{},item:{}},emits:["close"],setup(a,{emit:u}){const t=a,p=u,d=ee(),_=ce(),{t:v,locale:g}=ae(),k=$(0),b=$(1),c=$(0),O=$({}),w=I(()=>{const n=d.plannerData?.statKeys||[],h=d.modifiableStats||[];return n.filter(i=>h.includes(i.key)).map(i=>({key:i.key,label:v("stats."+i.key)}))});De(()=>t.visible,n=>{if(n&&t.item&&t.slotId){const h=d.equipmentOverrides[t.slotId];h?(k.value=h.grade!==void 0?h.grade:t.item.default_grade||0,b.value=h.level||t.item.level||1,c.value=h.upgradeLevel!==void 0?h.upgradeLevel:0,O.value={...h.stats},w.value.forEach(i=>{if(O.value[i.key]===void 0){const B=Number(t.item[i.key]);!isNaN(B)&&B>0&&(O.value[i.key]=B)}})):(k.value=t.item.default_grade||0,b.value=t.item.level||1,c.value=0,O.value={},w.value.forEach(i=>{const B=Number(t.item[i.key]);!isNaN(B)&&B>0&&(O.value[i.key]=B)}))}});const E=()=>{if(!t.slotId||c.value<0||c.value>d.maxUpgradeLevel)return;const n={};Object.keys(O.value).forEach(i=>{O.value[i]>0&&(n[i]=O.value[i])});const h={grade:k.value,level:b.value,upgradeLevel:c.value,stats:n};d.setItemOverride(t.slotId,h),p("close")},M=n=>{n.key==="Escape"&&t.visible&&p("close")};fe(()=>window.addEventListener("keydown",M)),ke(()=>window.removeEventListener("keydown",M));const T=n=>n?g.value==="pt-BR"?n.baslik_loc_Portuguese||n.baslik_loc_English||n.id:g.value==="en"?n.baslik_loc_English||n.id:g.value==="es"?n.baslik_loc_Spanish||n.baslik_loc_English||n.id:n[`baslik_loc_${g.value}`]||n.baslik_loc_English||n.id:"",x=n=>{const h=typeof n=="number"&&n>5?Ie(n):typeof n=="number"?n:Ce(n),i=d.rarityColors;return i&&i[h]?.hex||"#e6edf3"},N=n=>{const h=typeof n=="number"&&n>5?Ie(n):typeof n=="number"?n:Ce(n),i=d.rarityColors;if(!i)return"common";const B=i[h]?.hex?Object.keys(i).find(K=>i[K].hex===i[h].hex):"common";return B?v(`rarity.${B}`):"common"};return(n,h)=>(l(),Y(Le,{to:"body"},[C(_e,{name:"modal"},{default:G(()=>[a.visible?(l(),o("div",{key:0,class:"item-edit-overlay",onClick:h[6]||(h[6]=i=>p("close"))},[a.item?(l(),o("div",{key:0,class:"item-card-wrapper",onClick:h[5]||(h[5]=ie(()=>{},["stop"]))},[e("div",{class:"item-card",style:be({"--rarity-color":x(k.value)})},[e("button",{class:"modal-close-btn",onClick:h[0]||(h[0]=i=>p("close"))},[C(s(we),{size:16})]),e("div",Ds,[e("div",Ms,[e("div",qs,[e("span",zs,r(N(k.value)),1),a.item.tier?(l(),o("span",Js,"T"+r(a.item.tier),1)):q("",!0),e("span",Ps,"Lv. "+r(b.value),1)]),e("div",Fs,r(a.item.tip_loc_English||s(v)("item.item")),1)]),e("div",Ts,[e("h2",Rs,r(T(a.item)),1)]),e("div",Vs,[a.item.icon1?(l(),o("img",{key:0,src:s(_).getIconUrl(a.item.icon1)},null,8,As)):(l(),Y(s(Ue),{key:1,size:40,class:"icon-fallback"}))])]),e("div",Us,[e("div",js,[e("div",Hs,[e("span",Gs,r(s(v)("item.grade")),1),e("span",Ks,r(k.value)+" / "+r(s(d).maxGrade),1)]),e("div",Xs,[oe(e("input",{type:"range",min:"0",max:s(d).maxGrade,"onUpdate:modelValue":h[1]||(h[1]=i=>k.value=i),class:"custom-slider",style:be({"--track-color":x(k.value)})},null,12,Ys),[[he,k.value,void 0,{number:!0}]]),e("div",Qs,[(l(!0),o(R,null,j(s(d).gradeSliderTicks,i=>(l(),o("span",{key:i},r(i),1))),128))])])]),e("div",Ws,[e("div",Zs,[e("div",et,[e("span",st,r(s(v)("item.simulateLevel")),1),e("span",tt,"Lv. "+r(b.value)+" / "+r(s(d).maxSkillLevel),1)]),oe(e("input",{type:"number",min:"1",max:s(d).maxSkillLevel,"onUpdate:modelValue":h[2]||(h[2]=i=>b.value=i),class:"custom-level-input"},null,8,lt),[[he,b.value,void 0,{number:!0}]])]),e("div",at,[e("div",nt,[e("span",ot,r(s(v)("item.upgradeLevel")),1),e("span",it,"+"+r(c.value)+" / "+r(s(d).maxUpgradeLevel),1)]),oe(e("select",{"onUpdate:modelValue":h[3]||(h[3]=i=>c.value=i),class:"custom-level-input custom-select"},[(l(!0),o(R,null,j(s(d).maxUpgradeLevel+1,i=>(l(),o("option",{key:i-1,value:i-1}," +"+r(i-1),9,rt))),128))],512),[[Re,c.value,void 0,{number:!0}]])])])]),e("div",ct,[e("div",ut,r(s(v)("planner.modals.edit.alert")),1),e("div",dt,[(l(!0),o(R,null,j(w.value,i=>(l(),o("div",{key:i.key,class:"trait-row"},[e("label",{for:i.key,class:"trait-label"},"• "+r(i.label)+":",9,vt),oe(e("input",{id:i.key,type:"number","onUpdate:modelValue":B=>O.value[i.key]=B,class:"trait-input",min:"0",placeholder:"0"},null,8,_t),[[he,O.value[i.key],void 0,{number:!0}]])]))),128))])]),e("div",mt,[C(Oe,{variant:"secondary",onClick:h[4]||(h[4]=i=>p("close"))},{default:G(()=>[ve(r(s(v)("common.cancel")),1)]),_:1}),C(Oe,{variant:"primary",onClick:E},{icon:G(()=>[C(s(Ze),{size:16})]),default:G(()=>[ve(" "+r(s(v)("common.save")),1)]),_:1})])],4)])):q("",!0)])):q("",!0)]),_:1})]))}}),Pe=W(pt,[["__scopeId","data-v-2ebcf7ec"]]),ht={key:0,class:"header-content"},bt={class:"header-label"},ft={key:1,class:"header-content empty-content"},kt={class:"header-label"},yt={key:0,class:"class-selector__list"},St=["onClick"],gt={class:"class-item__label"},$t=Q({__name:"ClassSelector",setup(a){const u=ee(),{t}=ae(),p=I(()=>u.plannerData?.classes?u.plannerData.classes.map(c=>({id:c.id,labelKey:c.labelKey,name:c.name})):[]),d=$(!1),_=$(null),v=I(()=>u.selectedClass&&p.value.find(c=>c.id===u.selectedClass)||null),g=c=>{u.setClass(c),d.value=!1},k=()=>{d.value=!d.value},b=c=>{_.value&&!_.value.contains(c.target)&&(d.value=!1)};return fe(()=>{document.addEventListener("click",b)}),ke(()=>{document.removeEventListener("click",b)}),(c,O)=>(l(),o("div",{class:"class-selector",ref_key:"dropdownRef",ref:_},[e("div",{class:F(["class-selector__header",{"is-open":d.value,"is-selected":!!v.value}]),onClick:k},[v.value?(l(),o("div",ht,[e("span",bt,r(s(t)(v.value.name)),1)])):(l(),o("div",ft,[e("span",kt,r(s(t)("planner.class.placeholder")),1)])),C(s(Ee),{size:20,class:F(["chevron-icon",{rotate:d.value}])},null,8,["class"])],2),C(_e,{name:"dropdown"},{default:G(()=>[d.value?(l(),o("div",yt,[(l(!0),o(R,null,j(p.value,w=>(l(),o("button",{key:w.id,class:F(["class-item",{"is-active":s(u).selectedClass===w.id}]),onClick:E=>g(w.id)},[e("span",gt,r(s(t)(w.name)),1)],10,St))),128))])):q("",!0)]),_:1})],512))}}),Ct=W($t,[["__scopeId","data-v-0af48b10"]]),wt={key:0,class:"header-content"},xt={class:"header-label"},It={key:1,class:"header-content empty-content"},Ot={key:0,class:"header-label"},Lt={key:1,class:"header-label"},Et={key:0,class:"subclass-selector__list"},Nt=["onClick"],Bt={class:"subclass-item__label"},Dt=Q({__name:"SubclassSelector",setup(a){const u=ee(),{t}=ae(),p=$(!1),d=$(null),_=I(()=>!u.currentClassData||!u.currentClassData.subclasses?[]:u.currentClassData.subclasses.map(c=>({id:c.id,labelKey:c.labelKey,name:c.name}))),v=I(()=>u.selectedSubclass&&_.value.find(c=>c.id===u.selectedSubclass)||null),g=c=>{u.setSubclass(c),p.value=!1},k=()=>{_.value.length!==0&&(p.value=!p.value)},b=c=>{d.value&&!d.value.contains(c.target)&&(p.value=!1)};return fe(()=>document.addEventListener("click",b)),ke(()=>document.removeEventListener("click",b)),(c,O)=>(l(),o("div",{class:F(["subclass-selector",{"is-disabled":_.value.length===0}]),ref_key:"dropdownRef",ref:d},[e("div",{class:F(["subclass-selector__header",{"is-open":p.value,"is-selected":!!v.value}]),onClick:k},[v.value?(l(),o("div",wt,[C(s(Be),{class:"header-icon",size:16}),e("span",xt,r(s(t)(v.value.name)),1)])):(l(),o("div",It,[_.value.length>0?(l(),o("span",Ot,r(s(t)("planner.subclass.placeholder")),1)):(l(),o("span",Lt,r(s(t)("planner.subclass.unavailable")),1))])),_.value.length>0?(l(),Y(s(Ee),{key:2,size:16,class:F(["chevron-icon",{rotate:p.value}])},null,8,["class"])):q("",!0)],2),C(_e,{name:"dropdown"},{default:G(()=>[p.value?(l(),o("div",Et,[(l(!0),o(R,null,j(_.value,w=>(l(),o("button",{key:w.id,class:F(["subclass-item",{"is-active":s(u).selectedSubclass===w.id}]),onClick:E=>g(w.id)},[C(s(Be),{class:"subclass-item__icon",size:14}),e("span",Bt,r(s(t)(w.name)),1)],10,Nt))),128))])):q("",!0)]),_:1})],2))}}),Mt=W(Dt,[["__scopeId","data-v-bd5ac1a8"]]),qt={class:"row-icon-col"},zt={class:"skill-icon"},Jt={class:"row-info-col"},Pt={class:"skill-name"},Ft={key:0,class:"level-num"},Tt={class:"skill-level-ctrl"},Rt={class:"muted-label"},Vt={class:"ctrl-group"},At=["disabled"],Ut=["disabled"],jt={class:"row-stats-col"},Ht={class:"muted-label"},Gt={class:"stats-val"},Kt={class:"highlight-blue"},Xt={class:"highlight-cyan"},Yt={class:"row-effects-col"},Qt={class:"muted-label"},Wt={class:"effects-list"},Zt={class:"effect-text"},el={key:0,class:"effect-highlight"},sl={key:0,class:"row-action-col"},tl={class:"stone-slot-wrapper"},ll=["title"],al=["src","alt"],nl={key:0,class:"stone-slot-actions"},ol=["title"],il=["title"],rl=Q({__name:"SkillNodeCard",props:{skill:{},index:{}},emits:["openStoneSelector","openStoneEditor"],setup(a,{emit:u}){const t=a,p=ee(),d=ce(),{t:_,locale:v}=Xe(),g=I(()=>{switch(v.value){case"pt-BR":return"Portuguese";case"es-ES":return"Spanish";default:return"English"}}),k=t.skill.maxLevel||p.maxSkillLevel,b=I(()=>p.skillLevels[t.skill.id]||0),c=I(()=>p.skillStones[t.skill.id]),O=I(()=>!!c.value),w=I(()=>c.value?d.getItemById(c.value):null),E=I(()=>w.value?d.getIconUrl(w.value.icon1||w.value.icon):null),M=I(()=>c.value&&p.equipmentOverrides["stone_"+t.skill.id]||null),T=I(()=>{if(!w.value)return"transparent";const z=M.value?.rarity??Ce(w.value),f=p.rarityColors;return f&&f[z]?.rgba||"#30363d"}),x=()=>{b.value<k&&p.setSkillLevel(t.skill.id,b.value+1)},N=()=>{b.value>0&&p.setSkillLevel(t.skill.id,b.value-1)},n=I(()=>{const z=b.value,f=p.rarityThresholds;return f?z>=f.epic?"rarity-epic":z>=f.rare?"rarity-rare":z>=f.uncommon?"rarity-uncommon":"":""}),h=z=>{const f=Math.max(1,b.value),L=f-1;if(z.template){let y=z.template;const P={};return z.params&&Object.entries(z.params).forEach(([H,me])=>{const X=(me.base||0)+(me.scaling||0)*L;P[H]=Number.isInteger(X)?X.toString():X.toFixed(1),y=y.replace(`{${H}}`,P[H])}),y.startsWith("planner.")?_(y,P):y}if(z.text){const y=z.text,P=z.scaling;if(!P||f<=1)return y;const H=P.match(/([+-]?\d+(?:\.\d+)?)/);if(!H)return y;const X=parseFloat(H[1])*L;let V=y;return P.includes("CD")||P.toLowerCase().includes("s")?(V=V.replace(/CD\s*([+-]?\d+(?:\.\d+)?)s/i,(Se,le)=>"CD "+Number((parseFloat(le)+X).toFixed(1))+"s"),V===y&&(V=V.replace(/([+-]?\d+(?:\.\d+)?)s/,(Se,le)=>Number((parseFloat(le)+X).toFixed(1))+"s"))):P.includes("%")?V=V.replace(/([+-]?\d+(?:\.\d+)?)%/,(Se,le)=>Number((parseFloat(le)+X).toFixed(1))+"%"):V=V.replace(/([+-]?\d+(?:\.\d+)?)/,(Se,le)=>Number((parseFloat(le)+X).toFixed(1)).toString()),V}return""},i=z=>z.scaling?z.scaling:z.params?Object.values(z.params).filter(f=>f.scaling!==0).map(f=>{const L=(f.scaling||0)>0?"+":"",y=z.template.includes("%")?"%":"";return`${L}${f.scaling}${y}/lvl`}).join(", "):null,B=$(null),K=$(0),se=$(0),Z=z=>{O.value&&w.value&&(B.value=w.value,K.value=z.clientX,se.value=z.clientY)},ne=()=>{B.value=null},ue=()=>{B.value=null,U("openStoneSelector",t.skill.id)},ye=()=>{B.value=null,U("openStoneEditor",t.skill.id)},te=()=>{p.setSkillStone(t.skill.id,null),B.value=null},U=u;return(z,f)=>(l(),o("div",{class:F(["clean-row-card",[{"is-active":b.value>0},n.value]])},[e("div",qt,[e("div",zt,[e("span",null,r(a.index+1),1)])]),e("div",Jt,[e("h4",Pt,[ve(r(s(_)(a.skill.name))+" ",1),b.value>0?(l(),o("span",Ft," I")):q("",!0)]),e("div",Tt,[e("span",Rt,r(s(_)("planner.skills.levelLabel")),1),e("div",Vt,[e("button",{class:"ctrl-btn",onClick:N,disabled:b.value===0},[C(s(Qe),{size:12})],8,At),e("span",{class:F(["ctrl-val",{"is-active-val":b.value>0}])},r(b.value>0?b.value:1)+" / "+r(s(k)),3),e("button",{class:"ctrl-btn",onClick:x,disabled:b.value===s(k)},[C(s(Ne),{size:12})],8,Ut)])])]),e("div",jt,[e("div",Ht,r(s(_)("planner.skills.costCdLabel")),1),e("div",Gt,[e("span",Kt,r(a.skill.manaCost||a.skill.baseManaCost||0)+" MP",1),f[0]||(f[0]=e("span",{class:"separator"},"•",-1)),e("span",Xt,r(a.skill.cooldown||a.skill.baseCooldown||0)+"s",1)])]),e("div",Yt,[e("div",Qt,r(s(_)("planner.skills.effectsLabel")),1),e("div",Wt,[(l(!0),o(R,null,j(a.skill.effects,(L,y)=>(l(),o("div",{class:"effect-line",key:y},[e("span",Zt,r(h(L)),1),i(L)?(l(),o("span",el,r(i(L)),1)):q("",!0)]))),128))])]),a.skill.hasStoneSlot?(l(),o("div",sl,[e("div",tl,[e("button",{class:F(["action-btn",{"has-gem":O.value}]),onClick:ie(ue,["stop"]),title:O.value?"":s(_)("planner.skills.equipStone"),onMousemove:Z,onMouseleave:ne},[E.value?(l(),o("img",{key:0,src:E.value,alt:w.value?.["baslik_loc_"+g.value]||w.value?.baslik_loc_English,style:be({borderColor:T.value})},null,12,al)):(l(),Y(s(ze),{key:1,size:20}))],42,ll),O.value?(l(),o("div",nl,[e("button",{class:"stone-action-btn edit-btn",onClick:ie(ye,["stop"]),title:s(_)("planner.skills.changeStone")},[C(s(Je),{size:12})],8,ol),e("button",{class:"stone-action-btn remove-btn",onClick:ie(te,["stop"]),title:s(_)("planner.skills.unsocketStone")},[C(s(qe),{size:12})],8,il)])):q("",!0)])])):q("",!0),C(xe,{item:B.value,visible:!!B.value,x:K.value,y:se.value,overrideRarity:B.value&&M.value?M.value.rarity:void 0,overrideLevel:B.value&&M.value?M.value.level:void 0,overrideStats:B.value&&M.value?M.value.stats:void 0},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])],2))}}),cl=W(rl,[["__scopeId","data-v-442e9498"]]),ul={class:"modal-header"},dl={class:"modal-title"},vl={class:"modal-search"},_l=["placeholder"],ml={class:"modal-body"},pl={key:0,class:"empty-state"},hl={key:1,class:"item-grid"},bl=["onClick","onMousemove"],fl=["src","alt"],kl={key:1,class:"item-card__fallback"},yl={key:2,class:"item-card__level-badge"},Sl={class:"item-card__info"},gl=Q({__name:"SkillStoneSelectorModal",props:{show:{type:Boolean},skillId:{}},emits:["close"],setup(a,{emit:u}){const t=a,p=u,d=ce(),_=ee(),{t:v}=ae(),g=$(""),k=I(()=>d.items.filter(x=>x.tip_loc_English==="Skill Stone")),b=I(()=>{if(!g.value)return k.value;const x=g.value.toLowerCase();return k.value.filter(N=>{const n=(N.baslik_loc_English||N.isim_loc_English||"")?.toLowerCase(),h=(N.baslik_loc_Portuguese||N.isim_loc_Portuguese||"")?.toLowerCase(),i=(N.baslik_loc_Spanish||N.isim_loc_Spanish||"")?.toLowerCase();return n.includes(x)||h.includes(x)||i.includes(x)})}),c=x=>{t.skillId&&_.setSkillStone(t.skillId,x.id),O.value=null,p("close")},O=$(null),w=$(0),E=$(0),M=(x,N)=>{t.show&&(O.value=N,w.value=x.clientX,E.value=x.clientY)},T=()=>{t.show&&(O.value=null)};return De(()=>t.show,x=>{x||(O.value=null)}),(x,N)=>(l(),o(R,null,[C(_e,{name:"modal"},{default:G(()=>[a.show?(l(),o("div",{key:0,class:"modal-overlay",onClick:N[3]||(N[3]=n=>p("close"))},[e("div",{class:"modal-content",onClick:N[2]||(N[2]=ie(()=>{},["stop"]))},[e("div",ul,[e("div",dl,[C(s(ze),{size:20,class:"title-icon"}),e("h3",null,r(s(v)("planner.skillStone.title")),1)]),e("button",{class:"icon-btn close-btn",onClick:N[0]||(N[0]=n=>p("close"))},[C(s(we),{size:20})])]),e("div",vl,[C(s(Me),{class:"search-icon",size:16}),oe(e("input",{type:"text","onUpdate:modelValue":N[1]||(N[1]=n=>g.value=n),placeholder:s(v)("planner.skillStone.searchPlaceholder"),class:"search-input",ref:"searchInput"},null,8,_l),[[he,g.value]])]),e("div",ml,[b.value.length===0?(l(),o("div",pl,r(s(v)("planner.skillStone.emptyState")),1)):(l(),o("div",hl,[(l(!0),o(R,null,j(b.value,n=>(l(),o("button",{key:n.id,class:"item-card",onClick:h=>c(n),onMousemove:h=>M(h,n),onMouseleave:T},[e("div",{class:F(["item-card__icon","rarity-"+(n.quality||1)])},[n.icon1||n.icon?(l(),o("img",{key:0,src:s(d).getIconUrl(n.icon1||n.icon),alt:n.baslik_loc_English||n.isim_loc_English},null,8,fl)):(l(),o("div",kl)),n.level?(l(),o("div",yl,"Lv. "+r(n.level),1)):q("",!0)],2),e("div",Sl,[e("span",{class:F(["item-name","text-rarity-"+(n.quality||1)])},r(n["baslik_loc_"+s(v)("lang_suffix")]||n["isim_loc_"+s(v)("lang_suffix")]||n.baslik_loc_English||n.isim_loc_English||n.id),3)])],40,bl))),128))]))])])])):q("",!0)]),_:1}),C(xe,{item:O.value,visible:!!O.value,x:w.value,y:E.value},null,8,["item","visible","x","y"])],64))}}),$l=W(gl,[["__scopeId","data-v-802ff69d"]]),Cl={class:"planner-skills"},wl={key:0,class:"planner-skills__empty"},xl={key:1,class:"planner-skills__content"},Il={key:0,class:"passive-banner"},Ol={class:"passive-banner__header"},Ll={class:"passive-tag"},El={class:"passive-name"},Nl={class:"passive-desc"},Bl={key:1,class:"skills-list"},Dl={key:2,class:"planner-skills__empty"},Ml=Q({__name:"PlannerSkillsTab",setup(a){const u=ee(),t=ce(),{t:p}=ae(),d=I(()=>u.currentSubclassData),_=$(!1),v=$(null),g=M=>{v.value=M,_.value=!0},k=()=>{_.value=!1,v.value=null},b=$(!1),c=$(null),O=I(()=>{if(!c.value)return null;const M=u.skillStones[c.value];return M?t.getItemById(M):null}),w=M=>{c.value=M,b.value=!0},E=()=>{b.value=!1,c.value=null};return(M,T)=>(l(),o("div",Cl,[d.value?(l(),o("div",xl,[d.value.passive?(l(),o("div",Il,[e("div",Ol,[e("span",Ll,r(s(p)("planner.skills.passiveAbility")),1),e("h4",El,r(s(p)(d.value.passive.name)),1)]),e("p",Nl,r(s(p)(d.value.passive.description)),1)])):q("",!0),d.value.skills&&d.value.skills.length>0?(l(),o("div",Bl,[(l(!0),o(R,null,j(d.value.skills,(x,N)=>(l(),Y(cl,{key:x.id,skill:x,index:Number(N)+1,onOpenStoneSelector:g,onOpenStoneEditor:w},null,8,["skill","index"]))),128))])):(l(),o("div",Dl,[e("p",null,r(s(p)("planner.skills.noSubclassSkills")),1)]))])):(l(),o("div",wl,[e("p",null,r(s(p)("planner.skills.emptySubclass")),1)])),C($l,{show:_.value,skillId:v.value,onClose:k},null,8,["show","skillId"]),C(Pe,{visible:b.value,slotId:"stone_"+c.value,item:O.value,onClose:E},null,8,["visible","slotId","item"])]))}}),ql=W(Ml,[["__scopeId","data-v-79a2b1e7"]]),zl={class:"planner-page"},Jl={class:"planner-page__container"},Pl={class:"planner-page__header"},Fl={class:"header-left"},Tl={class:"planner-page__title"},Rl={key:0,class:"build-selector-box is-creating"},Vl=["placeholder"],Al={class:"build-actions inline-actions"},Ul={key:0,class:"custom-dropdown-list"},jl={key:0,class:"dropdown-item empty-state",disabled:""},Hl=["onClick"],Gl={key:0,class:"dropdown-item__class"},Kl={class:"build-actions"},Xl=["title"],Yl=["title"],Ql={class:"header-right"},Wl={key:0,class:"error-msg"},Zl={key:1,class:"planner-layout"},ea={class:"planner-layout__col planner-layout__col--equip"},sa={class:"gear-ring"},ta=["src"],la={class:"gearscore-container"},aa={class:"gearscore-value"},na={class:"planner-layout__col planner-layout__col--attrs"},oa={class:"planner-tabs"},ia={class:"tab-content"},ra={class:"planner-section-title"},ca={class:"planner-attr-counter"},ua={class:"attr-grid"},da={key:0,class:"tab-content"},va={key:0},_a={style:{display:"flex",gap:"1rem","margin-bottom":"1.5rem"}},ma={style:{color:"#8b949e",display:"flex","align-items":"center","font-size":"0.875rem"}},pa={style:{"margin-top":"1rem"}},ha={key:1,style:{color:"#8b949e","text-align":"center","margin-top":"4rem"}},ba={class:"planner-layout__col planner-layout__col--stats"},fa={class:"planner-stats-panel"},ka={class:"planner-stats-panel__header"},ya={class:"planner-stats-panel__content"},Sa={class:"planner-stat-label"},ga={class:"planner-stat-value"},$a={key:0,class:"planner-stat-empty"},Ca=Q({__name:"Planner",setup(a){const{t:u}=ae(),t=ee(),p=ce(),d=$("attributes"),_=$(!1),v=$(null),g=$(!1),k=$(null),b=$(null),c=$(""),O=$(!1),w=$(""),E=$(!1),M=$(null),T=()=>{O.value||(E.value=!E.value)},x=f=>{M.value&&!M.value.contains(f.target)&&(E.value=!1)},N=f=>{if(!t.selectedClass){c.value=u("planner.attributes.errorClass"),setTimeout(()=>c.value="",3e3);return}v.value=f,_.value=!0},n=(f,L)=>{k.value=f,b.value=L,g.value=!0},h=f=>{v.value&&(f===null?t.unequipItem(v.value):(t.equipItem(v.value,f),k.value=v.value,b.value=f,g.value=!0))},i=()=>{t.resetPlanner(),w.value=""},B=f=>{f&&(t.loadBuild(f),E.value=!1)},K=()=>{O.value=!0,w.value=""},se=()=>{O.value=!1,w.value=""},Z=()=>{const f=w.value.trim();if(!f){c.value=u("planner.builds.errorName"),setTimeout(()=>c.value="",3e3);return}t.newBuild(f),O.value=!1,w.value=""},ne=()=>{t.currentBuildId&&confirm(u("planner.builds.confirmDelete"))&&t.deleteBuild(t.currentBuildId)},ue=I(()=>{const f={};return t.plannerData?.classes&&t.plannerData.classes.forEach(L=>{f[L.id]=L.labelKey}),f}),ye=I(()=>{if(!t.currentBuildId)return t.savedBuilds.length?u("planner.builds.select"):u("planner.builds.none");const f=t.savedBuilds.find(L=>L.id===t.currentBuildId);return f?`${f.name} ${f.charClass?`(${u("planner.class.names."+(ue.value[f.charClass]||f.charClass))})`:""}`:u("planner.builds.select")}),te=I(()=>{let f=0;return Object.keys(t.equipment).forEach(L=>{if(t.gearscoreExcludedSlots.includes(L))return;const y=t.equipment[L];if(!y)return;const P=t.equipmentOverrides[L],H=P?.grade!==void 0?P.grade:y.grade;H!=null&&(f+=Number(H))}),f});fe(async()=>{await t.loadPlannerData(),await p.loadData(),document.addEventListener("click",x)}),ke(()=>{document.removeEventListener("click",x)});const U=f=>u(`planner.attributes.bonus.${f}`),z=f=>"/CodexFall/"+f.replace(/^\//,"");return(f,L)=>(l(),o("div",zl,[e("div",Jl,[e("div",Pl,[e("div",Fl,[e("h1",Tl,r(s(u)("nav.planner")),1),e("div",{class:"build-section-wrapper",ref_key:"buildDropdownRef",ref:M},[O.value?(l(),o("div",Rl,[oe(e("input",{type:"text","onUpdate:modelValue":L[0]||(L[0]=y=>w.value=y),placeholder:s(u)("planner.builds.namePlaceholder"),class:"build-input",onKeyup:Ve(Z,["enter"])},null,40,Vl),[[he,w.value]]),e("div",Al,[e("button",{class:"icon-btn success-btn",onClick:Z},[C(s(Ye),{size:16})]),e("button",{class:"icon-btn",onClick:se},[C(s(we),{size:16})])])])):(l(),o(R,{key:1},[e("div",{class:F(["build-selector-box",{"is-open":E.value,"is-selected":!!s(t).currentBuildId}]),onClick:T},[e("span",{class:F(["build-value",{placeholder:!s(t).currentBuildId}])},r(ye.value),3),C(s(Ee),{size:16,class:F(["chevron-icon",{rotate:E.value}])},null,8,["class"])],2),C(_e,{name:"dropdown"},{default:G(()=>[E.value?(l(),o("div",Ul,[s(t).savedBuilds.length===0?(l(),o("button",jl,r(s(u)("planner.builds.none")),1)):q("",!0),(l(!0),o(R,null,j(s(t).savedBuilds,y=>(l(),o("button",{key:y.id,class:F(["dropdown-item",{"is-active":s(t).currentBuildId===y.id}]),onClick:ie(P=>B(y.id),["stop"])},[ve(r(y.name)+" ",1),y.charClass?(l(),o("span",Gl,"("+r(s(u)("planner.class.names."+(ue.value[y.charClass]||y.charClass)))+")",1)):q("",!0)],10,Hl))),128))])):q("",!0)]),_:1}),e("div",Kl,[e("button",{class:"icon-btn",title:s(u)("planner.builds.create"),onClick:K},[C(s(Ne),{size:16})],8,Xl),s(t).currentBuildId?(l(),o("button",{key:0,class:"icon-btn delete-btn",title:s(u)("common.delete"),onClick:ne},[C(s(es),{size:16})],8,Yl)):q("",!0)])],64))],512)]),e("div",Ql,[C(Ct),C(Oe,{variant:"secondary",onClick:i,title:s(u)("planner.stats.clear")},{icon:G(()=>[C(s(We),{size:16})]),default:G(()=>[ve(" "+r(s(u)("planner.stats.clear")),1)]),_:1},8,["title"])])]),c.value?(l(),o("div",Wl,r(c.value),1)):q("",!0),s(t).isLoaded?(l(),o("div",Zl,[e("div",ea,[e("div",sa,[L[5]||(L[5]=e("div",{class:"gear-ring__bg-line"},null,-1)),L[6]||(L[6]=e("img",{src:je,class:"gear-ring__watermark",alt:"Quinfall"},null,-1)),(l(!0),o(R,null,j(s(t).plannerData?.equipmentSlots,y=>(l(),o(R,{key:y.id},[!y.allowedClasses||y.allowedClasses.includes(s(t).selectedClass)?(l(),o("div",{key:0,class:F(["gear-ring__slot",y.positionClass])},[C(cs,{id:y.id,item:s(t).equipment[y.id],onClick:N,onEdit:n},{icon:G(()=>[e("img",{src:z(y.iconFallback),class:"planner-slot__fallback-img",alt:""},null,8,ta)]),_:2},1032,["id","item"])],2)):q("",!0)],64))),128))]),e("div",la,[L[7]||(L[7]=e("div",{class:"gearscore-label"},"GEARSCORE",-1)),e("div",aa,r(te.value),1)])]),e("div",na,[e("div",oa,[e("button",{class:F(["planner-tab",{"is-active":d.value==="attributes"}]),onClick:L[1]||(L[1]=y=>d.value="attributes")},r(s(u)("planner.tabs.attributes")),3),e("button",{class:F(["planner-tab",{"is-active":d.value==="skills"}]),onClick:L[2]||(L[2]=y=>d.value="skills")},r(s(u)("planner.tabs.skills")),3)]),oe(e("div",ia,[e("div",ra,[e("h3",null,r(s(u)("planner.attributes.title")),1),e("span",ca,r(s(u)("planner.attributes.counter",{current:s(t).totalAttributePoints,max:s(t).maxAttributePoints})),1)]),e("div",ua,[(l(!0),o(R,null,j(s(t).plannerData?.attributes,y=>(l(),Y($s,{key:y.id,id:y.id,title:s(u)("planner.attributes."+y.id),shortName:s(u)("planner.attributes."+y.id+"Short"),value:s(t).attributes[y.id],"onUpdate:value":P=>s(t).attributes[y.id]=P,max:y.max,bonusText:U(y.id)},null,8,["id","title","shortName","value","onUpdate:value","max","bonusText"]))),128))])],512),[[Ae,d.value==="attributes"]]),d.value==="skills"?(l(),o("div",da,[s(t).selectedClass?(l(),o("div",va,[e("div",_a,[e("label",ma,r(s(u)("planner.skills.selectSubclass")),1),C(Mt)]),e("div",pa,[C(ql)])])):(l(),o("div",ha,r(s(u)("planner.skills.selectWeaponPrompt")),1))])):q("",!0)]),e("div",ba,[e("div",fa,[e("div",ka,[C(s(Ge),{size:18}),e("h3",null,r(s(u)("planner.stats.title")),1)]),e("div",ya,[(l(!0),o(R,null,j(s(t).stats,(y,P)=>(l(),o("div",{class:"planner-stat-row",key:P},[e("span",Sa,r(s(u)("stats."+P.toLowerCase().replace(/ /g,"_"))),1),e("span",ga,r(y),1)]))),128)),Object.keys(s(t).stats).length===0?(l(),o("div",$a,r(s(u)("planner.stats.empty")),1)):q("",!0)])])])])):q("",!0)]),C(Bs,{visible:_.value,slotId:v.value,onClose:L[3]||(L[3]=y=>_.value=!1),onSelect:h},null,8,["visible","slotId"]),C(Pe,{visible:g.value,slotId:k.value,item:b.value,onClose:L[4]||(L[4]=y=>{g.value=!1,k.value=null,b.value=null})},null,8,["visible","slotId","item"])]))}}),qa=W(Ca,[["__scopeId","data-v-14ab7022"]]);export{qa as default};
