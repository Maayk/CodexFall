import{k as Me,r as g,c as D,d as X,l as r,y as _e,C as J,I as qe,j as w,u as s,p as M,m as e,t as _,x as K,Q as $e,A as o,o as pe,b as me,D as ue,B as j,G as ce,F as R,q as U,O as ne,w as xe,n as ae,v as ve,S as ze,U as Je,V as Fe}from"./vue-vendor-C7AO5cwj.js";import{c as oe,a as ie,u as se,b as Se,n as fe,_ as Y,X as ke,S as Ne,P as Pe,C as Ce,d as Re}from"./index-_r6uZm6_.js";import{A as ge}from"./AppButton-CS5_5SPF.js";import{T as Le,I as ye}from"./ItemTooltip-DC701197.js";import{A as Ve,S as Oe,G as Ee,C as Te}from"./AppInput-Bz2U0fM3.js";import{I as Ae}from"./ItemRow-voS17S4I.js";import{u as je}from"./i18n-BbCzF1Es.js";/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=oe("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=oe("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=oe("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=oe("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=oe("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=oe("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=oe("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),re=n=>{if(n)return{...n,upgradeLevel:n.upgradeLevel!==void 0?Math.min(15,Math.max(0,n.upgradeLevel)):0}},Z=Me("planner",()=>{const n=g([]),d=g(null),t=g(null),b=g(null),y=g(!1),f=g(null),v=g({}),S=g({}),k=g({}),h=g({}),u=g({}),I=async()=>{if(!y.value)try{const i=await fetch("/CodexFall/datas/plannerData.json");if(!i.ok)throw new Error("Failed to load planner data");f.value=await i.json(),f.value.equipmentSlots.forEach($=>{$.id in v.value||(v.value[$.id]=null)}),f.value.attributes.forEach($=>{$.id in k.value||(k.value[$.id]=0)}),y.value=!0}catch(l){console.error("Failed to load planner data",l)}},O=D(()=>Object.values(k.value).reduce((l,i)=>l+i,0)),B=D(()=>{var l;return!((l=f.value)!=null&&l.classes)||!t.value?null:f.value.classes.find(i=>i.id===t.value)||null}),E=D(()=>{const l=B.value;return!l||!l.subclasses||!b.value?null:l.subclasses.find(i=>i.id===b.value)||null}),F=D(()=>{var $;const l={},i=(c,z)=>{l[c]||(l[c]=0),l[c]+=z};return($=f.value)!=null&&$.attributes&&f.value.attributes.forEach(c=>{const z=k.value[c.id]||0;z>0&&c.bonuses.forEach(P=>{i(P.stat,z*P.multiplier)})}),Object.keys(v.value).forEach(c=>{var G,Ie;const z=c,P=v.value[z];if(!P)return;const A=((G=S.value[z])==null?void 0:G.stats)||{};(((Ie=f.value)==null?void 0:Ie.statKeys)||[]).forEach(be=>{let de;A[be.key]!==void 0?de=Number(A[be.key]):de=Number(P[be.key]),!isNaN(de)&&de>0&&i(be.label,de)})}),l});(()=>{const l=localStorage.getItem("quinfall_saved_builds");if(l)try{const i=JSON.parse(l);i.forEach($=>{$.equipmentOverrides&&Object.keys($.equipmentOverrides).forEach(c=>{$.equipmentOverrides[c]=re($.equipmentOverrides[c])})}),n.value=i}catch{console.error("Failed to parse builds from localStorage")}})();const N=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(n.value))},a=()=>{if(!d.value)return;const l=n.value.findIndex(i=>i.id===d.value);if(l!==-1){n.value[l].charClass=t.value,n.value[l].subclass=b.value,n.value[l].equipment=JSON.parse(JSON.stringify(v.value));const i=JSON.parse(JSON.stringify(S.value)),$={};Object.keys(i).forEach(c=>{$[c]=re(i[c])}),n.value[l].equipmentOverrides=$,n.value[l].attributes=JSON.parse(JSON.stringify(k.value)),n.value[l].skillLevels=JSON.parse(JSON.stringify(h.value)),n.value[l].skillStones=JSON.parse(JSON.stringify(u.value)),N()}},p=l=>{t.value=l,b.value=null,h.value={},u.value={},v.value.weapon=null,v.value.offhand=null,S.value.weapon=void 0,S.value.offhand=void 0,a()},m=l=>{b.value=l,a()},L=(l,i)=>{i<1&&(i=1),h.value[l]=i,a()},V=(l,i)=>{u.value[l]=i,a()},T=(l,i)=>{i=Math.max(0,Math.min(100,isNaN(i)?0:i)),k.value[l]=i,a()},Q=(l,i)=>{v.value[l]=i,S.value[l]=void 0,a()},te=l=>{v.value[l]=null,S.value[l]=void 0,a()},W=(l,i)=>{S.value[l]=re(i),a()},H=()=>{t.value=null,b.value=null,Object.keys(v.value).forEach(l=>{v.value[l]=null}),S.value={},Object.keys(k.value).forEach(l=>{k.value[l]=0}),h.value={},u.value={},d.value=null};return{savedBuilds:n,currentBuildId:d,selectedClass:t,equipment:v,equipmentOverrides:S,attributes:k,totalAttributePoints:O,currentClassData:B,currentSubclassData:E,stats:F,setClass:p,setSubclass:m,setSkillLevel:L,setSkillStone:V,setAttribute:T,equipItem:Q,unequipItem:te,setItemOverride:W,resetPlanner:H,saveCurrentBuild:l=>{const i=JSON.parse(JSON.stringify(S.value)),$={};Object.keys(i).forEach(z=>{$[z]=re(i[z])});const c={id:d.value||Date.now().toString(),name:l,charClass:t.value,subclass:b.value,equipment:JSON.parse(JSON.stringify(v.value)),equipmentOverrides:$,attributes:JSON.parse(JSON.stringify(k.value)),skillLevels:JSON.parse(JSON.stringify(h.value)),skillStones:JSON.parse(JSON.stringify(u.value))};if(d.value){const z=n.value.findIndex(P=>P.id===d.value);z!==-1?(c.name=l,n.value[z]=c):n.value.push(c)}else d.value=c.id,n.value.push(c);N()},loadBuild:l=>{const i=n.value.find(c=>c.id===l);if(!i)return;d.value=i.id,t.value=i.charClass,b.value=i.subclass||null,v.value=JSON.parse(JSON.stringify(i.equipment||{}));const $=JSON.parse(JSON.stringify(i.equipmentOverrides||{}));S.value={},Object.keys($).forEach(c=>{S.value[c]=re($[c])}),k.value=JSON.parse(JSON.stringify(i.attributes||{})),h.value=JSON.parse(JSON.stringify(i.skillLevels||{})),u.value=JSON.parse(JSON.stringify(i.skillStones||{}))},deleteBuild:l=>{n.value=n.value.filter(i=>i.id!==l),d.value===l&&H(),N()},newBuild:l=>{H();const i=Date.now().toString();d.value=i;const $=JSON.parse(JSON.stringify(S.value)),c={};Object.keys($).forEach(z=>{c[z]=re($[z])}),n.value.push({id:i,name:l,charClass:null,subclass:null,equipment:JSON.parse(JSON.stringify(v.value)),equipmentOverrides:c,attributes:JSON.parse(JSON.stringify(k.value)),skillLevels:{},skillStones:{}}),N()},isLoaded:y,plannerData:f,loadPlannerData:I,selectedSubclass:b,skillLevels:h,skillStones:u}}),Ye={key:0,class:"planner-slot__placeholder"},Qe=["src","alt"],We={key:2,class:"planner-slot__active-ring"},Ze={key:3,class:"planner-slot__actions"},es=["title"],ss=["title"],ts={key:4,class:"planner-slot__upgrade-badge"},ls=X({__name:"PlannerSlot",props:{id:{},item:{},active:{type:Boolean}},emits:["click","edit"],setup(n,{emit:d}){const t=n,b=d,y=ie(),f=Z(),{t:v}=se(),S=g(!1),k=g(0),h=g(0),u=x=>{t.item&&(S.value=!0,k.value=x.clientX,h.value=x.clientY)},I=()=>{S.value=!1},O=(x,N)=>{if(!x)return"#30363d";const a=f.equipmentOverrides[N];let p;return(a==null?void 0:a.grade)!==void 0?p=Se(a.grade):(a==null?void 0:a.rarity)!==void 0?p=a.rarity:p=fe(x),{1:"#e6edf3",2:"#56B65C",3:"#4F8EFF",4:"#C572FF",5:"#FFB347"}[p]||"#e6edf3"},B=x=>{x.stopPropagation(),t.item&&(S.value=!1,b("edit",t.id,t.item))},E=x=>{x.stopPropagation(),t.item&&(S.value=!1,f.unequipItem(t.id))},F=D(()=>{var x;return((x=f.equipmentOverrides[t.id])==null?void 0:x.upgradeLevel)||0});return(x,N)=>{var a,p,m,L,V,T;return o(),r("div",{class:J(["planner-slot",{"planner-slot--empty":!n.item,"planner-slot--active":n.active}]),style:_e({borderColor:n.item?`${O(n.item,n.id)}80`:"#30363d"}),onClick:N[0]||(N[0]=Q=>b("click",n.id)),onMousemove:u,onMouseleave:I},[n.item?(a=n.item)!=null&&a.icon1?(o(),r("img",{key:1,src:s(y).getIconUrl(n.item.icon1),class:"planner-slot__image",alt:s(v)("item.name")},null,8,Qe)):M("",!0):(o(),r("div",Ye,[qe(x.$slots,"icon",{},()=>[w(s(we),{size:20,class:"planner-slot__fallback-icon"})])])),n.active?(o(),r("div",We)):M("",!0),n.item?(o(),r("div",Ze,[e("button",{class:"planner-slot__action-btn edit-btn",onClick:B,title:s(v)("planner.slots.edit")},[w(s(Be),{size:12})],8,es),e("button",{class:"planner-slot__action-btn remove-btn",onClick:E,title:s(v)("planner.slots.remove")},[w(s(Le),{size:12})],8,ss)])):M("",!0),n.item&&F.value>0?(o(),r("div",ts,_(F.value),1)):M("",!0),(o(),K($e,{to:"body"},[n.item?(o(),K(ye,{key:0,item:n.item,visible:S.value,x:k.value,y:h.value,overrideGrade:(p=s(f).equipmentOverrides[n.id])==null?void 0:p.grade,overrideRarity:(m=s(f).equipmentOverrides[n.id])==null?void 0:m.rarity,overrideLevel:(L=s(f).equipmentOverrides[n.id])==null?void 0:L.level,overrideUpgradeLevel:(V=s(f).equipmentOverrides[n.id])==null?void 0:V.upgradeLevel,overrideStats:(T=s(f).equipmentOverrides[n.id])==null?void 0:T.stats,slotId:n.id},null,8,["item","visible","x","y","overrideGrade","overrideRarity","overrideLevel","overrideUpgradeLevel","overrideStats","slotId"])):M("",!0)]))],38)}}}),as=Y(ls,[["__scopeId","data-v-9a33d4c2"]]),ns={class:"planner-attr-card"},os={class:"planner-attr-card__header"},is={class:"planner-attr-card__title-group"},rs={class:"planner-attr-card__short"},cs={class:"planner-attr-card__title"},us={class:"planner-attr-card__value"},ds={class:"planner-attr-card__controls"},vs=["disabled"],_s={class:"planner-attr-card__slider-container"},ps=["max","value"],ms=["disabled"],hs={class:"planner-attr-card__bonus"},bs=X({__name:"PlannerAttributeCard",props:{id:{},title:{},shortName:{},value:{},max:{},bonusText:{}},emits:["update:value"],setup(n,{emit:d}){const t=n,b=d,y=D(()=>t.max??100),f=()=>{t.value>0&&b("update:value",t.value-1)},v=()=>{t.value<y.value&&b("update:value",t.value+1)},S=k=>{const h=k.target;let u=parseInt(h.value,10);isNaN(u)&&(u=0),u>y.value&&(u=y.value),u<0&&(u=0),b("update:value",u)};return(k,h)=>(o(),r("div",ns,[e("div",os,[e("div",is,[e("span",rs,_(n.shortName),1),e("span",cs,_(n.title),1)]),e("div",us,_(n.value),1)]),e("div",ds,[e("button",{class:"planner-attr-card__btn",onClick:f,disabled:n.value<=0},"-",8,vs),e("div",_s,[e("input",{type:"range",min:0,max:y.value,value:n.value,onInput:S,class:"planner-attr-card__slider"},null,40,ps),e("div",{class:"planner-attr-card__slider-track-fill",style:_e({width:`${n.value/y.value*100}%`})},null,4)]),e("button",{class:"planner-attr-card__btn",onClick:v,disabled:n.value>=y.value},"+",8,ms)]),e("div",hs,_(n.bonusText),1)]))}}),fs=Y(bs,[["__scopeId","data-v-f065bfe1"]]),ks={class:"item-modal__header"},ys={class:"item-modal__title"},Ss={key:0,class:"item-modal__slot-name"},gs={class:"item-modal__search-box"},$s={class:"item-modal__content"},Cs={key:0,class:"item-modal__list"},ws={key:1,class:"item-modal__empty"},Is=X({__name:"ItemSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(n,{emit:d}){const t=n,b=d,y=ie(),f=Z(),{t:v}=se(),S=g(""),k=g(null),h=g(0),u=g(0),I=(a,p)=>{k.value=p,h.value=a.clientX,u.value=a.clientY},O=()=>{k.value=null},B=()=>{S.value="",k.value=null,b("close")},E=a=>{if(!a)return[];switch(a){case"weapon":switch(f.selectedClass){case"Sword & Shield":return["Sword"];case"Two-Handed Sword":return["Two Handed Sword"];case"Spear":return["Spear"];case"Dual Axe":return["Dual Axe"];case"Dual Dagger":return["Dual Dagger"];case"War Hammer":return["War Hammer"];case"Bow":return["Bow"];case"Dual Crossbow":return["Dual Crossbow"];case"Arcane Staff":return["Arcane Staff"];case"Life Staff":return["Life Staff"];default:return[]}case"offhand":return f.selectedClass==="Sword & Shield"?["Shield"]:[];case"head":return["Helmet [Heavy]","Helmet [Light]","Helmet [Robe]"];case"chest":return["Armor [Heavy]","Armor [Light]","Armor [Robe]"];case"gloves":return["Gauntlet [Heavy]","Gauntlet [Light]","Gauntlet [Robe]"];case"boots":return["Boots [Heavy]","Boots [Light]","Boots [Robe]"];case"earring1":case"earring2":return["Earring"];case"ring1":case"ring2":return["Ring"];case"bracelet":return["Bracelet"];case"necklace":return["Necklace"];case"card1":case"card2":return["Power Card"];default:return[]}},F=D(()=>{if(!t.slotId)return[];const a=E(t.slotId);let p=y.items.filter(m=>a.includes(m.tip_loc_English)&&m.baslik_loc_English);if(S.value){const m=S.value.toLowerCase();p=p.filter(L=>{var W,H,le,ee;const V=((W=L.baslik_loc_English)==null?void 0:W.toLowerCase())||"",T=((H=L.baslik_loc_Turkish)==null?void 0:H.toLowerCase())||"",Q=((le=L.baslik_loc_Portuguese)==null?void 0:le.toLowerCase())||"",te=((ee=L.baslik_loc_Spanish)==null?void 0:ee.toLowerCase())||"";return V.includes(m)||T.includes(m)||Q.includes(m)||te.includes(m)})}return p.slice(0,100)}),x=a=>{b("select",a),B()},N=a=>{a.key==="Escape"&&t.visible&&B()};return pe(()=>window.addEventListener("keydown",N)),me(()=>window.removeEventListener("keydown",N)),(a,p)=>(o(),K($e,{to:"body"},[w(ue,{name:"modal"},{default:j(()=>[n.visible?(o(),r("div",{key:0,class:"item-modal-overlay",onClick:B},[e("div",{class:"item-modal",onClick:p[1]||(p[1]=ne(()=>{},["stop"]))},[e("div",ks,[e("h3",ys,[ce(_(s(v)("planner.modals.selector.title"))+" ",1),n.slotId?(o(),r("span",Ss,"("+_(n.slotId)+")",1)):M("",!0)]),e("button",{class:"item-modal__close-btn",onClick:B},[w(s(ke),{size:20})])]),e("div",gs,[w(Ve,{modelValue:S.value,"onUpdate:modelValue":p[0]||(p[0]=m=>S.value=m),placeholder:s(v)("planner.modals.common.search"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",$s,[F.value.length>0?(o(),r("div",Cs,[(o(!0),r(R,null,U(F.value,m=>(o(),K(Ae,{key:m.id,item:m,disableNavigation:!0,onClick:L=>x(m),onHover:I,onLeave:O},null,8,["item","onClick"]))),128))])):(o(),r("div",ws,[w(s(Ne),{size:32,class:"item-modal__empty-icon"}),e("p",null,_(s(v)("common.noResults")),1)]))])])])):M("",!0)]),_:1}),w(ye,{item:k.value,visible:!!k.value,x:h.value,y:u.value},null,8,["item","visible","x","y"])]))}}),Os=Y(Is,[["__scopeId","data-v-a986aa30"]]),xs={class:"item-card__header"},Ns={class:"header-top"},Ls={class:"rarity-tier"},Es={class:"rarity-label"},Bs={key:0,class:"tier-label"},Ds={class:"level-label"},Ms={class:"item-type"},qs={class:"header-main"},zs={class:"item-name"},Js={class:"header-icon"},Fs=["src"],Ps={class:"item-card__simulator compact"},Rs={class:"simulator-row"},Vs={class:"simulator-header"},Ts={class:"simulator-value"},As={class:"slider-wrapper"},js={class:"simulator-row level-upgrade-row"},Us={class:"level-upgrade-col"},Hs={class:"simulator-header"},Gs={class:"simulator-label"},Ks={class:"simulator-value"},Xs={class:"level-upgrade-col"},Ys={class:"simulator-header"},Qs={class:"simulator-label"},Ws={class:"simulator-value"},Zs=["value"],et={class:"item-card__body manual-edit-body"},st={class:"edit-note"},tt={class:"traits-section"},lt=["for"],at=["id","onUpdate:modelValue"],nt={class:"item-card__footer edit-footer"},ot=X({__name:"ItemEditModal",props:{visible:{type:Boolean},slotId:{},item:{}},emits:["close"],setup(n,{emit:d}){const t=n,b=d,y=Z(),f=ie(),{t:v,locale:S}=se(),k=g(0),h=g(1),u=g(0),I=g({}),O=D(()=>[{key:"physical_ap",label:v("stats.physical_ap")},{key:"physical_dp",label:v("stats.physical_dp")},{key:"magic_ap",label:v("stats.magic_ap")},{key:"magic_dp",label:v("stats.magic_dp")},{key:"hp",label:v("stats.hp")},{key:"mp",label:v("stats.mp")},{key:"accuracy",label:v("stats.accuracy")},{key:"evasion",label:v("stats.evasion")}]);xe(()=>t.visible,a=>{if(a&&t.item&&t.slotId){const p=y.equipmentOverrides[t.slotId];p?(k.value=p.grade!==void 0?p.grade:t.item.default_grade||0,h.value=p.level||t.item.level||1,u.value=p.upgradeLevel!==void 0?p.upgradeLevel:0,I.value={...p.stats},O.value.forEach(m=>{if(I.value[m.key]===void 0){const L=Number(t.item[m.key]);!isNaN(L)&&L>0&&(I.value[m.key]=L)}})):(k.value=t.item.default_grade||0,h.value=t.item.level||1,u.value=0,I.value={},O.value.forEach(m=>{const L=Number(t.item[m.key]);!isNaN(L)&&L>0&&(I.value[m.key]=L)}))}});const B=()=>{if(!t.slotId||u.value<0||u.value>15)return;const a={};Object.keys(I.value).forEach(m=>{I.value[m]>0&&(a[m]=I.value[m])});const p={grade:k.value,level:h.value,upgradeLevel:u.value,stats:a};y.setItemOverride(t.slotId,p),b("close")},E=a=>{a.key==="Escape"&&t.visible&&b("close")};pe(()=>window.addEventListener("keydown",E)),me(()=>window.removeEventListener("keydown",E));const F=a=>a?S.value==="pt-BR"?a.baslik_loc_Portuguese||a.baslik_loc_English||a.id:S.value==="en"?a.baslik_loc_English||a.id:S.value==="es"?a.baslik_loc_Spanish||a.baslik_loc_English||a.id:a[`baslik_loc_${S.value}`]||a.baslik_loc_English||a.id:"",x=a=>{const p=typeof a=="number"&&a>5?Se(a):typeof a=="number"?a:fe(a);return{1:"#e6edf3",2:"#3fb950",3:"#3f91dd",4:"#bc8cff",5:"#d29922"}[p]||"#e6edf3"},N=a=>{const p=typeof a=="number"&&a>5?Se(a):typeof a=="number"?a:fe(a),L={1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[p]||"common";return v(`rarity.${L}`)};return(a,p)=>(o(),K($e,{to:"body"},[w(ue,{name:"modal"},{default:j(()=>[n.visible?(o(),r("div",{key:0,class:"item-edit-overlay",onClick:p[6]||(p[6]=m=>b("close"))},[n.item?(o(),r("div",{key:0,class:"item-card-wrapper",onClick:p[5]||(p[5]=ne(()=>{},["stop"]))},[e("div",{class:"item-card",style:_e({"--rarity-color":x(k.value)})},[e("button",{class:"modal-close-btn",onClick:p[0]||(p[0]=m=>b("close"))},[w(s(ke),{size:16})]),e("div",xs,[e("div",Ns,[e("div",Ls,[e("span",Es,_(N(k.value)),1),n.item.tier?(o(),r("span",Bs,"T"+_(n.item.tier),1)):M("",!0),e("span",Ds,"Lv. "+_(h.value),1)]),e("div",Ms,_(n.item.tip_loc_English||s(v)("item.item")),1)]),e("div",qs,[e("h2",zs,_(F(n.item)),1)]),e("div",Js,[n.item.icon1?(o(),r("img",{key:0,src:s(f).getIconUrl(n.item.icon1)},null,8,Fs)):(o(),K(s(Pe),{key:1,size:40,class:"icon-fallback"}))])]),e("div",Ps,[e("div",Rs,[e("div",Vs,[p[7]||(p[7]=e("span",{class:"simulator-label"},"Grade",-1)),e("span",Ts,_(k.value)+" / 320",1)]),e("div",As,[ae(e("input",{type:"range",min:"0",max:"320","onUpdate:modelValue":p[1]||(p[1]=m=>k.value=m),class:"custom-slider",style:_e({"--track-color":x(k.value)})},null,4),[[ve,k.value,void 0,{number:!0}]]),p[8]||(p[8]=e("div",{class:"slider-ticks"},[e("span",null,"0"),e("span",null,"80"),e("span",null,"160"),e("span",null,"240"),e("span",null,"320")],-1))])]),e("div",js,[e("div",Us,[e("div",Hs,[e("span",Gs,_(s(v)("item.simulateLevel")),1),e("span",Ks,"Lv. "+_(h.value)+" / 150",1)]),ae(e("input",{type:"number",min:"1",max:"150","onUpdate:modelValue":p[2]||(p[2]=m=>h.value=m),class:"custom-level-input"},null,512),[[ve,h.value,void 0,{number:!0}]])]),e("div",Xs,[e("div",Ys,[e("span",Qs,_(s(v)("item.upgradeLevel")),1),e("span",Ws,"+"+_(u.value)+" / 15",1)]),ae(e("select",{"onUpdate:modelValue":p[3]||(p[3]=m=>u.value=m),class:"custom-level-input custom-select"},[(o(),r(R,null,U(16,m=>e("option",{key:m-1,value:m-1}," +"+_(m-1),9,Zs)),64))],512),[[ze,u.value,void 0,{number:!0}]])])])]),e("div",et,[e("div",st,_(s(v)("planner.modals.edit.alert")),1),e("div",tt,[(o(!0),r(R,null,U(O.value,m=>(o(),r("div",{key:m.key,class:"trait-row"},[e("label",{for:m.key,class:"trait-label"},"• "+_(m.label)+":",9,lt),ae(e("input",{id:m.key,type:"number","onUpdate:modelValue":L=>I.value[m.key]=L,class:"trait-input",min:"0",placeholder:"0"},null,8,at),[[ve,I.value[m.key],void 0,{number:!0}]])]))),128))])]),e("div",nt,[w(ge,{variant:"secondary",onClick:p[4]||(p[4]=m=>b("close"))},{default:j(()=>[ce(_(s(v)("common.cancel")),1)]),_:1}),w(ge,{variant:"primary",onClick:B},{icon:j(()=>[w(s(Ke),{size:16})]),default:j(()=>[ce(" "+_(s(v)("common.save")),1)]),_:1})])],4)])):M("",!0)])):M("",!0)]),_:1})]))}}),De=Y(ot,[["__scopeId","data-v-d083979b"]]),it={key:0,class:"header-content"},rt={class:"header-label"},ct={key:1,class:"header-content empty-content"},ut={class:"header-label"},dt={key:0,class:"class-selector__list"},vt=["onClick"],_t={class:"class-item__label"},pt=X({__name:"ClassSelector",setup(n){const d=Z(),{t}=se(),b=D(()=>{var u;return(u=d.plannerData)!=null&&u.classes?d.plannerData.classes.map(I=>({id:I.id,labelKey:I.labelKey,name:I.name})):[]}),y=g(!1),f=g(null),v=D(()=>d.selectedClass&&b.value.find(u=>u.id===d.selectedClass)||null),S=u=>{d.setClass(u),y.value=!1},k=()=>{y.value=!y.value},h=u=>{f.value&&!f.value.contains(u.target)&&(y.value=!1)};return pe(()=>{document.addEventListener("click",h)}),me(()=>{document.removeEventListener("click",h)}),(u,I)=>(o(),r("div",{class:"class-selector",ref_key:"dropdownRef",ref:f},[e("div",{class:J(["class-selector__header",{"is-open":y.value,"is-selected":!!v.value}]),onClick:k},[v.value?(o(),r("div",it,[e("span",rt,_(s(t)(v.value.name)),1)])):(o(),r("div",ct,[e("span",ut,_(s(t)("planner.class.placeholder")),1)])),w(s(Ce),{size:20,class:J(["chevron-icon",{rotate:y.value}])},null,8,["class"])],2),w(ue,{name:"dropdown"},{default:j(()=>[y.value?(o(),r("div",dt,[(o(!0),r(R,null,U(b.value,O=>(o(),r("button",{key:O.id,class:J(["class-item",{"is-active":s(d).selectedClass===O.id}]),onClick:B=>S(O.id)},[e("span",_t,_(s(t)(O.name)),1)],10,vt))),128))])):M("",!0)]),_:1})],512))}}),mt=Y(pt,[["__scopeId","data-v-0af48b10"]]),ht={key:0,class:"header-content"},bt={class:"header-label"},ft={key:1,class:"header-content empty-content"},kt={key:0,class:"header-label"},yt={key:1,class:"header-label"},St={key:0,class:"subclass-selector__list"},gt=["onClick"],$t={class:"subclass-item__label"},Ct=X({__name:"SubclassSelector",setup(n){const d=Z(),{t}=se(),b=g(!1),y=g(null),f=D(()=>!d.currentClassData||!d.currentClassData.subclasses?[]:d.currentClassData.subclasses.map(u=>({id:u.id,labelKey:u.labelKey,name:u.name}))),v=D(()=>d.selectedSubclass&&f.value.find(u=>u.id===d.selectedSubclass)||null),S=u=>{d.setSubclass(u),b.value=!1},k=()=>{f.value.length!==0&&(b.value=!b.value)},h=u=>{y.value&&!y.value.contains(u.target)&&(b.value=!1)};return pe(()=>document.addEventListener("click",h)),me(()=>document.removeEventListener("click",h)),(u,I)=>(o(),r("div",{class:J(["subclass-selector",{"is-disabled":f.value.length===0}]),ref_key:"dropdownRef",ref:y},[e("div",{class:J(["subclass-selector__header",{"is-open":b.value,"is-selected":!!v.value}]),onClick:k},[v.value?(o(),r("div",ht,[w(s(Oe),{class:"header-icon",size:16}),e("span",bt,_(s(t)(v.value.name)),1)])):(o(),r("div",ft,[f.value.length>0?(o(),r("span",kt,_(s(t)("planner.subclass.placeholder")),1)):(o(),r("span",yt,_(s(t)("planner.subclass.unavailable")),1))])),f.value.length>0?(o(),K(s(Ce),{key:2,size:16,class:J(["chevron-icon",{rotate:b.value}])},null,8,["class"])):M("",!0)],2),w(ue,{name:"dropdown"},{default:j(()=>[b.value?(o(),r("div",St,[(o(!0),r(R,null,U(f.value,O=>(o(),r("button",{key:O.id,class:J(["subclass-item",{"is-active":s(d).selectedSubclass===O.id}]),onClick:B=>S(O.id)},[w(s(Oe),{class:"subclass-item__icon",size:14}),e("span",$t,_(s(t)(O.name)),1)],10,gt))),128))])):M("",!0)]),_:1})],2))}}),wt=Y(Ct,[["__scopeId","data-v-bd5ac1a8"]]),It={class:"row-icon-col"},Ot={class:"skill-icon"},xt={class:"row-info-col"},Nt={class:"skill-name"},Lt={key:0,class:"level-num"},Et={class:"skill-level-ctrl"},Bt={class:"muted-label"},Dt={class:"ctrl-group"},Mt=["disabled"],qt=["disabled"],zt={class:"row-stats-col"},Jt={class:"muted-label"},Ft={class:"stats-val"},Pt={class:"highlight-blue"},Rt={class:"highlight-cyan"},Vt={class:"row-effects-col"},Tt={class:"muted-label"},At={class:"effects-list"},jt={class:"effect-text"},Ut={key:0,class:"effect-highlight"},Ht={key:0,class:"row-action-col"},Gt={class:"stone-slot-wrapper"},Kt=["title"],Xt=["src","alt"],Yt={key:0,class:"stone-slot-actions"},Qt=["title"],Wt=["title"],Zt=X({__name:"SkillNodeCard",props:{skill:{},index:{}},emits:["openStoneSelector","openStoneEditor"],setup(n,{emit:d}){const t=n,b=Z(),y=ie(),{t:f,locale:v}=je(),S=D(()=>{switch(v.value){case"pt-BR":return"Portuguese";case"es-ES":return"Spanish";default:return"English"}}),k=t.skill.maxLevel||25,h=D(()=>b.skillLevels[t.skill.id]||0),u=D(()=>b.skillStones[t.skill.id]),I=D(()=>!!u.value),O=D(()=>u.value?y.getItemById(u.value):null),B=D(()=>O.value?y.getIconUrl(O.value.icon1||O.value.icon):null),E=D(()=>u.value&&b.equipmentOverrides["stone_"+t.skill.id]||null),F=D(()=>{var l;if(!O.value)return"transparent";const q=((l=E.value)==null?void 0:l.rarity)??fe(O.value);return{1:"#30363d",2:"rgba(63, 185, 80, 0.4)",3:"rgba(88, 166, 255, 0.4)",4:"rgba(188, 140, 255, 0.4)",5:"rgba(227, 179, 65, 0.4)",6:"rgba(255, 123, 114, 0.4)"}[q]||"#30363d"}),x=()=>{h.value<k&&b.setSkillLevel(t.skill.id,h.value+1)},N=()=>{h.value>0&&b.setSkillLevel(t.skill.id,h.value-1)},a=D(()=>{const q=h.value;return q>=19?"rarity-epic":q>=10?"rarity-rare":q>=1?"rarity-uncommon":""}),p=q=>{const C=Math.max(1,h.value),l=C-1;if(q.template){let i=q.template;const $={};return q.params&&Object.entries(q.params).forEach(([c,z])=>{const P=(z.base||0)+(z.scaling||0)*l;$[c]=Number.isInteger(P)?P.toString():P.toFixed(1),i=i.replace(`{${c}}`,$[c])}),i.startsWith("planner.")?f(i,$):i}if(q.text){const i=q.text,$=q.scaling;if(!$||C<=1)return i;const c=$.match(/([+-]?\d+(?:\.\d+)?)/);if(!c)return i;const P=parseFloat(c[1])*l;let A=i;return $.includes("CD")||$.toLowerCase().includes("s")?(A=A.replace(/CD\s*([+-]?\d+(?:\.\d+)?)s/i,(he,G)=>"CD "+Number((parseFloat(G)+P).toFixed(1))+"s"),A===i&&(A=A.replace(/([+-]?\d+(?:\.\d+)?)s/,(he,G)=>Number((parseFloat(G)+P).toFixed(1))+"s"))):$.includes("%")?A=A.replace(/([+-]?\d+(?:\.\d+)?)%/,(he,G)=>Number((parseFloat(G)+P).toFixed(1))+"%"):A=A.replace(/([+-]?\d+(?:\.\d+)?)/,(he,G)=>Number((parseFloat(G)+P).toFixed(1)).toString()),A}return""},m=q=>q.scaling?q.scaling:q.params?Object.values(q.params).filter(C=>C.scaling!==0).map(C=>{const l=(C.scaling||0)>0?"+":"",i=q.template.includes("%")?"%":"";return`${l}${C.scaling}${i}/lvl`}).join(", "):null,L=g(null),V=g(0),T=g(0),Q=q=>{I.value&&O.value&&(L.value=O.value,V.value=q.clientX,T.value=q.clientY)},te=()=>{L.value=null},W=()=>{L.value=null,ee("openStoneSelector",t.skill.id)},H=()=>{L.value=null,ee("openStoneEditor",t.skill.id)},le=()=>{b.setSkillStone(t.skill.id,null),L.value=null},ee=d;return(q,C)=>{var l,i;return o(),r("div",{class:J(["clean-row-card",[{"is-active":h.value>0},a.value]])},[e("div",It,[e("div",Ot,[e("span",null,_(n.index+1),1)])]),e("div",xt,[e("h4",Nt,[ce(_(s(f)(n.skill.name))+" ",1),h.value>0?(o(),r("span",Lt," I")):M("",!0)]),e("div",Et,[e("span",Bt,_(s(f)("planner.skills.levelLabel")),1),e("div",Dt,[e("button",{class:"ctrl-btn",onClick:N,disabled:h.value===0},[w(s(He),{size:12})],8,Mt),e("span",{class:J(["ctrl-val",{"is-active-val":h.value>0}])},_(h.value>0?h.value:1)+" / "+_(s(k)),3),e("button",{class:"ctrl-btn",onClick:x,disabled:h.value===s(k)},[w(s(we),{size:12})],8,qt)])])]),e("div",zt,[e("div",Jt,_(s(f)("planner.skills.costCdLabel")),1),e("div",Ft,[e("span",Pt,_(n.skill.manaCost||n.skill.baseManaCost||0)+" MP",1),C[0]||(C[0]=e("span",{class:"separator"},"•",-1)),e("span",Rt,_(n.skill.cooldown||n.skill.baseCooldown||0)+"s",1)])]),e("div",Vt,[e("div",Tt,_(s(f)("planner.skills.effectsLabel")),1),e("div",At,[(o(!0),r(R,null,U(n.skill.effects,($,c)=>(o(),r("div",{class:"effect-line",key:c},[e("span",jt,_(p($)),1),m($)?(o(),r("span",Ut,_(m($)),1)):M("",!0)]))),128))])]),n.skill.hasStoneSlot?(o(),r("div",Ht,[e("div",Gt,[e("button",{class:J(["action-btn",{"has-gem":I.value}]),onClick:ne(W,["stop"]),title:I.value?"":s(f)("planner.skills.equipStone"),onMousemove:Q,onMouseleave:te},[B.value?(o(),r("img",{key:0,src:B.value,alt:((l=O.value)==null?void 0:l["baslik_loc_"+S.value])||((i=O.value)==null?void 0:i.baslik_loc_English),style:_e({borderColor:F.value})},null,12,Xt)):(o(),K(s(Ee),{key:1,size:20}))],42,Kt),I.value?(o(),r("div",Yt,[e("button",{class:"stone-action-btn edit-btn",onClick:ne(H,["stop"]),title:s(f)("planner.skills.changeStone")},[w(s(Be),{size:12})],8,Qt),e("button",{class:"stone-action-btn remove-btn",onClick:ne(le,["stop"]),title:s(f)("planner.skills.unsocketStone")},[w(s(Le),{size:12})],8,Wt)])):M("",!0)])])):M("",!0),w(ye,{item:L.value,visible:!!L.value,x:V.value,y:T.value,overrideRarity:L.value&&E.value?E.value.rarity:void 0,overrideLevel:L.value&&E.value?E.value.level:void 0,overrideStats:L.value&&E.value?E.value.stats:void 0},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])],2)}}}),el=Y(Zt,[["__scopeId","data-v-9a7f8e8f"]]),sl={class:"modal-header"},tl={class:"modal-title"},ll={class:"modal-search"},al={class:"modal-body"},nl={key:0,class:"empty-state"},ol={key:1,class:"item-grid"},il=["onClick","onMousemove"],rl=["src","alt"],cl={key:1,class:"item-card__fallback"},ul={class:"item-card__info"},dl=X({__name:"SkillStoneSelectorModal",props:{show:{type:Boolean},skillId:{}},emits:["close"],setup(n,{emit:d}){const t=n,b=d,y=ie(),f=Z(),{t:v}=se(),S=g(""),k=D(()=>y.items.filter(x=>x.tip_loc_English==="Skill Stone")),h=D(()=>{if(!S.value)return k.value;const x=S.value.toLowerCase();return k.value.filter(N=>{var L,V,T;const a=(L=N.baslik_loc_English||N.isim_loc_English||"")==null?void 0:L.toLowerCase(),p=(V=N.baslik_loc_Portuguese||N.isim_loc_Portuguese||"")==null?void 0:V.toLowerCase(),m=(T=N.baslik_loc_Spanish||N.isim_loc_Spanish||"")==null?void 0:T.toLowerCase();return a.includes(x)||p.includes(x)||m.includes(x)})}),u=x=>{t.skillId&&f.setSkillStone(t.skillId,x.id),I.value=null,b("close")},I=g(null),O=g(0),B=g(0),E=(x,N)=>{t.show&&(I.value=N,O.value=x.clientX,B.value=x.clientY)},F=()=>{t.show&&(I.value=null)};return xe(()=>t.show,x=>{x||(I.value=null)}),(x,N)=>(o(),r(R,null,[w(ue,{name:"modal"},{default:j(()=>[n.show?(o(),r("div",{key:0,class:"modal-overlay",onClick:N[3]||(N[3]=a=>b("close"))},[e("div",{class:"modal-content",onClick:N[2]||(N[2]=ne(()=>{},["stop"]))},[e("div",sl,[e("div",tl,[w(s(Ee),{size:20,class:"title-icon"}),N[4]||(N[4]=e("h3",null,"Equip Skill Stone",-1))]),e("button",{class:"icon-btn close-btn",onClick:N[0]||(N[0]=a=>b("close"))},[w(s(ke),{size:20})])]),e("div",ll,[w(s(Ne),{class:"search-icon",size:16}),ae(e("input",{type:"text","onUpdate:modelValue":N[1]||(N[1]=a=>S.value=a),placeholder:"Search for a skill stone...",class:"search-input",ref:"searchInput"},null,512),[[ve,S.value]])]),e("div",al,[h.value.length===0?(o(),r("div",nl," No skill stones found. ")):(o(),r("div",ol,[(o(!0),r(R,null,U(h.value,a=>(o(),r("button",{key:a.id,class:"item-card",onClick:p=>u(a),onMousemove:p=>E(p,a),onMouseleave:F},[e("div",{class:J(["item-card__icon","rarity-"+(a.quality||1)])},[a.icon1||a.icon?(o(),r("img",{key:0,src:s(y).getIconUrl(a.icon1||a.icon),alt:a.baslik_loc_English||a.isim_loc_English},null,8,rl)):(o(),r("div",cl))],2),e("div",ul,[e("span",{class:J(["item-name","text-rarity-"+(a.quality||1)])},_(a["baslik_loc_"+s(v)("lang_suffix")]||a["isim_loc_"+s(v)("lang_suffix")]||a.baslik_loc_English||a.isim_loc_English||a.id),3)])],40,il))),128))]))])])])):M("",!0)]),_:1}),w(ye,{item:I.value,visible:!!I.value,x:O.value,y:B.value},null,8,["item","visible","x","y"])],64))}}),vl=Y(dl,[["__scopeId","data-v-d51b71cb"]]),_l={class:"planner-skills"},pl={key:0,class:"planner-skills__empty"},ml={key:1,class:"planner-skills__content"},hl={key:0,class:"passive-banner"},bl={class:"passive-banner__header"},fl={class:"passive-tag"},kl={class:"passive-name"},yl={class:"passive-desc"},Sl={key:1,class:"skills-list"},gl={key:2,class:"planner-skills__empty"},$l=X({__name:"PlannerSkillsTab",setup(n){const d=Z(),t=ie(),{t:b}=se(),y=D(()=>d.currentSubclassData),f=g(!1),v=g(null),S=E=>{v.value=E,f.value=!0},k=()=>{f.value=!1,v.value=null},h=g(!1),u=g(null),I=D(()=>{if(!u.value)return null;const E=d.skillStones[u.value];return E?t.getItemById(E):null}),O=E=>{u.value=E,h.value=!0},B=()=>{h.value=!1,u.value=null};return(E,F)=>(o(),r("div",_l,[y.value?(o(),r("div",ml,[y.value.passive?(o(),r("div",hl,[e("div",bl,[e("span",fl,_(s(b)("planner.skills.passiveAbility")),1),e("h4",kl,_(s(b)(y.value.passive.name)),1)]),e("p",yl,_(s(b)(y.value.passive.description)),1)])):M("",!0),y.value.skills&&y.value.skills.length>0?(o(),r("div",Sl,[(o(!0),r(R,null,U(y.value.skills,(x,N)=>(o(),K(el,{key:x.id,skill:x,index:Number(N)+1,onOpenStoneSelector:S,onOpenStoneEditor:O},null,8,["skill","index"]))),128))])):(o(),r("div",gl,[e("p",null,_(s(b)("planner.skills.noSubclassSkills")),1)]))])):(o(),r("div",pl,[e("p",null,_(s(b)("planner.skills.emptySubclass")),1)])),w(vl,{show:f.value,skillId:v.value,onClose:k},null,8,["show","skillId"]),w(De,{visible:h.value,slotId:"stone_"+u.value,item:I.value,onClose:B},null,8,["visible","slotId","item"])]))}}),Cl=Y($l,[["__scopeId","data-v-79a2b1e7"]]),wl={class:"planner-page"},Il={class:"planner-page__container"},Ol={class:"planner-page__header"},xl={class:"header-left"},Nl={class:"planner-page__title"},Ll={key:0,class:"build-selector-box is-creating"},El=["placeholder"],Bl={class:"build-actions inline-actions"},Dl={key:0,class:"custom-dropdown-list"},Ml={key:0,class:"dropdown-item empty-state",disabled:""},ql=["onClick"],zl={key:0,class:"dropdown-item__class"},Jl={class:"build-actions"},Fl=["title"],Pl=["title"],Rl={class:"header-right"},Vl={key:0,class:"error-msg"},Tl={key:1,class:"planner-layout"},Al={class:"planner-layout__col planner-layout__col--equip"},jl={class:"gear-ring"},Ul=["src"],Hl={class:"gearscore-container"},Gl={class:"gearscore-value"},Kl={class:"planner-layout__col planner-layout__col--attrs"},Xl={class:"planner-tabs"},Yl={class:"tab-content"},Ql={class:"planner-section-title"},Wl={class:"planner-attr-counter"},Zl={class:"attr-grid"},ea={key:0,class:"tab-content"},sa={key:0},ta={style:{display:"flex",gap:"1rem","margin-bottom":"1.5rem"}},la={style:{color:"#8b949e",display:"flex","align-items":"center","font-size":"0.875rem"}},aa={style:{"margin-top":"1rem"}},na={key:1,style:{color:"#8b949e","text-align":"center","margin-top":"4rem"}},oa={class:"planner-layout__col planner-layout__col--stats"},ia={class:"planner-stats-panel"},ra={class:"planner-stats-panel__header"},ca={class:"planner-stats-panel__content"},ua={class:"planner-stat-label"},da={class:"planner-stat-value"},va={key:0,class:"planner-stat-empty"},_a=X({__name:"Planner",setup(n){const{t:d}=se(),t=Z(),b=ie(),y=g("attributes"),f=g(!1),v=g(null),S=g(!1),k=g(null),h=g(null),u=g(""),I=g(!1),O=g(""),B=g(!1),E=g(null),F=()=>{I.value||(B.value=!B.value)},x=C=>{E.value&&!E.value.contains(C.target)&&(B.value=!1)},N=C=>{if(!t.selectedClass){u.value=d("planner.attributes.errorClass"),setTimeout(()=>u.value="",3e3);return}v.value=C,f.value=!0},a=(C,l)=>{k.value=C,h.value=l,S.value=!0},p=C=>{v.value&&(C===null?t.unequipItem(v.value):(t.equipItem(v.value,C),k.value=v.value,h.value=C,S.value=!0))},m=()=>{t.resetPlanner(),O.value=""},L=C=>{C&&(t.loadBuild(C),B.value=!1)},V=()=>{I.value=!0,O.value=""},T=()=>{I.value=!1,O.value=""},Q=()=>{const C=O.value.trim();if(!C){u.value=d("planner.builds.errorName"),setTimeout(()=>u.value="",3e3);return}t.newBuild(C),I.value=!1,O.value=""},te=()=>{t.currentBuildId&&confirm(d("planner.builds.confirmDelete"))&&t.deleteBuild(t.currentBuildId)},W=D(()=>{var l;const C={};return(l=t.plannerData)!=null&&l.classes&&t.plannerData.classes.forEach(i=>{C[i.id]=i.labelKey}),C}),H=D(()=>{if(!t.currentBuildId)return t.savedBuilds.length?d("planner.builds.select"):d("planner.builds.none");const C=t.savedBuilds.find(l=>l.id===t.currentBuildId);return C?`${C.name} ${C.charClass?`(${d("planner.class.names."+(W.value[C.charClass]||C.charClass))})`:""}`:d("planner.builds.select")}),le=D(()=>{let C=0;return Object.keys(t.equipment).forEach(l=>{if(l==="card1"||l==="card2")return;const i=t.equipment[l];if(!i)return;const $=t.equipmentOverrides[l],c=($==null?void 0:$.grade)!==void 0?$.grade:i.grade;c!=null&&(C+=Number(c))}),C});pe(async()=>{await t.loadPlannerData(),await b.loadData(),document.addEventListener("click",x)}),me(()=>{document.removeEventListener("click",x)});const ee=C=>d(`planner.attributes.bonus.${C}`),q=C=>"/CodexFall/"+C.replace(/^\//,"");return(C,l)=>{var i,$;return o(),r("div",wl,[e("div",Il,[e("div",Ol,[e("div",xl,[e("h1",Nl,_(s(d)("nav.planner")),1),e("div",{class:"build-section-wrapper",ref_key:"buildDropdownRef",ref:E},[I.value?(o(),r("div",Ll,[ae(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=c=>O.value=c),placeholder:s(d)("planner.builds.namePlaceholder"),class:"build-input",onKeyup:Je(Q,["enter"])},null,40,El),[[ve,O.value]]),e("div",Bl,[e("button",{class:"icon-btn success-btn",onClick:Q},[w(s(Ue),{size:16})]),e("button",{class:"icon-btn",onClick:T},[w(s(ke),{size:16})])])])):(o(),r(R,{key:1},[e("div",{class:J(["build-selector-box",{"is-open":B.value,"is-selected":!!s(t).currentBuildId}]),onClick:F},[e("span",{class:J(["build-value",{placeholder:!s(t).currentBuildId}])},_(H.value),3),w(s(Ce),{size:16,class:J(["chevron-icon",{rotate:B.value}])},null,8,["class"])],2),w(ue,{name:"dropdown"},{default:j(()=>[B.value?(o(),r("div",Dl,[s(t).savedBuilds.length===0?(o(),r("button",Ml,_(s(d)("planner.builds.none")),1)):M("",!0),(o(!0),r(R,null,U(s(t).savedBuilds,c=>(o(),r("button",{key:c.id,class:J(["dropdown-item",{"is-active":s(t).currentBuildId===c.id}]),onClick:ne(z=>L(c.id),["stop"])},[ce(_(c.name)+" ",1),c.charClass?(o(),r("span",zl,"("+_(s(d)("planner.class.names."+(W.value[c.charClass]||c.charClass)))+")",1)):M("",!0)],10,ql))),128))])):M("",!0)]),_:1}),e("div",Jl,[e("button",{class:"icon-btn",title:s(d)("planner.builds.create"),onClick:V},[w(s(we),{size:16})],8,Fl),s(t).currentBuildId?(o(),r("button",{key:0,class:"icon-btn delete-btn",title:s(d)("common.delete"),onClick:te},[w(s(Xe),{size:16})],8,Pl)):M("",!0)])],64))],512)]),e("div",Rl,[w(mt),w(ge,{variant:"secondary",onClick:m,title:s(d)("planner.stats.clear")},{icon:j(()=>[w(s(Ge),{size:16})]),default:j(()=>[ce(" "+_(s(d)("planner.stats.clear")),1)]),_:1},8,["title"])])]),u.value?(o(),r("div",Vl,_(u.value),1)):M("",!0),s(t).isLoaded?(o(),r("div",Tl,[e("div",Al,[e("div",jl,[l[5]||(l[5]=e("div",{class:"gear-ring__bg-line"},null,-1)),l[6]||(l[6]=e("img",{src:Re,class:"gear-ring__watermark",alt:"Quinfall"},null,-1)),(o(!0),r(R,null,U((i=s(t).plannerData)==null?void 0:i.equipmentSlots,c=>(o(),r(R,{key:c.id},[!c.allowedClasses||c.allowedClasses.includes(s(t).selectedClass)?(o(),r("div",{key:0,class:J(["gear-ring__slot",c.positionClass])},[w(as,{id:c.id,item:s(t).equipment[c.id],onClick:N,onEdit:a},{icon:j(()=>[e("img",{src:q(c.iconFallback),class:"planner-slot__fallback-img",alt:""},null,8,Ul)]),_:2},1032,["id","item"])],2)):M("",!0)],64))),128))]),e("div",Hl,[l[7]||(l[7]=e("div",{class:"gearscore-label"},"GEARSCORE",-1)),e("div",Gl,_(le.value),1)])]),e("div",Kl,[e("div",Xl,[e("button",{class:J(["planner-tab",{"is-active":y.value==="attributes"}]),onClick:l[1]||(l[1]=c=>y.value="attributes")},_(s(d)("planner.tabs.attributes")),3),e("button",{class:J(["planner-tab",{"is-active":y.value==="skills"}]),onClick:l[2]||(l[2]=c=>y.value="skills")},_(s(d)("planner.tabs.skills")),3)]),ae(e("div",Yl,[e("div",Ql,[e("h3",null,_(s(d)("planner.attributes.title")),1),e("span",Wl,_(s(d)("planner.attributes.counter",{current:s(t).totalAttributePoints,max:600})),1)]),e("div",Zl,[(o(!0),r(R,null,U(($=s(t).plannerData)==null?void 0:$.attributes,c=>(o(),K(fs,{key:c.id,id:c.id,title:s(d)("planner.attributes."+c.id),shortName:s(d)("planner.attributes."+c.id+"Short"),value:s(t).attributes[c.id],"onUpdate:value":z=>s(t).attributes[c.id]=z,max:c.max,bonusText:ee(c.id)},null,8,["id","title","shortName","value","onUpdate:value","max","bonusText"]))),128))])],512),[[Fe,y.value==="attributes"]]),y.value==="skills"?(o(),r("div",ea,[s(t).selectedClass?(o(),r("div",sa,[e("div",ta,[e("label",la,_(s(d)("planner.skills.selectSubclass")),1),w(wt)]),e("div",aa,[w(Cl)])])):(o(),r("div",na,_(s(d)("planner.skills.selectWeaponPrompt")),1))])):M("",!0)]),e("div",oa,[e("div",ia,[e("div",ra,[w(s(Te),{size:18}),e("h3",null,_(s(d)("planner.stats.title")),1)]),e("div",ca,[(o(!0),r(R,null,U(s(t).stats,(c,z)=>(o(),r("div",{class:"planner-stat-row",key:z},[e("span",ua,_(s(d)("stats."+z.toLowerCase().replace(/ /g,"_"))),1),e("span",da,_(c),1)]))),128)),Object.keys(s(t).stats).length===0?(o(),r("div",va,_(s(d)("planner.stats.empty")),1)):M("",!0)])])])])):M("",!0)]),w(Os,{visible:f.value,slotId:v.value,onClose:l[3]||(l[3]=c=>f.value=!1),onSelect:p},null,8,["visible","slotId"]),w(De,{visible:S.value,slotId:k.value,item:h.value,onClose:l[4]||(l[4]=c=>{S.value=!1,k.value=null,h.value=null})},null,8,["visible","slotId","item"])])}}}),Sa=Y(_a,[["__scopeId","data-v-aba7bdb1"]]);export{Sa as default};
