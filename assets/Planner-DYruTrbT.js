import{d as Q,l,y as Y,C as O,I as De,j as p,u as s,p as x,m as e,t as n,F,q as A,x as X,Q as ke,r as L,c as q,A as t,o as de,b as ve,D as ne,B as j,G as ae,O as te,n as ie,S as Ie,w as xe,v as he,U as Pe,V as ze}from"./vue-vendor-C0EkfGRl.js";import{c as _e,a as le,u as ee,b as $e,n as ye,_ as W,X as re,S as Ce,C as fe,P as Re,d as Te}from"./index-Br6u7S01.js";import{u as Z,T as Ee,G as pe,S as ce,I as be}from"./ItemTooltip-B30-959Q.js";import{A as ge}from"./AppButton-Cd7z4eKP.js";import{A as Le,C as Ne}from"./AppInput-B1wMolAq.js";import{I as qe}from"./ItemRow-DqtYYwql.js";import{u as Fe}from"./i18n-CUek5RsN.js";const Oe=_e("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Ve=_e("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Be=_e("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const we=_e("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ae=_e("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ue=_e("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const He=_e("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ge={key:0,class:"planner-slot__placeholder"},Ke=["src","alt"],je={key:2,class:"planner-slot__active-ring"},Xe={key:3,class:"planner-slot__actions"},Ye=["title"],Qe=["title"],We={key:4,class:"planner-slot__upgrade-badge"},Je={key:5,class:"planner-slot__sockets"},Ze={class:"socket-dots"},es=["title"],ss=["title"],ts=Q({__name:"PlannerSlot",props:{id:{},item:{},active:{type:Boolean}},emits:["click","edit"],setup(o,{emit:h}){const a=o,f=h,v=le(),S=Z(),{t:b}=ee(),y=L(!1),c=L(0),k=L(0),u=d=>{a.item&&(y.value=!0,c.value=d.clientX,k.value=d.clientY)},E=()=>{y.value=!1},I=(d,r)=>{if(!d)return"#30363d";const i=S.equipmentOverrides[r];let P;i?.grade!==void 0?P=$e(i.grade):i?.rarity!==void 0?P=i.rarity:P=ye(d);const N=S.rarityColors;return N&&N[P]?.hex||"#e6edf3"},T=d=>{d.stopPropagation(),a.item&&(y.value=!1,f("edit",a.id,a.item))},z=d=>{d.stopPropagation(),a.item&&(y.value=!1,S.unequipItem(a.id))},U=q(()=>S.equipmentOverrides[a.id]?.upgradeLevel||0),M=q(()=>S.equipmentSockets[a.id]),D=q(()=>S.isSocketsEnabled(a.id)),m=q(()=>{if(!D.value)return!1;const d=M.value;return d?d.powerStones.some(r=>r!==null)||d.talisman!==null:!1}),_=q(()=>{const d=M.value?.talisman?.rarity;if(!d)return"#484f58";switch(d){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#484f58"}});return(d,r)=>(t(),l("div",{class:O(["planner-slot",{"planner-slot--empty":!o.item,"planner-slot--active":o.active}]),style:Y({borderColor:o.item?`${I(o.item,o.id)}80`:"#30363d"}),onClick:r[0]||(r[0]=i=>f("click",o.id)),onMousemove:u,onMouseleave:E},[o.item?o.item?.icon1?(t(),l("img",{key:1,src:s(v).getIconUrl(o.item.icon1),class:"planner-slot__image",alt:s(b)("item.name")},null,8,Ke)):x("",!0):(t(),l("div",Ge,[De(d.$slots,"icon",{},()=>[p(s(we),{size:20,class:"planner-slot__fallback-icon"})])])),o.active?(t(),l("div",je)):x("",!0),o.item?(t(),l("div",Xe,[e("button",{class:"planner-slot__action-btn edit-btn",onClick:T,title:s(b)("planner.slots.edit")},[p(s(Be),{size:12})],8,Ye),e("button",{class:"planner-slot__action-btn remove-btn",onClick:z,title:s(b)("planner.slots.remove")},[p(s(Ee),{size:12})],8,Qe)])):x("",!0),o.item&&U.value>0?(t(),l("div",We,n(U.value),1)):x("",!0),o.item&&m.value?(t(),l("div",Je,[e("div",Ze,[(t(!0),l(F,null,A(M.value?.powerStones,(i,P)=>(t(),l("div",{key:"ps-"+P,class:O(["socket-dot",{"socket-dot--filled":i!==null}]),title:i?"Power Stone":"Empty Socket"},[p(s(pe),{size:6})],10,es))),128))]),M.value?.talisman?(t(),l("div",{key:0,class:"socket-talisman",style:Y({color:_.value}),title:M.value.talisman.id+" ("+M.value.talisman.rarity+")"},[p(s(ce),{size:8})],12,ss)):x("",!0)])):x("",!0),(t(),X(ke,{to:"body"},[o.item?(t(),X(be,{key:0,item:o.item,visible:y.value,x:c.value,y:k.value,overrideGrade:s(S).equipmentOverrides[o.id]?.grade,overrideRarity:s(S).equipmentOverrides[o.id]?.rarity,overrideLevel:s(S).equipmentOverrides[o.id]?.level,overrideUpgradeLevel:s(S).equipmentOverrides[o.id]?.upgradeLevel,overrideStats:s(S).equipmentOverrides[o.id]?.stats,slotId:o.id},null,8,["item","visible","x","y","overrideGrade","overrideRarity","overrideLevel","overrideUpgradeLevel","overrideStats","slotId"])):x("",!0)]))],38))}}),ls=W(ts,[["__scopeId","data-v-33246955"]]),as={class:"planner-attr-card"},ns={class:"planner-attr-card__header"},os={class:"planner-attr-card__title-group"},is={class:"planner-attr-card__short"},cs={class:"planner-attr-card__title"},rs={class:"planner-attr-card__value"},us={class:"planner-attr-card__controls"},ds=["disabled"],vs={class:"planner-attr-card__slider-container"},_s=["max","value"],ms=["disabled"],ps={class:"planner-attr-card__bonus"},hs=Q({__name:"PlannerAttributeCard",props:{id:{},title:{},shortName:{},value:{},max:{},bonusText:{}},emits:["update:value"],setup(o,{emit:h}){const a=o,f=h,v=q(()=>a.max??100),S=()=>{a.value>0&&f("update:value",a.value-1)},b=()=>{a.value<v.value&&f("update:value",a.value+1)},y=c=>{const k=c.target;let u=parseInt(k.value,10);isNaN(u)&&(u=0),u>v.value&&(u=v.value),u<0&&(u=0),f("update:value",u)};return(c,k)=>(t(),l("div",as,[e("div",ns,[e("div",os,[e("span",is,n(o.shortName),1),e("span",cs,n(o.title),1)]),e("div",rs,n(o.value),1)]),e("div",us,[e("button",{class:"planner-attr-card__btn",onClick:S,disabled:o.value<=0},"-",8,ds),e("div",vs,[e("input",{type:"range",min:0,max:v.value,value:o.value,onInput:y,class:"planner-attr-card__slider"},null,40,_s),e("div",{class:"planner-attr-card__slider-track-fill",style:Y({width:`${o.value/v.value*100}%`})},null,4)]),e("button",{class:"planner-attr-card__btn",onClick:b,disabled:o.value>=v.value},"+",8,ms)]),e("div",ps,n(o.bonusText),1)]))}}),ks=W(hs,[["__scopeId","data-v-f065bfe1"]]),bs={class:"item-modal__header"},ys={class:"item-modal__title"},fs={key:0,class:"item-modal__slot-name"},Ss={class:"item-modal__search-box"},$s={class:"item-modal__content"},gs={key:0,class:"item-modal__list"},Cs={key:1,class:"item-modal__empty"},ws=Q({__name:"ItemSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(o,{emit:h}){const a=o,f=h,v=le(),S=Z(),{t:b}=ee(),y=L(""),c=L(null),k=L(0),u=L(0),E=(m,_)=>{c.value=_,k.value=m.clientX,u.value=m.clientY},I=()=>{c.value=null},T=()=>{y.value="",c.value=null,f("close")},z=m=>{if(!m)return[];switch(m){case"weapon":switch(S.selectedClass){case"Sword & Shield":return["Sword"];case"Two-Handed Sword":return["Two Handed Sword"];case"Spear":return["Spear"];case"Dual Axe":return["Dual Axe"];case"Dual Dagger":return["Dual Dagger"];case"War Hammer":return["War Hammer"];case"Bow":return["Bow"];case"Dual Crossbow":return["Dual Crossbow"];case"Arcane Staff":return["Arcane Staff"];case"Life Staff":return["Life Staff"];default:return[]}case"offhand":return S.selectedClass==="Sword & Shield"?["Shield"]:[];case"head":return["Helmet [Heavy]","Helmet [Light]","Helmet [Robe]"];case"chest":return["Armor [Heavy]","Armor [Light]","Armor [Robe]"];case"gloves":return["Gauntlet [Heavy]","Gauntlet [Light]","Gauntlet [Robe]"];case"boots":return["Boots [Heavy]","Boots [Light]","Boots [Robe]"];case"earring1":case"earring2":return["Earring"];case"ring1":case"ring2":return["Ring"];case"bracelet":return["Bracelet"];case"necklace":return["Necklace"];case"card1":case"card2":return["Power Card"];default:return[]}},U=q(()=>{if(!a.slotId)return[];const m=z(a.slotId);let _=v.items.filter(d=>m.includes(d.tip_loc_English)&&d.baslik_loc_English);if(y.value){const d=y.value.toLowerCase();_=_.filter(r=>{const i=r.baslik_loc_English?.toLowerCase()||"",P=r.baslik_loc_Turkish?.toLowerCase()||"",N=r.baslik_loc_Portuguese?.toLowerCase()||"",K=r.baslik_loc_Spanish?.toLowerCase()||"";return i.includes(d)||P.includes(d)||N.includes(d)||K.includes(d)})}return _.slice(0,100)}),M=m=>{I(),f("select",m),T()},D=m=>{m.key==="Escape"&&a.visible&&T()};return de(()=>window.addEventListener("keydown",D)),ve(()=>window.removeEventListener("keydown",D)),(m,_)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"item-modal-overlay",onClick:T},[e("div",{class:"item-modal",onClick:_[1]||(_[1]=te(()=>{},["stop"]))},[e("div",bs,[e("h3",ys,[ae(n(s(b)("planner.modals.selector.title"))+" ",1),o.slotId?(t(),l("span",fs,"("+n(o.slotId)+")",1)):x("",!0)]),e("button",{class:"item-modal__close-btn",onClick:T},[p(s(re),{size:20})])]),e("div",Ss,[p(Le,{modelValue:y.value,"onUpdate:modelValue":_[0]||(_[0]=d=>y.value=d),placeholder:s(b)("planner.modals.common.search"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",$s,[U.value.length>0?(t(),l("div",gs,[(t(!0),l(F,null,A(U.value,d=>(t(),X(qe,{key:d.id,item:d,disableNavigation:!0,onClick:r=>M(d),onHover:E,onLeave:I},null,8,["item","onClick"]))),128))])):(t(),l("div",Cs,[p(s(Ce),{size:32,class:"item-modal__empty-icon"}),e("p",null,n(s(b)("common.noResults")),1)]))]),p(be,{item:c.value,visible:!!c.value,x:k.value,y:u.value},null,8,["item","visible","x","y"])])])):x("",!0)]),_:1})]))}}),Is=W(ws,[["__scopeId","data-v-9e9fb7dd"]]),xs={class:"socket-bar"},Es={class:"socket-bar__label"},Ls={class:"socket-bar__slots"},Bs=["title","onClick"],Ms=["src","alt"],Ds=["onClick"],Ps=["title"],zs={key:0,class:"socket-bar__details"},Rs={class:"socket-detail__name"},Ts={class:"socket-detail__desc"},Ns={key:0,class:"socket-detail socket-detail--talisman"},qs={class:"socket-detail__rarity"},Fs=Q({__name:"SocketBar",props:{slotId:{}},emits:["open-power-stone","open-talisman"],setup(o,{emit:h}){const a=o,f=h,v=Z(),S=le(),{t:b,locale:y}=ee(),c=q(()=>v.equipmentSockets[a.slotId]),k=q(()=>v.socketConfig.maxPowerStones),u=m=>m?S.getItemById(m):null,E=m=>{const _=u(m);return _?y.value==="pt-BR"?_.baslik_loc_Portuguese||_.baslik_loc_English||_.id:y.value==="en"?_.baslik_loc_English||_.id:y.value==="es"?_.baslik_loc_Spanish||_.baslik_loc_English||_.id:_[`baslik_loc_${y.value}`]||_.baslik_loc_English||_.id:""},I=m=>{const _=u(m);return _?y.value==="pt-BR"?_.aciklama_loc_Portuguese||_.aciklama_loc_English||"":y.value==="en"?_.aciklama_loc_English||"":y.value==="es"?_.aciklama_loc_Spanish||_.aciklama_loc_English||"":_[`aciklama_loc_${y.value}`]||_.aciklama_loc_English||"":""},T=m=>{c.value?.powerStones[m]||f("open-power-stone",a.slotId,m)},z=(m,_)=>{m.stopPropagation(),v.removePowerStone(a.slotId,_)},U=()=>{c.value?.talisman||f("open-talisman",a.slotId)},M=m=>{m.stopPropagation(),v.removeTalisman(a.slotId)},D=q(()=>{const m=c.value?.talisman?.rarity;if(!m)return"#484f58";switch(m){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#484f58"}});return(m,_)=>(t(),l("div",xs,[e("div",Es,[p(s(pe),{size:12}),e("span",null,n(s(b)("planner.sockets.title")),1)]),e("div",Ls,[(t(!0),l(F,null,A(k.value,d=>(t(),l("div",{key:"ps-"+d,class:O(["socket-slot socket-slot--power-stone",{"socket-slot--filled":c.value?.powerStones[d-1]}]),title:c.value?.powerStones[d-1]?E(c.value.powerStones[d-1]):s(b)("planner.sockets.powerStone")+" "+d,onClick:r=>T(d-1)},[c.value?.powerStones[d-1]?(t(),l(F,{key:0},[u(c.value.powerStones[d-1])?.icon1?(t(),l("img",{key:0,src:s(S).getIconUrl(u(c.value.powerStones[d-1]).icon1),class:"socket-slot__icon",alt:E(c.value.powerStones[d-1])},null,8,Ms)):x("",!0),e("button",{class:"socket-slot__remove",onClick:r=>z(r,d-1)},[p(s(re),{size:8})],8,Ds)],64)):(t(),X(s(pe),{key:1,size:12,class:"socket-slot__placeholder"}))],10,Bs))),128)),_[1]||(_[1]=e("div",{class:"socket-bar__divider"},null,-1)),e("div",{class:O(["socket-slot socket-slot--talisman",{"socket-slot--filled":c.value?.talisman}]),style:Y(c.value?.talisman?{borderColor:D.value}:{}),title:c.value?.talisman?c.value.talisman.id+" ("+s(b)("rarity."+c.value.talisman.rarity)+")":s(b)("planner.sockets.talisman"),onClick:U},[c.value?.talisman?(t(),l(F,{key:0},[p(s(ce),{size:12,style:Y({color:D.value})},null,8,["style"]),e("button",{class:"socket-slot__remove",onClick:_[0]||(_[0]=d=>M(d))},[p(s(re),{size:8})])],64)):(t(),X(s(ce),{key:1,size:12,class:"socket-slot__placeholder"}))],14,Ps)]),c.value?(t(),l("div",zs,[(t(!0),l(F,null,A(c.value.powerStones,(d,r)=>ie((t(),l("div",{key:"detail-"+r,class:"socket-detail"},[e("span",Rs,n(E(d)),1),e("span",Ts,n(I(d)),1)])),[[Ie,d]])),128)),c.value.talisman?(t(),l("div",Ns,[p(s(ce),{size:10,style:Y({color:D.value})},null,8,["style"]),e("span",{class:"socket-detail__name",style:Y({color:D.value})},n(c.value.talisman.id),5),e("span",qs,n(s(b)("rarity."+c.value.talisman.rarity)),1)])):x("",!0)])):x("",!0)]))}}),Os=W(Fs,[["__scopeId","data-v-f960112f"]]),Vs={class:"ps-modal__header"},As={class:"ps-modal__title"},Us={key:0,class:"ps-modal__slot-info"},Hs={class:"ps-modal__search-box"},Gs={class:"ps-modal__content"},Ks={key:0,class:"ps-modal__list"},js=["onClick","onMousemove"],Xs={class:"ps-item__icon-wrap"},Ys=["src","alt"],Qs={class:"ps-item__info"},Ws={class:"ps-item__desc"},Js={key:0,class:"ps-item__stats"},Zs={key:1,class:"ps-modal__empty"},et=Q({__name:"PowerStoneSelectorModal",props:{visible:{type:Boolean},slotId:{},socketIndex:{}},emits:["close","select"],setup(o,{emit:h}){const a=o,f=h,v=le(),S=Z(),{t:b,locale:y}=ee(),c=L(""),k=L(null),u=L(0),E=L(0),I=(i,P)=>{k.value=P,u.value=i.clientX,E.value=i.clientY},T=()=>{k.value=null},z=()=>{c.value="",k.value=null,f("close")},U=q(()=>{let i=v.items.filter(P=>P.tip_loc_English==="Power Stone"&&P.baslik_loc_English);if(c.value){const P=c.value.toLowerCase();i=i.filter(N=>{const K=N.baslik_loc_English?.toLowerCase()||"",w=N.baslik_loc_Portuguese?.toLowerCase()||"",B=N.baslik_loc_Spanish?.toLowerCase()||"";return K.includes(P)||w.includes(P)||B.includes(P)})}return i.sort((P,N)=>(P.default_grade||0)-(N.default_grade||0)),i}),M=i=>i?y.value==="pt-BR"?i.baslik_loc_Portuguese||i.baslik_loc_English||i.id:y.value==="en"?i.baslik_loc_English||i.id:y.value==="es"?i.baslik_loc_Spanish||i.baslik_loc_English||i.id:i[`baslik_loc_${y.value}`]||i.baslik_loc_English||i.id:"",D=i=>i?y.value==="pt-BR"?i.aciklama_loc_Portuguese||i.aciklama_loc_English||"":y.value==="en"?i.aciklama_loc_English||"":y.value==="es"?i.aciklama_loc_Spanish||i.aciklama_loc_English||"":i[`aciklama_loc_${y.value}`]||i.aciklama_loc_English||"":"",m=i=>{const P=S.rarityColors;return P&&P[i]?.hex||"#e6edf3"},_=i=>{T(),f("select",i.id),z()},d=i=>{const P=S.powerStoneStatsMap[i];return P?Object.entries(P).map(([N,K])=>`${b("stats."+N)}: +${K}%`).join(", "):""},r=i=>{i.key==="Escape"&&a.visible&&z()};return de(()=>window.addEventListener("keydown",r)),ve(()=>window.removeEventListener("keydown",r)),(i,P)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"ps-modal-overlay",onClick:z},[e("div",{class:"ps-modal",onClick:P[1]||(P[1]=te(()=>{},["stop"]))},[e("div",Vs,[e("h3",As,[p(s(pe),{size:18}),ae(" "+n(s(b)("planner.sockets.powerStone"))+" ",1),o.slotId?(t(),l("span",Us,n(o.slotId)+" — "+n(s(b)("planner.sockets.title"))+" "+n(o.socketIndex+1),1)):x("",!0)]),e("button",{class:"ps-modal__close-btn",onClick:z},[p(s(re),{size:20})])]),e("div",Hs,[p(Le,{modelValue:c.value,"onUpdate:modelValue":P[0]||(P[0]=N=>c.value=N),placeholder:s(b)("codex.searchPlaceholder"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",Gs,[U.value.length>0?(t(),l("div",Ks,[(t(!0),l(F,null,A(U.value,N=>(t(),l("div",{key:N.id,class:"ps-item",onClick:K=>_(N),onMousemove:K=>I(K,N),onMouseleave:T},[e("div",Xs,[N.icon1?(t(),l("img",{key:0,src:s(v).getIconUrl(N.icon1),class:"ps-item__icon",alt:M(N)},null,8,Ys)):x("",!0)]),e("div",Qs,[e("span",{class:"ps-item__name",style:Y({color:m(N.default_grade)})},n(M(N)),5),e("span",Ws,n(D(N)),1),d(N.id)?(t(),l("span",Js,n(d(N.id)),1)):x("",!0)])],40,js))),128))])):(t(),l("div",Zs,[p(s(Ce),{size:32,class:"ps-modal__empty-icon"}),e("p",null,n(s(b)("common.noResults")),1)]))]),p(be,{item:k.value,visible:!!k.value,x:u.value,y:E.value},null,8,["item","visible","x","y"])])])):x("",!0)]),_:1})]))}}),st=W(et,[["__scopeId","data-v-b2a2132d"]]),tt={class:"talisman-modal__header"},lt={class:"talisman-modal__title"},at={key:0,class:"talisman-modal__slot-info"},nt={class:"talisman-modal__tabs"},ot=["onClick"],it={class:"talisman-modal__content"},ct={key:0,class:"talisman-modal__list"},rt=["onClick"],ut={class:"talisman-set__info"},dt={class:"talisman-set__icon-wrapper"},vt=["src","alt"],_t={key:1,class:"talisman-set__icon-fallback"},mt={class:"talisman-set__names"},pt={class:"talisman-set__name"},ht={class:"talisman-set__talisman"},kt={class:"talisman-set__meta"},bt={key:0,class:"talisman-set__count"},yt={key:0,class:"talisman-set__details"},ft={class:"talisman-set__bonuses"},St={class:"bonus-tier__label"},$t={class:"bonus-tier__stats"},gt={class:"bonus-tier__label"},Ct={class:"bonus-tier__stats"},wt={class:"bonus-tier__label"},It={class:"bonus-tier__stats"},xt=["onClick"],Et={key:1,class:"talisman-modal__empty"},Lt=Q({__name:"TalismanSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(o,{emit:h}){const{t:a,locale:f}=ee(),v=le(),S=o,b=h,y=Z(),c=L("uncommon"),k=L(null),u=[{key:"uncommon",label:"Uncommon",color:"#56B65C"},{key:"rare",label:"Rare",color:"#4F8EFF"},{key:"legendary",label:"Legendary",color:"#FFD700"}],E={"Sovereign's Legacy":"23001","Ravager's Dominion":"23002","Divine Aegis":"23003",Tempestbound:"23004",Bladeweaver:"23005",Spellfire:"23006","Astral Conflux":"23007","Seraphic Grace":"23008","Fortress of Valor":"23009",Dragonclaw:"23010","Eldritch Catalyst":"23011","Divine Harmony":"23012"},I=q(()=>y.plannerData?.setBonuses?(y.plannerData.setBonuses[c.value]||[]).map(d=>{const r=E[d.talisman],i=r?v.getItemById(r):null,P=f.value==="pt-BR"?"Portuguese":f.value==="es-ES"?"Spanish":"English",N=i?i[`baslik_loc_${P}`]:null;return{...d,itemId:r,itemIcon:i?v.getIconUrl(i.icon1):null,dbTitle:N}}):[]),T=_=>{k.value=k.value===_?null:_},z=_=>{b("select",{id:_.talisman,rarity:c.value}),U()},U=()=>{k.value=null,b("close")},M=(_,d)=>{let r=0;for(const i of Object.values(y.equipmentSockets))i?.talisman&&i.talisman.id===_&&i.talisman.rarity===d&&r++;return r},D=_=>Object.entries(_).map(([d,r])=>({stat:a("stats."+d),value:r})),m=_=>{_.key==="Escape"&&S.visible&&U()};return de(()=>window.addEventListener("keydown",m)),ve(()=>window.removeEventListener("keydown",m)),(_,d)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"talisman-modal-overlay",onClick:U},[e("div",{class:"talisman-modal",onClick:d[0]||(d[0]=te(()=>{},["stop"]))},[e("div",tt,[e("h3",lt,[p(s(ce),{size:18}),ae(" "+n(s(a)("planner.sockets.talisman"))+" ",1),o.slotId?(t(),l("span",at," ("+n(o.slotId)+") ",1)):x("",!0)]),e("button",{class:"talisman-modal__close-btn",onClick:U},[p(s(re),{size:20})])]),e("div",nt,[(t(),l(F,null,A(u,r=>e("button",{key:r.key,class:O(["rarity-tab",{"is-active":c.value===r.key}]),style:Y(c.value===r.key?{color:r.color,borderColor:r.color}:{}),onClick:i=>{c.value=r.key,k.value=null}},n(s(a)("rarity."+r.key)),15,ot)),64))]),e("div",it,[I.value.length>0?(t(),l("div",ct,[(t(!0),l(F,null,A(I.value,r=>(t(),l("div",{key:r.set_name,class:O(["talisman-set",{"is-expanded":k.value===r.set_name}]),style:Y(k.value===r.set_name?{borderColor:u.find(i=>i.key===c.value)?.color+"66"}:{})},[e("div",{class:"talisman-set__header",onClick:i=>T(r.set_name)},[e("div",ut,[e("div",dt,[r.itemIcon?(t(),l("img",{key:0,src:r.itemIcon,alt:r.set_name,class:"talisman-set__icon"},null,8,vt)):(t(),l("div",_t,[p(s(ce),{size:20})]))]),e("div",mt,[e("span",pt,n(r.dbTitle||r.set_name),1),e("span",ht,n(r.talisman),1)]),e("div",kt,[M(r.talisman,c.value)>0?(t(),l("span",bt,n(s(a)("planner.sockets.equipped"))+": "+n(M(r.talisman,c.value))+"/4 ",1)):x("",!0)])]),p(s(fe),{size:16,class:O(["talisman-set__chevron",{"is-open":k.value===r.set_name}])},null,8,["class"])],8,rt),p(ne,{name:"expand"},{default:j(()=>[k.value===r.set_name?(t(),l("div",yt,[e("div",ft,[r.bonus_2?(t(),l("div",{key:0,class:O(["bonus-tier",{"is-active":M(r.talisman,c.value)>=2}])},[e("span",St,"2 "+n(s(a)("planner.sockets.pieces")),1),e("div",$t,[(t(!0),l(F,null,A(D(r.bonus_2),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):x("",!0),r.bonus_3?(t(),l("div",{key:1,class:O(["bonus-tier",{"is-active":M(r.talisman,c.value)>=3}])},[e("span",gt,"3 "+n(s(a)("planner.sockets.pieces")),1),e("div",Ct,[(t(!0),l(F,null,A(D(r.bonus_3),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):x("",!0),r.bonus_4?(t(),l("div",{key:2,class:O(["bonus-tier",{"is-active":M(r.talisman,c.value)>=4}])},[e("span",wt,"4 "+n(s(a)("planner.sockets.pieces")),1),e("div",It,[(t(!0),l(F,null,A(D(r.bonus_4),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):x("",!0)]),e("button",{class:"talisman-set__select-btn",onClick:te(i=>z(r),["stop"])},n(s(a)("planner.sockets.equipTalisman",{name:r.talisman})),9,xt)])):x("",!0)]),_:2},1024)],6))),128))])):(t(),l("div",Et,[...d[1]||(d[1]=[e("p",null,"No sets available",-1)])]))])])])):x("",!0)]),_:1})]))}}),Bt=W(Lt,[["__scopeId","data-v-da995438"]]),Mt={class:"item-card__header"},Dt={class:"header-top"},Pt={class:"rarity-tier"},zt={class:"rarity-label"},Rt={key:0,class:"tier-label"},Tt={class:"level-label"},Nt={class:"item-type"},qt={class:"header-main"},Ft={class:"item-name"},Ot={class:"header-icon"},Vt=["src"],At={class:"item-card__simulator compact"},Ut={class:"simulator-row"},Ht={class:"simulator-header"},Gt={class:"simulator-label"},Kt={class:"simulator-value"},jt={class:"slider-wrapper"},Xt=["max"],Yt={class:"slider-ticks"},Qt={class:"simulator-row level-upgrade-row"},Wt={class:"level-upgrade-col"},Jt={class:"simulator-header"},Zt={class:"simulator-label"},el={class:"simulator-value"},sl=["max"],tl={class:"level-upgrade-col"},ll={class:"simulator-header"},al={class:"simulator-label"},nl={class:"simulator-value"},ol=["value"],il={class:"item-card__body manual-edit-body"},cl={class:"edit-note"},rl={class:"traits-section"},ul=["for"],dl={class:"bonus-text-container"},vl={key:0,class:"bonus-text"},_l=["id","onUpdate:modelValue"],ml={class:"item-card__footer edit-footer"},pl=Q({__name:"ItemEditModal",props:{visible:{type:Boolean},slotId:{},item:{}},emits:["close"],setup(o,{emit:h}){const a=o,f=h,v=Z(),S=le(),{t:b,locale:y}=ee(),c=L(0),k=L(1),u=L(0),E=L({}),I=L(!1),T=L(0),z=L(!1),U=(w,B)=>{T.value=B,I.value=!0},M=w=>{a.slotId&&v.setPowerStone(a.slotId,T.value,w)},D=()=>{z.value=!0},m=w=>{a.slotId&&v.setTalisman(a.slotId,w)},_=q(()=>{const w=v.plannerData?.statKeys||[],B=v.modifiableStats||[];return w.filter($=>B.includes($.key)).map($=>({key:$.key,label:b("stats."+$.key)}))});xe(()=>a.visible,w=>{if(w&&a.item&&a.slotId){const B=v.equipmentOverrides[a.slotId];B?(c.value=B.grade!==void 0?B.grade:a.item.default_grade||0,k.value=B.level||a.item.level||1,u.value=B.upgradeLevel!==void 0?B.upgradeLevel:0,E.value={...B.stats},_.value.forEach($=>{if(E.value[$.key]===void 0){const G=Number(a.item[$.key]);!isNaN(G)&&G>0&&(E.value[$.key]=G)}})):(c.value=a.item.default_grade||0,k.value=a.item.level||1,u.value=0,E.value={},_.value.forEach($=>{const G=Number(a.item[$.key]);!isNaN(G)&&G>0&&(E.value[$.key]=G)}))}});const d=()=>{if(!a.slotId||u.value<0||u.value>v.maxUpgradeLevel)return;const w={};Object.keys(E.value).forEach($=>{E.value[$]>0&&(w[$]=E.value[$])});const B={grade:c.value,level:k.value,upgradeLevel:u.value,stats:w};v.setItemOverride(a.slotId,B),f("close")},r=w=>{w.key==="Escape"&&a.visible&&f("close")};de(()=>window.addEventListener("keydown",r)),ve(()=>window.removeEventListener("keydown",r));const i=w=>w?y.value==="pt-BR"?w.baslik_loc_Portuguese||w.baslik_loc_English||w.id:y.value==="en"?w.baslik_loc_English||w.id:y.value==="es"?w.baslik_loc_Spanish||w.baslik_loc_English||w.id:w[`baslik_loc_${y.value}`]||w.baslik_loc_English||w.id:"",P=w=>{const B=typeof w=="number"&&w>5?$e(w):typeof w=="number"?w:ye(w),$=v.rarityColors;return $&&$[B]?.hex||"#e6edf3"},N=w=>{const B=typeof w=="number"&&w>5?$e(w):typeof w=="number"?w:ye(w),$=v.rarityColors;if(!$)return"common";const G=$[B]?.hex?Object.keys($).find(V=>$[V].hex===$[B].hex):"common";return G?b(`rarity.${G}`):"common"},K=q(()=>{const w=u.value;return(v.upgradeBonuses?.[w.toString()]||0)/100});return(w,B)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"item-edit-overlay",onClick:B[8]||(B[8]=$=>f("close"))},[o.item?(t(),l("div",{key:0,class:"item-card-wrapper",onClick:B[7]||(B[7]=te(()=>{},["stop"]))},[e("div",{class:"item-card",style:Y({"--rarity-color":P(c.value)})},[e("button",{class:"modal-close-btn",onClick:B[0]||(B[0]=$=>f("close"))},[p(s(re),{size:16})]),e("div",Mt,[e("div",Dt,[e("div",Pt,[e("span",zt,n(N(c.value)),1),o.item.tier?(t(),l("span",Rt,"T"+n(o.item.tier),1)):x("",!0),e("span",Tt,"Lv. "+n(k.value),1)]),e("div",Nt,n(o.item.tip_loc_English||s(b)("item.item")),1)]),e("div",qt,[e("h2",Ft,n(i(o.item)),1)]),e("div",Ot,[o.item.icon1?(t(),l("img",{key:0,src:s(S).getIconUrl(o.item.icon1)},null,8,Vt)):(t(),X(s(Re),{key:1,size:40,class:"icon-fallback"}))])]),e("div",At,[e("div",Ut,[e("div",Ht,[e("span",Gt,n(s(b)("item.grade")),1),e("span",Kt,n(c.value)+" / "+n(s(v).maxGrade),1)]),e("div",jt,[ie(e("input",{type:"range",min:"0",max:s(v).maxGrade,"onUpdate:modelValue":B[1]||(B[1]=$=>c.value=$),class:"custom-slider",style:Y({"--track-color":P(c.value)})},null,12,Xt),[[he,c.value,void 0,{number:!0}]]),e("div",Yt,[(t(!0),l(F,null,A(s(v).gradeSliderTicks,$=>(t(),l("span",{key:$},n($),1))),128))])])]),e("div",Qt,[e("div",Wt,[e("div",Jt,[e("span",Zt,n(s(b)("item.simulateLevel")),1),e("span",el,"Lv. "+n(k.value)+" / "+n(s(v).maxSkillLevel),1)]),ie(e("input",{type:"number",min:"1",max:s(v).maxSkillLevel,"onUpdate:modelValue":B[2]||(B[2]=$=>k.value=$),class:"custom-level-input"},null,8,sl),[[he,k.value,void 0,{number:!0}]])]),e("div",tl,[e("div",ll,[e("span",al,n(s(b)("item.upgradeLevel")),1),e("span",nl,"+"+n(u.value)+" / "+n(s(v).maxUpgradeLevel),1)]),ie(e("select",{"onUpdate:modelValue":B[3]||(B[3]=$=>u.value=$),class:"custom-level-input custom-select"},[(t(!0),l(F,null,A(s(v).maxUpgradeLevel+1,$=>(t(),l("option",{key:$-1,value:$-1}," +"+n($-1),9,ol))),128))],512),[[Pe,u.value,void 0,{number:!0}]])])])]),e("div",il,[e("div",cl,n(s(b)("planner.modals.edit.alert")),1),e("div",rl,[(t(!0),l(F,null,A(_.value,$=>(t(),l("div",{key:$.key,class:"trait-row"},[e("label",{for:$.key,class:"trait-label"},"• "+n($.label)+":",9,ul),e("span",dl,[K.value>0&&E.value[$.key]>0?(t(),l("span",vl," (+"+n(Number((E.value[$.key]*K.value).toFixed(2)))+") ",1)):x("",!0)]),ie(e("input",{id:$.key,type:"number","onUpdate:modelValue":G=>E.value[$.key]=G,class:"trait-input",min:"0",placeholder:"0"},null,8,_l),[[he,E.value[$.key],void 0,{number:!0}]])]))),128))])]),o.item&&o.slotId&&s(v).isSocketsEnabled(o.slotId)?(t(),X(Os,{key:0,slotId:o.slotId,onOpenPowerStone:U,onOpenTalisman:D},null,8,["slotId"])):x("",!0),e("div",ml,[p(ge,{variant:"secondary",onClick:B[4]||(B[4]=$=>f("close"))},{default:j(()=>[ae(n(s(b)("common.cancel")),1)]),_:1}),p(ge,{variant:"primary",onClick:d},{icon:j(()=>[p(s(Ue),{size:16})]),default:j(()=>[ae(" "+n(s(b)("common.save")),1)]),_:1})])],4),p(st,{visible:I.value,slotId:o.slotId,socketIndex:T.value,onClose:B[5]||(B[5]=$=>I.value=!1),onSelect:M},null,8,["visible","slotId","socketIndex"]),p(Bt,{visible:z.value,slotId:o.slotId,onClose:B[6]||(B[6]=$=>z.value=!1),onSelect:m},null,8,["visible","slotId"])])):x("",!0)])):x("",!0)]),_:1})]))}}),Me=W(pl,[["__scopeId","data-v-4026debe"]]),hl={key:0,class:"header-content"},kl={class:"header-label"},bl={key:1,class:"header-content empty-content"},yl={class:"header-label"},fl={key:0,class:"class-selector__list"},Sl=["onClick"],$l={class:"class-item__label"},gl=Q({__name:"ClassSelector",setup(o){const h=Z(),{t:a}=ee(),f=q(()=>h.plannerData?.classes?h.plannerData.classes.map(u=>({id:u.id,labelKey:u.labelKey,name:u.name})):[]),v=L(!1),S=L(null),b=q(()=>h.selectedClass&&f.value.find(u=>u.id===h.selectedClass)||null),y=u=>{h.setClass(u),v.value=!1},c=()=>{v.value=!v.value},k=u=>{S.value&&!S.value.contains(u.target)&&(v.value=!1)};return de(()=>{document.addEventListener("click",k)}),ve(()=>{document.removeEventListener("click",k)}),(u,E)=>(t(),l("div",{class:"class-selector",ref_key:"dropdownRef",ref:S},[e("div",{class:O(["class-selector__header",{"is-open":v.value,"is-selected":!!b.value}]),onClick:c},[b.value?(t(),l("div",hl,[e("span",kl,n(s(a)(b.value.name)),1)])):(t(),l("div",bl,[e("span",yl,n(s(a)("planner.class.placeholder")),1)])),p(s(fe),{size:20,class:O(["chevron-icon",{rotate:v.value}])},null,8,["class"])],2),p(ne,{name:"dropdown"},{default:j(()=>[v.value?(t(),l("div",fl,[(t(!0),l(F,null,A(f.value,I=>(t(),l("button",{key:I.id,class:O(["class-item",{"is-active":s(h).selectedClass===I.id}]),onClick:T=>y(I.id)},[e("span",$l,n(s(a)(I.name)),1)],10,Sl))),128))])):x("",!0)]),_:1})],512))}}),Cl=W(gl,[["__scopeId","data-v-0af48b10"]]),wl={key:0,class:"header-content"},Il={class:"header-label"},xl={key:1,class:"header-content empty-content"},El={key:0,class:"header-label"},Ll={key:1,class:"header-label"},Bl={key:0,class:"subclass-selector__list"},Ml=["onClick"],Dl={class:"subclass-item__label"},Pl=Q({__name:"SubclassSelector",setup(o){const h=Z(),{t:a}=ee(),f=L(!1),v=L(null),S=q(()=>!h.currentClassData||!h.currentClassData.subclasses?[]:h.currentClassData.subclasses.map(u=>({id:u.id,labelKey:u.labelKey,name:u.name}))),b=q(()=>h.selectedSubclass&&S.value.find(u=>u.id===h.selectedSubclass)||null),y=u=>{h.setSubclass(u),f.value=!1},c=()=>{S.value.length!==0&&(f.value=!f.value)},k=u=>{v.value&&!v.value.contains(u.target)&&(f.value=!1)};return de(()=>document.addEventListener("click",k)),ve(()=>document.removeEventListener("click",k)),(u,E)=>(t(),l("div",{class:O(["subclass-selector",{"is-disabled":S.value.length===0}]),ref_key:"dropdownRef",ref:v},[e("div",{class:O(["subclass-selector__header",{"is-open":f.value,"is-selected":!!b.value}]),onClick:c},[b.value?(t(),l("div",wl,[p(s(ce),{class:"header-icon",size:16}),e("span",Il,n(s(a)(b.value.name)),1)])):(t(),l("div",xl,[S.value.length>0?(t(),l("span",El,n(s(a)("planner.subclass.placeholder")),1)):(t(),l("span",Ll,n(s(a)("planner.subclass.unavailable")),1))])),S.value.length>0?(t(),X(s(fe),{key:2,size:16,class:O(["chevron-icon",{rotate:f.value}])},null,8,["class"])):x("",!0)],2),p(ne,{name:"dropdown"},{default:j(()=>[f.value?(t(),l("div",Bl,[(t(!0),l(F,null,A(S.value,I=>(t(),l("button",{key:I.id,class:O(["subclass-item",{"is-active":s(h).selectedSubclass===I.id}]),onClick:T=>y(I.id)},[p(s(ce),{class:"subclass-item__icon",size:14}),e("span",Dl,n(s(a)(I.name)),1)],10,Ml))),128))])):x("",!0)]),_:1})],2))}}),zl=W(Pl,[["__scopeId","data-v-bd5ac1a8"]]),Rl={class:"row-icon-col"},Tl={class:"skill-icon"},Nl={class:"row-info-col"},ql={class:"skill-name"},Fl={key:0,class:"level-num"},Ol={class:"skill-level-ctrl"},Vl={class:"muted-label"},Al={class:"ctrl-group"},Ul=["disabled"],Hl=["disabled"],Gl={class:"row-stats-col"},Kl={class:"muted-label"},jl={class:"stats-val"},Xl={class:"highlight-blue"},Yl={class:"highlight-cyan"},Ql={class:"row-effects-col"},Wl={class:"muted-label"},Jl={class:"effects-list"},Zl={class:"effect-text"},ea={key:0,class:"effect-highlight"},sa={key:0,class:"row-action-col"},ta={class:"stone-slot-wrapper"},la=["title"],aa=["src","alt"],na={key:0,class:"stone-slot-actions"},oa=["title"],ia=["title"],ca=Q({__name:"SkillNodeCard",props:{skill:{},index:{}},emits:["openStoneSelector","openStoneEditor"],setup(o,{emit:h}){const a=o,f=Z(),v=le(),{t:S,locale:b}=Fe(),y=q(()=>{switch(b.value){case"pt-BR":return"Portuguese";case"es-ES":return"Spanish";default:return"English"}}),c=a.skill.maxLevel||f.maxSkillLevel,k=q(()=>f.skillLevels[a.skill.id]||0),u=q(()=>f.skillStones[a.skill.id]),E=q(()=>!!u.value),I=q(()=>u.value?v.getItemById(u.value):null),T=q(()=>I.value?v.getIconUrl(I.value.icon1||I.value.icon):null),z=q(()=>u.value&&f.equipmentOverrides["stone_"+a.skill.id]||null),U=q(()=>{if(!I.value)return"transparent";const V=z.value?.rarity??ye(I.value),C=f.rarityColors;return C&&C[V]?.rgba||"#30363d"}),M=()=>{k.value<c&&f.setSkillLevel(a.skill.id,k.value+1)},D=()=>{k.value>0&&f.setSkillLevel(a.skill.id,k.value-1)},m=q(()=>{const V=k.value,C=f.rarityThresholds;return C?V>=C.epic?"rarity-epic":V>=C.rare?"rarity-rare":V>=C.uncommon?"rarity-uncommon":"":""}),_=V=>{const C=Math.max(1,k.value),R=C-1;if(V.template){let g=V.template;const H={};return V.params&&Object.entries(V.params).forEach(([J,me])=>{const oe=(me.base||0)+(me.scaling||0)*R;H[J]=Number.isInteger(oe)?oe.toString():oe.toFixed(1),g=g.replace(`{${J}}`,H[J])}),g.startsWith("planner.")?S(g,H):g}if(V.text){const g=V.text,H=V.scaling;if(!H||C<=1)return g;const J=H.match(/([+-]?\d+(?:\.\d+)?)/);if(!J)return g;const oe=parseFloat(J[1])*R;let se=g;return H.includes("CD")||H.toLowerCase().includes("s")?(se=se.replace(/CD\s*([+-]?\d+(?:\.\d+)?)s/i,(Se,ue)=>"CD "+Number((parseFloat(ue)+oe).toFixed(1))+"s"),se===g&&(se=se.replace(/([+-]?\d+(?:\.\d+)?)s/,(Se,ue)=>Number((parseFloat(ue)+oe).toFixed(1))+"s"))):H.includes("%")?se=se.replace(/([+-]?\d+(?:\.\d+)?)%/,(Se,ue)=>Number((parseFloat(ue)+oe).toFixed(1))+"%"):se=se.replace(/([+-]?\d+(?:\.\d+)?)/,(Se,ue)=>Number((parseFloat(ue)+oe).toFixed(1)).toString()),se}return""},d=V=>V.scaling?V.scaling:V.params?Object.values(V.params).filter(C=>C.scaling!==0).map(C=>{const R=(C.scaling||0)>0?"+":"",g=V.template.includes("%")?"%":"";return`${R}${C.scaling}${g}/lvl`}).join(", "):null,r=L(null),i=L(0),P=L(0),N=V=>{E.value&&I.value&&(r.value=I.value,i.value=V.clientX,P.value=V.clientY)},K=()=>{r.value=null},w=()=>{r.value=null,G("openStoneSelector",a.skill.id)},B=()=>{r.value=null,G("openStoneEditor",a.skill.id)},$=()=>{f.setSkillStone(a.skill.id,null),r.value=null},G=h;return(V,C)=>(t(),l("div",{class:O(["clean-row-card",[{"is-active":k.value>0},m.value]])},[e("div",Rl,[e("div",Tl,[e("span",null,n(o.index+1),1)])]),e("div",Nl,[e("h4",ql,[ae(n(s(S)(o.skill.name))+" ",1),k.value>0?(t(),l("span",Fl," I")):x("",!0)]),e("div",Ol,[e("span",Vl,n(s(S)("planner.skills.levelLabel")),1),e("div",Al,[e("button",{class:"ctrl-btn",onClick:D,disabled:k.value===0},[p(s(Ve),{size:12})],8,Ul),e("span",{class:O(["ctrl-val",{"is-active-val":k.value>0}])},n(k.value>0?k.value:1)+" / "+n(s(c)),3),e("button",{class:"ctrl-btn",onClick:M,disabled:k.value===s(c)},[p(s(we),{size:12})],8,Hl)])])]),e("div",Gl,[e("div",Kl,n(s(S)("planner.skills.costCdLabel")),1),e("div",jl,[e("span",Xl,n(o.skill.manaCost||o.skill.baseManaCost||0)+" MP",1),C[0]||(C[0]=e("span",{class:"separator"},"•",-1)),e("span",Yl,n(o.skill.cooldown||o.skill.baseCooldown||0)+"s",1)])]),e("div",Ql,[e("div",Wl,n(s(S)("planner.skills.effectsLabel")),1),e("div",Jl,[(t(!0),l(F,null,A(o.skill.effects,(R,g)=>(t(),l("div",{class:"effect-line",key:g},[e("span",Zl,n(_(R)),1),d(R)?(t(),l("span",ea,n(d(R)),1)):x("",!0)]))),128))])]),o.skill.hasStoneSlot?(t(),l("div",sa,[e("div",ta,[e("button",{class:O(["action-btn",{"has-gem":E.value}]),onClick:te(w,["stop"]),title:E.value?"":s(S)("planner.skills.equipStone"),onMousemove:N,onMouseleave:K},[T.value?(t(),l("img",{key:0,src:T.value,alt:I.value?.["baslik_loc_"+y.value]||I.value?.baslik_loc_English,style:Y({borderColor:U.value})},null,12,aa)):(t(),X(s(pe),{key:1,size:20}))],42,la),E.value?(t(),l("div",na,[e("button",{class:"stone-action-btn edit-btn",onClick:te(B,["stop"]),title:s(S)("planner.skills.changeStone")},[p(s(Be),{size:12})],8,oa),e("button",{class:"stone-action-btn remove-btn",onClick:te($,["stop"]),title:s(S)("planner.skills.unsocketStone")},[p(s(Ee),{size:12})],8,ia)])):x("",!0)])])):x("",!0),p(be,{item:r.value,visible:!!r.value,x:i.value,y:P.value,overrideRarity:r.value&&z.value?z.value.rarity:void 0,overrideLevel:r.value&&z.value?z.value.level:void 0,overrideStats:r.value&&z.value?z.value.stats:void 0},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])],2))}}),ra=W(ca,[["__scopeId","data-v-442e9498"]]),ua={class:"modal-header"},da={class:"modal-title"},va={class:"modal-search"},_a=["placeholder"],ma={class:"modal-body"},pa={key:0,class:"empty-state"},ha={key:1,class:"item-grid"},ka=["onClick","onMousemove"],ba=["src","alt"],ya={key:1,class:"item-card__fallback"},fa={key:2,class:"item-card__level-badge"},Sa={class:"item-card__info"},$a=Q({__name:"SkillStoneSelectorModal",props:{show:{type:Boolean},skillId:{}},emits:["close"],setup(o,{emit:h}){const a=o,f=h,v=le(),S=Z(),{t:b}=ee(),y=L(""),c=q(()=>v.items.filter(M=>M.tip_loc_English==="Skill Stone")),k=q(()=>{if(!y.value)return c.value;const M=y.value.toLowerCase();return c.value.filter(D=>{const m=(D.baslik_loc_English||D.isim_loc_English||"")?.toLowerCase(),_=(D.baslik_loc_Portuguese||D.isim_loc_Portuguese||"")?.toLowerCase(),d=(D.baslik_loc_Spanish||D.isim_loc_Spanish||"")?.toLowerCase();return m.includes(M)||_.includes(M)||d.includes(M)})}),u=M=>{a.skillId&&S.setSkillStone(a.skillId,M.id),E.value=null,f("close")},E=L(null),I=L(0),T=L(0),z=(M,D)=>{a.show&&(E.value=D,I.value=M.clientX,T.value=M.clientY)},U=()=>{a.show&&(E.value=null)};return xe(()=>a.show,M=>{M||(E.value=null)}),(M,D)=>(t(),l(F,null,[p(ne,{name:"modal"},{default:j(()=>[o.show?(t(),l("div",{key:0,class:"modal-overlay",onClick:D[3]||(D[3]=m=>f("close"))},[e("div",{class:"modal-content",onClick:D[2]||(D[2]=te(()=>{},["stop"]))},[e("div",ua,[e("div",da,[p(s(pe),{size:20,class:"title-icon"}),e("h3",null,n(s(b)("planner.skillStone.title")),1)]),e("button",{class:"icon-btn close-btn",onClick:D[0]||(D[0]=m=>f("close"))},[p(s(re),{size:20})])]),e("div",va,[p(s(Ce),{class:"search-icon",size:16}),ie(e("input",{type:"text","onUpdate:modelValue":D[1]||(D[1]=m=>y.value=m),placeholder:s(b)("planner.skillStone.searchPlaceholder"),class:"search-input",ref:"searchInput"},null,8,_a),[[he,y.value]])]),e("div",ma,[k.value.length===0?(t(),l("div",pa,n(s(b)("planner.skillStone.emptyState")),1)):(t(),l("div",ha,[(t(!0),l(F,null,A(k.value,m=>(t(),l("button",{key:m.id,class:"item-card",onClick:_=>u(m),onMousemove:_=>z(_,m),onMouseleave:U},[e("div",{class:O(["item-card__icon","rarity-"+(m.quality||1)])},[m.icon1||m.icon?(t(),l("img",{key:0,src:s(v).getIconUrl(m.icon1||m.icon),alt:m.baslik_loc_English||m.isim_loc_English},null,8,ba)):(t(),l("div",ya)),m.level?(t(),l("div",fa,"Lv. "+n(m.level),1)):x("",!0)],2),e("div",Sa,[e("span",{class:O(["item-name","text-rarity-"+(m.quality||1)])},n(m["baslik_loc_"+s(b)("lang_suffix")]||m["isim_loc_"+s(b)("lang_suffix")]||m.baslik_loc_English||m.isim_loc_English||m.id),3)])],40,ka))),128))]))])])])):x("",!0)]),_:1}),p(be,{item:E.value,visible:!!E.value,x:I.value,y:T.value},null,8,["item","visible","x","y"])],64))}}),ga=W($a,[["__scopeId","data-v-802ff69d"]]),Ca={class:"planner-skills"},wa={key:0,class:"planner-skills__empty"},Ia={key:1,class:"planner-skills__content"},xa={key:0,class:"passive-banner"},Ea={class:"passive-banner__header"},La={class:"passive-tag"},Ba={class:"passive-name"},Ma={class:"passive-desc"},Da={key:1,class:"skills-list"},Pa={key:2,class:"planner-skills__empty"},za=Q({__name:"PlannerSkillsTab",setup(o){const h=Z(),a=le(),{t:f}=ee(),v=q(()=>h.currentSubclassData),S=L(!1),b=L(null),y=z=>{b.value=z,S.value=!0},c=()=>{S.value=!1,b.value=null},k=L(!1),u=L(null),E=q(()=>{if(!u.value)return null;const z=h.skillStones[u.value];return z?a.getItemById(z):null}),I=z=>{u.value=z,k.value=!0},T=()=>{k.value=!1,u.value=null};return(z,U)=>(t(),l("div",Ca,[v.value?(t(),l("div",Ia,[v.value.passive?(t(),l("div",xa,[e("div",Ea,[e("span",La,n(s(f)("planner.skills.passiveAbility")),1),e("h4",Ba,n(s(f)(v.value.passive.name)),1)]),e("p",Ma,n(s(f)(v.value.passive.description)),1)])):x("",!0),v.value.skills&&v.value.skills.length>0?(t(),l("div",Da,[(t(!0),l(F,null,A(v.value.skills,(M,D)=>(t(),X(ra,{key:M.id,skill:M,index:Number(D)+1,onOpenStoneSelector:y,onOpenStoneEditor:I},null,8,["skill","index"]))),128))])):(t(),l("div",Pa,[e("p",null,n(s(f)("planner.skills.noSubclassSkills")),1)]))])):(t(),l("div",wa,[e("p",null,n(s(f)("planner.skills.emptySubclass")),1)])),p(ga,{show:S.value,skillId:b.value,onClose:c},null,8,["show","skillId"]),p(Me,{visible:k.value,slotId:"stone_"+u.value,item:E.value,onClose:T},null,8,["visible","slotId","item"])]))}}),Ra=W(za,[["__scopeId","data-v-79a2b1e7"]]),Ta={class:"planner-page"},Na={class:"planner-page__container"},qa={class:"planner-page__header"},Fa={class:"header-left"},Oa={class:"planner-page__title"},Va={key:0,class:"build-selector-box is-creating"},Aa=["placeholder"],Ua={class:"build-actions inline-actions"},Ha={key:0,class:"custom-dropdown-list"},Ga={key:0,class:"dropdown-item empty-state",disabled:""},Ka=["onClick"],ja={key:0,class:"dropdown-item__class"},Xa={class:"build-actions"},Ya=["title"],Qa=["title"],Wa={class:"header-right"},Ja={key:0,class:"error-msg"},Za={key:1,class:"planner-layout"},en={class:"planner-layout__col planner-layout__col--equip"},sn={class:"gear-ring"},tn=["src"],ln={class:"gearscore-container"},an={class:"gearscore-value"},nn={class:"planner-layout__col planner-layout__col--attrs"},on={class:"planner-tabs"},cn={class:"tab-content"},rn={class:"planner-section-title"},un={class:"planner-attr-counter"},dn={class:"attr-grid"},vn={key:0,class:"tab-content"},_n={key:0},mn={style:{display:"flex",gap:"1rem","margin-bottom":"1.5rem"}},pn={style:{color:"#8b949e",display:"flex","align-items":"center","font-size":"0.875rem"}},hn={style:{"margin-top":"1rem"}},kn={key:1,style:{color:"#8b949e","text-align":"center","margin-top":"4rem"}},bn={class:"planner-layout__col planner-layout__col--stats"},yn={class:"planner-stats-panel"},fn={class:"planner-stats-panel__header"},Sn={class:"planner-stats-panel__content"},$n={class:"planner-stat-label"},gn={class:"planner-stat-value"},Cn={key:0,class:"planner-stat-empty"},wn={key:0,class:"planner-stats-panel__set-bonuses"},In={class:"set-bonuses-header"},xn={class:"set-bonus-entry__header"},En={class:"set-bonus-entry__name"},Ln={class:"set-bonus-entry__count"},Bn={class:"set-bonus-tier__label"},Mn={class:"set-bonus-tier__bonuses"},Dn={class:"set-bonus-tier__value"},Pn=Q({__name:"Planner",setup(o){const{t:h}=ee(),a=Z(),f=le(),v=L("attributes"),S=L(!1),b=L(null),y=L(!1),c=L(null),k=L(null),u=L(""),E=L(!1),I=L(""),T=L(!1),z=L(null),U=()=>{E.value||(T.value=!T.value)},M=C=>{z.value&&!z.value.contains(C.target)&&(T.value=!1)},D=C=>{if(!a.selectedClass){u.value=h("planner.attributes.errorClass"),setTimeout(()=>u.value="",3e3);return}b.value=C,S.value=!0},m=(C,R)=>{c.value=C,k.value=R,y.value=!0},_=C=>{b.value&&(C===null?a.unequipItem(b.value):(a.equipItem(b.value,C),c.value=b.value,k.value=C,y.value=!0))},d=()=>{a.resetPlanner(),I.value=""},r=C=>{C&&(a.loadBuild(C),T.value=!1)},i=()=>{E.value=!0,I.value=""},P=()=>{E.value=!1,I.value=""},N=()=>{const C=I.value.trim();if(!C){u.value=h("planner.builds.errorName"),setTimeout(()=>u.value="",3e3);return}a.newBuild(C),E.value=!1,I.value=""},K=()=>{a.currentBuildId&&confirm(h("planner.builds.confirmDelete"))&&a.deleteBuild(a.currentBuildId)},w=q(()=>{const C={};return a.plannerData?.classes&&a.plannerData.classes.forEach(R=>{C[R.id]=R.labelKey}),C}),B=q(()=>{if(!a.currentBuildId)return a.savedBuilds.length?h("planner.builds.select"):h("planner.builds.none");const C=a.savedBuilds.find(R=>R.id===a.currentBuildId);return C?`${C.name} ${C.charClass?`(${h("planner.class.names."+(w.value[C.charClass]||C.charClass))})`:""}`:h("planner.builds.select")}),$=q(()=>{let C=0;return Object.keys(a.equipment).forEach(R=>{if(a.gearscoreExcludedSlots.includes(R))return;const g=a.equipment[R];if(!g)return;const H=a.equipmentOverrides[R],J=H?.grade!==void 0?H.grade:g.grade;J!=null&&(C+=Number(J))}),C});de(async()=>{await a.loadPlannerData(),await f.loadData(),document.addEventListener("click",M)}),ve(()=>{document.removeEventListener("click",M)});const G=C=>h(`planner.attributes.bonus.${C}`),V=C=>"/CodexFall/"+C.replace(/^\//,"");return(C,R)=>(t(),l("div",Ta,[e("div",Na,[e("div",qa,[e("div",Fa,[e("h1",Oa,n(s(h)("nav.planner")),1),e("div",{class:"build-section-wrapper",ref_key:"buildDropdownRef",ref:z},[E.value?(t(),l("div",Va,[ie(e("input",{type:"text","onUpdate:modelValue":R[0]||(R[0]=g=>I.value=g),placeholder:s(h)("planner.builds.namePlaceholder"),class:"build-input",onKeyup:ze(N,["enter"])},null,40,Aa),[[he,I.value]]),e("div",Ua,[e("button",{class:"icon-btn success-btn",onClick:N},[p(s(Oe),{size:16})]),e("button",{class:"icon-btn",onClick:P},[p(s(re),{size:16})])])])):(t(),l(F,{key:1},[e("div",{class:O(["build-selector-box",{"is-open":T.value,"is-selected":!!s(a).currentBuildId}]),onClick:U},[e("span",{class:O(["build-value",{placeholder:!s(a).currentBuildId}])},n(B.value),3),p(s(fe),{size:16,class:O(["chevron-icon",{rotate:T.value}])},null,8,["class"])],2),p(ne,{name:"dropdown"},{default:j(()=>[T.value?(t(),l("div",Ha,[s(a).savedBuilds.length===0?(t(),l("button",Ga,n(s(h)("planner.builds.none")),1)):x("",!0),(t(!0),l(F,null,A(s(a).savedBuilds,g=>(t(),l("button",{key:g.id,class:O(["dropdown-item",{"is-active":s(a).currentBuildId===g.id}]),onClick:te(H=>r(g.id),["stop"])},[ae(n(g.name)+" ",1),g.charClass?(t(),l("span",ja,"("+n(s(h)("planner.class.names."+(w.value[g.charClass]||g.charClass)))+")",1)):x("",!0)],10,Ka))),128))])):x("",!0)]),_:1}),e("div",Xa,[e("button",{class:"icon-btn",title:s(h)("planner.builds.create"),onClick:i},[p(s(we),{size:16})],8,Ya),s(a).currentBuildId?(t(),l("button",{key:0,class:"icon-btn delete-btn",title:s(h)("common.delete"),onClick:K},[p(s(He),{size:16})],8,Qa)):x("",!0)])],64))],512)]),e("div",Wa,[p(Cl),p(ge,{variant:"secondary",onClick:d,title:s(h)("planner.stats.clear")},{icon:j(()=>[p(s(Ae),{size:16})]),default:j(()=>[ae(" "+n(s(h)("planner.stats.clear")),1)]),_:1},8,["title"])])]),u.value?(t(),l("div",Ja,n(u.value),1)):x("",!0),s(a).isLoaded?(t(),l("div",Za,[e("div",en,[e("div",sn,[R[5]||(R[5]=e("div",{class:"gear-ring__bg-line"},null,-1)),R[6]||(R[6]=e("img",{src:Te,class:"gear-ring__watermark",alt:"Quinfall"},null,-1)),(t(!0),l(F,null,A(s(a).plannerData?.equipmentSlots,g=>(t(),l(F,{key:g.id},[!g.allowedClasses||g.allowedClasses.includes(s(a).selectedClass)?(t(),l("div",{key:0,class:O(["gear-ring__slot",g.positionClass])},[p(ls,{id:g.id,item:s(a).equipment[g.id],onClick:D,onEdit:m},{icon:j(()=>[e("img",{src:V(g.iconFallback),class:"planner-slot__fallback-img",alt:""},null,8,tn)]),_:2},1032,["id","item"])],2)):x("",!0)],64))),128))]),e("div",ln,[R[7]||(R[7]=e("div",{class:"gearscore-label"},"GEARSCORE",-1)),e("div",an,n($.value),1)])]),e("div",nn,[e("div",on,[e("button",{class:O(["planner-tab",{"is-active":v.value==="attributes"}]),onClick:R[1]||(R[1]=g=>v.value="attributes")},n(s(h)("planner.tabs.attributes")),3),e("button",{class:O(["planner-tab",{"is-active":v.value==="skills"}]),onClick:R[2]||(R[2]=g=>v.value="skills")},n(s(h)("planner.tabs.skills")),3)]),ie(e("div",cn,[e("div",rn,[e("h3",null,n(s(h)("planner.attributes.title")),1),e("span",un,n(s(h)("planner.attributes.counter",{current:s(a).totalAttributePoints,max:s(a).maxAttributePoints})),1)]),e("div",dn,[(t(!0),l(F,null,A(s(a).plannerData?.attributes,g=>(t(),X(ks,{key:g.id,id:g.id,title:s(h)("planner.attributes."+g.id),shortName:s(h)("planner.attributes."+g.id+"Short"),value:s(a).attributes[g.id],"onUpdate:value":H=>s(a).attributes[g.id]=H,max:g.max,bonusText:G(g.id)},null,8,["id","title","shortName","value","onUpdate:value","max","bonusText"]))),128))])],512),[[Ie,v.value==="attributes"]]),v.value==="skills"?(t(),l("div",vn,[s(a).selectedClass?(t(),l("div",_n,[e("div",mn,[e("label",pn,n(s(h)("planner.skills.selectSubclass")),1),p(zl)]),e("div",hn,[p(Ra)])])):(t(),l("div",kn,n(s(h)("planner.skills.selectWeaponPrompt")),1))])):x("",!0)]),e("div",bn,[e("div",yn,[e("div",fn,[p(s(Ne),{size:18}),e("h3",null,n(s(h)("planner.stats.title")),1)]),e("div",Sn,[(t(!0),l(F,null,A(s(a).stats,(g,H)=>(t(),l("div",{class:"planner-stat-row",key:H},[e("span",$n,n(s(h)("stats."+H.toLowerCase().replace(/ /g,"_"))),1),e("span",gn,n(g),1)]))),128)),Object.keys(s(a).stats).length===0?(t(),l("div",Cn,n(s(h)("planner.stats.empty")),1)):x("",!0)]),s(a).activeSetBonuses.length>0?(t(),l("div",wn,[e("div",In,[e("h4",null,n(s(h)("planner.sockets.setBonus")),1)]),(t(!0),l(F,null,A(s(a).activeSetBonuses,g=>(t(),l("div",{key:g.setName,class:"set-bonus-entry"},[e("div",xn,[e("span",En,n(g.setName),1),e("span",Ln,n(g.count)+"/4",1)]),(t(!0),l(F,null,A(g.thresholds,H=>(t(),l("div",{key:H.required,class:O(["set-bonus-tier",{"is-active":H.active}])},[e("span",Bn,n(H.required)+"pc",1),e("span",Mn,[(t(!0),l(F,null,A(H.bonuses,(J,me)=>(t(),l("span",{key:me,class:"set-bonus-tier__stat"},[ae(n(s(h)("stats."+me))+": ",1),e("span",Dn,"+"+n(J),1)]))),128))])],2))),128))]))),128))])):x("",!0)])])])):x("",!0)]),p(Is,{visible:S.value,slotId:b.value,onClose:R[3]||(R[3]=g=>S.value=!1),onSelect:_},null,8,["visible","slotId"]),p(Me,{visible:y.value,slotId:c.value,item:k.value,onClose:R[4]||(R[4]=g=>{y.value=!1,c.value=null,k.value=null})},null,8,["visible","slotId","item"])]))}}),Vn=W(Pn,[["__scopeId","data-v-d4a346c6"]]);export{Vn as default};
