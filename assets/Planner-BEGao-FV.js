import{k as Be,r as $,c as M,d as G,l as i,y as re,C as J,I as De,j as C,u as s,p as D,m as e,x as X,Q as Se,A as l,t as p,o as _e,b as pe,D as ue,B as T,G as ae,F,q as V,O as ne,w as Ie,n as ve,v as be,S as Me,U as qe}from"./vue-vendor-DOJpdeLt.js";import{c as oe,a as ie,u as se,n as ce,_ as Y,X as fe,S as xe,P as ze,C as ge,b as Je}from"./index-CNiHru3p.js";import{A as ye}from"./AppButton-C_f9GCma.js";import{T as Ne,I as ke}from"./ItemTooltip-C5wZ2APw.js";import{A as Fe,S as we,G as Ee,C as Pe}from"./AppInput-BSyAG4JJ.js";import{I as Re}from"./ItemRow-cAOVjgjK.js";import{u as Te}from"./i18n-DTTU2Nu9.js";/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=oe("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=oe("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=oe("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=oe("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=oe("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=oe("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-vue-next v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=oe("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),W=Be("planner",()=>{const n=$([]),r=$(null),t=$(null),b=$(null),S=$(!1),k=$(null),v=$({}),g=$({}),y=$({}),m=$({}),c=$({}),x=async()=>{if(!S.value)try{const d=await fetch("/CodexFall/datas/plannerData.json");if(!d.ok)throw new Error("Failed to load planner data");k.value=await d.json(),k.value.equipmentSlots.forEach(_=>{_.id in v.value||(v.value[_.id]=null)}),k.value.attributes.forEach(_=>{_.id in y.value||(y.value[_.id]=0)}),S.value=!0}catch(o){console.error("Failed to load planner data",o)}},w=M(()=>Object.values(y.value).reduce((o,d)=>o+d,0)),O=M(()=>{var o;return!((o=k.value)!=null&&o.classes)||!t.value?null:k.value.classes.find(d=>d.id===t.value)||null}),L=M(()=>{const o=O.value;return!o||!o.subclasses||!b.value?null:o.subclasses.find(d=>d.id===b.value)||null}),B=M(()=>{var _;const o={},d=(q,j)=>{o[q]||(o[q]=0),o[q]+=j};return(_=k.value)!=null&&_.attributes&&k.value.attributes.forEach(q=>{const j=y.value[q.id]||0;j>0&&q.bonuses.forEach(P=>{d(P.stat,j*P.multiplier)})}),Object.keys(v.value).forEach(q=>{var K,Ce;const j=q,P=v.value[j];if(!P)return;const R=((K=g.value[j])==null?void 0:K.stats)||{};(((Ce=k.value)==null?void 0:Ce.statKeys)||[]).forEach(he=>{let de;R[he.key]!==void 0?de=Number(R[he.key]):de=Number(P[he.key]),!isNaN(de)&&de>0&&d(he.label,de)})}),o});(()=>{const o=localStorage.getItem("quinfall_saved_builds");if(o)try{n.value=JSON.parse(o)}catch{console.error("Failed to parse builds from localStorage")}})();const u=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(n.value))},a=()=>{if(!r.value)return;const o=n.value.findIndex(d=>d.id===r.value);o!==-1&&(n.value[o].charClass=t.value,n.value[o].subclass=b.value,n.value[o].equipment=JSON.parse(JSON.stringify(v.value)),n.value[o].equipmentOverrides=JSON.parse(JSON.stringify(g.value)),n.value[o].attributes=JSON.parse(JSON.stringify(y.value)),n.value[o].skillLevels=JSON.parse(JSON.stringify(m.value)),n.value[o].skillStones=JSON.parse(JSON.stringify(c.value)),u())},h=o=>{t.value=o,b.value=null,m.value={},c.value={},v.value.weapon=null,v.value.offhand=null,g.value.weapon=void 0,g.value.offhand=void 0,a()},I=o=>{b.value=o,a()},z=(o,d)=>{d<1&&(d=1),m.value[o]=d,a()},A=(o,d)=>{c.value[o]=d,a()},H=(o,d)=>{d=Math.max(0,Math.min(100,isNaN(d)?0:d)),y.value[o]=d,a()},Z=(o,d)=>{v.value[o]=d,g.value[o]=void 0,a()},te=o=>{v.value[o]=null,g.value[o]=void 0,a()},Q=(o,d)=>{g.value[o]=d,a()},U=()=>{t.value=null,b.value=null,Object.keys(v.value).forEach(o=>{v.value[o]=null}),g.value={},Object.keys(y.value).forEach(o=>{y.value[o]=0}),m.value={},c.value={},r.value=null};return{savedBuilds:n,currentBuildId:r,selectedClass:t,equipment:v,equipmentOverrides:g,attributes:y,totalAttributePoints:w,currentClassData:O,currentSubclassData:L,stats:B,setClass:h,setSubclass:I,setSkillLevel:z,setSkillStone:A,setAttribute:H,equipItem:Z,unequipItem:te,setItemOverride:Q,resetPlanner:U,saveCurrentBuild:o=>{const d={id:r.value||Date.now().toString(),name:o,charClass:t.value,subclass:b.value,equipment:JSON.parse(JSON.stringify(v.value)),equipmentOverrides:JSON.parse(JSON.stringify(g.value)),attributes:JSON.parse(JSON.stringify(y.value)),skillLevels:JSON.parse(JSON.stringify(m.value)),skillStones:JSON.parse(JSON.stringify(c.value))};if(r.value){const _=n.value.findIndex(q=>q.id===r.value);_!==-1?(d.name=o,n.value[_]=d):n.value.push(d)}else r.value=d.id,n.value.push(d);u()},loadBuild:o=>{const d=n.value.find(_=>_.id===o);d&&(r.value=d.id,t.value=d.charClass,b.value=d.subclass||null,v.value=JSON.parse(JSON.stringify(d.equipment||{})),g.value=JSON.parse(JSON.stringify(d.equipmentOverrides||{})),y.value=JSON.parse(JSON.stringify(d.attributes||{})),m.value=JSON.parse(JSON.stringify(d.skillLevels||{})),c.value=JSON.parse(JSON.stringify(d.skillStones||{})))},deleteBuild:o=>{n.value=n.value.filter(d=>d.id!==o),r.value===o&&U(),u()},newBuild:o=>{U();const d=Date.now().toString();r.value=d,n.value.push({id:d,name:o,charClass:null,subclass:null,equipment:JSON.parse(JSON.stringify(v.value)),equipmentOverrides:{},attributes:JSON.parse(JSON.stringify(y.value)),skillLevels:{},skillStones:{}}),u()},isLoaded:S,plannerData:k,loadPlannerData:x,selectedSubclass:b,skillLevels:m,skillStones:c}}),Ke={key:0,class:"planner-slot__placeholder"},Xe=["src","alt"],Ge={key:2,class:"planner-slot__active-ring"},Ye={key:3,class:"planner-slot__actions"},Qe=["title"],We=["title"],Ze=G({__name:"PlannerSlot",props:{id:{},item:{},active:{type:Boolean}},emits:["click","edit"],setup(n,{emit:r}){const t=n,b=r,S=ie(),k=W(),{t:v}=se(),g=$(!1),y=$(0),m=$(0),c=B=>{t.item&&(g.value=!0,y.value=B.clientX,m.value=B.clientY)},x=()=>{g.value=!1},w=(B,E)=>{if(!B)return"#30363d";const u=k.equipmentOverrides[E];let a=u==null?void 0:u.rarity;return a||(a=ce(B)),{1:"#e6edf3",2:"#56B65C",3:"#4F8EFF",4:"#C572FF",5:"#FFB347"}[a]||"#e6edf3"},O=B=>{B.stopPropagation(),t.item&&(g.value=!1,b("edit",t.id,t.item))},L=B=>{B.stopPropagation(),t.item&&(g.value=!1,k.unequipItem(t.id))};return(B,E)=>{var u,a,h,I;return l(),i("div",{class:J(["planner-slot",{"planner-slot--empty":!n.item,"planner-slot--active":n.active}]),style:re({borderColor:n.item?`${w(n.item,n.id)}80`:"#30363d"}),onClick:E[0]||(E[0]=z=>b("click",n.id)),onMousemove:c,onMouseleave:x},[n.item?(u=n.item)!=null&&u.icon1?(l(),i("img",{key:1,src:s(S).getIconUrl(n.item.icon1),class:"planner-slot__image",alt:s(v)("item.name")},null,8,Xe)):D("",!0):(l(),i("div",Ke,[De(B.$slots,"icon",{},()=>[C(s($e),{size:20,class:"planner-slot__fallback-icon"})])])),n.active?(l(),i("div",Ge)):D("",!0),n.item?(l(),i("div",Ye,[e("button",{class:"planner-slot__action-btn edit-btn",onClick:O,title:s(v)("planner.slots.edit")},[C(s(Oe),{size:12})],8,Qe),e("button",{class:"planner-slot__action-btn remove-btn",onClick:L,title:s(v)("planner.slots.remove")},[C(s(Ne),{size:12})],8,We)])):D("",!0),(l(),X(Se,{to:"body"},[n.item?(l(),X(ke,{key:0,item:n.item,visible:g.value,x:y.value,y:m.value,overrideRarity:(a=s(k).equipmentOverrides[n.id])==null?void 0:a.rarity,overrideLevel:(h=s(k).equipmentOverrides[n.id])==null?void 0:h.level,overrideStats:(I=s(k).equipmentOverrides[n.id])==null?void 0:I.stats},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])):D("",!0)]))],38)}}}),es=Y(Ze,[["__scopeId","data-v-5278db11"]]),ss={class:"planner-attr-card"},ts={class:"planner-attr-card__header"},ls={class:"planner-attr-card__title-group"},as={class:"planner-attr-card__short"},ns={class:"planner-attr-card__title"},os={class:"planner-attr-card__value"},is={class:"planner-attr-card__controls"},cs=["disabled"],rs={class:"planner-attr-card__slider-container"},us=["max","value"],ds=["disabled"],vs={class:"planner-attr-card__bonus"},_s=G({__name:"PlannerAttributeCard",props:{id:{},title:{},shortName:{},value:{},max:{},bonusText:{}},emits:["update:value"],setup(n,{emit:r}){const t=n,b=r,S=M(()=>t.max??100),k=()=>{t.value>0&&b("update:value",t.value-1)},v=()=>{t.value<S.value&&b("update:value",t.value+1)},g=y=>{const m=y.target;let c=parseInt(m.value,10);isNaN(c)&&(c=0),c>S.value&&(c=S.value),c<0&&(c=0),b("update:value",c)};return(y,m)=>(l(),i("div",ss,[e("div",ts,[e("div",ls,[e("span",as,p(n.shortName),1),e("span",ns,p(n.title),1)]),e("div",os,p(n.value),1)]),e("div",is,[e("button",{class:"planner-attr-card__btn",onClick:k,disabled:n.value<=0},"-",8,cs),e("div",rs,[e("input",{type:"range",min:0,max:S.value,value:n.value,onInput:g,class:"planner-attr-card__slider"},null,40,us),e("div",{class:"planner-attr-card__slider-track-fill",style:re({width:`${n.value/S.value*100}%`})},null,4)]),e("button",{class:"planner-attr-card__btn",onClick:v,disabled:n.value>=S.value},"+",8,ds)]),e("div",vs,p(n.bonusText),1)]))}}),ps=Y(_s,[["__scopeId","data-v-f065bfe1"]]),ms={class:"item-modal__header"},hs={class:"item-modal__title"},bs={key:0,class:"item-modal__slot-name"},fs={class:"item-modal__search-box"},ks={class:"item-modal__content"},ys={key:0,class:"item-modal__list"},Ss={key:1,class:"item-modal__empty"},gs=G({__name:"ItemSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(n,{emit:r}){const t=n,b=r,S=ie(),k=W(),{t:v}=se(),g=$(""),y=$(null),m=$(0),c=$(0),x=(a,h)=>{y.value=h,m.value=a.clientX,c.value=a.clientY},w=()=>{y.value=null},O=()=>{g.value="",y.value=null,b("close")},L=a=>{if(!a)return[];switch(a){case"weapon":switch(k.selectedClass){case"Sword & Shield":return["Sword"];case"Two-Handed Sword":return["Two Handed Sword"];case"Spear":return["Spear"];case"Dual Axe":return["Dual Axe"];case"Dual Dagger":return["Dual Dagger"];case"War Hammer":return["War Hammer"];case"Bow":return["Bow"];case"Dual Crossbow":return["Dual Crossbow"];case"Arcane Staff":return["Arcane Staff"];case"Life Staff":return["Life Staff"];default:return[]}case"offhand":return k.selectedClass==="Sword & Shield"?["Shield"]:[];case"head":return["Helmet [Heavy]","Helmet [Light]","Helmet [Robe]"];case"chest":return["Armor [Heavy]","Armor [Light]","Armor [Robe]"];case"gloves":return["Gauntlet [Heavy]","Gauntlet [Light]","Gauntlet [Robe]"];case"boots":return["Boots [Heavy]","Boots [Light]","Boots [Robe]"];case"earring1":case"earring2":return["Earring"];case"ring1":case"ring2":return["Ring"];case"bracelet":return["Bracelet"];case"necklace":return["Necklace"];case"card1":case"card2":return["Power Card"];default:return[]}},B=M(()=>{if(!t.slotId)return[];const a=L(t.slotId);let h=S.items.filter(I=>a.includes(I.tip_loc_English)&&I.baslik_loc_English);if(g.value){const I=g.value.toLowerCase();h=h.filter(z=>{var Q,U,le,ee;const A=((Q=z.baslik_loc_English)==null?void 0:Q.toLowerCase())||"",H=((U=z.baslik_loc_Turkish)==null?void 0:U.toLowerCase())||"",Z=((le=z.baslik_loc_Portuguese)==null?void 0:le.toLowerCase())||"",te=((ee=z.baslik_loc_Spanish)==null?void 0:ee.toLowerCase())||"";return A.includes(I)||H.includes(I)||Z.includes(I)||te.includes(I)})}return h.slice(0,100)}),E=a=>{b("select",a),O()},u=a=>{a.key==="Escape"&&t.visible&&O()};return _e(()=>window.addEventListener("keydown",u)),pe(()=>window.removeEventListener("keydown",u)),(a,h)=>(l(),X(Se,{to:"body"},[C(ue,{name:"modal"},{default:T(()=>[n.visible?(l(),i("div",{key:0,class:"item-modal-overlay",onClick:O},[e("div",{class:"item-modal",onClick:h[1]||(h[1]=ne(()=>{},["stop"]))},[e("div",ms,[e("h3",hs,[ae(p(s(v)("planner.modals.selector.title"))+" ",1),n.slotId?(l(),i("span",bs,"("+p(n.slotId)+")",1)):D("",!0)]),e("button",{class:"item-modal__close-btn",onClick:O},[C(s(fe),{size:20})])]),e("div",fs,[C(Fe,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=I=>g.value=I),placeholder:s(v)("planner.modals.common.search"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",ks,[B.value.length>0?(l(),i("div",ys,[(l(!0),i(F,null,V(B.value,I=>(l(),X(Re,{key:I.id,item:I,disableNavigation:!0,onClick:z=>E(I),onHover:x,onLeave:w},null,8,["item","onClick"]))),128))])):(l(),i("div",Ss,[C(s(xe),{size:32,class:"item-modal__empty-icon"}),e("p",null,p(s(v)("common.noResults")),1)]))])])])):D("",!0)]),_:1}),C(ke,{item:y.value,visible:!!y.value,x:m.value,y:c.value},null,8,["item","visible","x","y"])]))}}),$s=Y(gs,[["__scopeId","data-v-a986aa30"]]),Cs={class:"item-card__header"},ws={class:"header-top"},Is={class:"rarity-tier"},xs={class:"rarity-label"},Ns={key:0,class:"tier-label"},Es={class:"level-label"},Os={class:"item-type"},Ls={class:"header-main"},Bs={class:"item-name"},Ds={class:"header-icon"},Ms=["src"],qs={class:"item-card__simulator"},zs={class:"simulator-row",style:{width:"100%","margin-bottom":"1.25rem"}},Js={class:"simulator-header",style:{display:"flex","justify-content":"space-between","margin-bottom":"0.75rem","align-items":"flex-end"}},Fs={class:"simulator-label"},Ps={class:"simulator-value",style:{color:"#e6edf3","font-size":"0.875rem","font-weight":"600"}},Rs={class:"slider-wrapper",style:{position:"relative",width:"100%",padding:"0 4px"}},Ts={class:"simulator-row",style:{width:"100%"}},Vs={class:"simulator-header",style:{display:"flex","justify-content":"space-between","align-items":"center"}},As={class:"simulator-label"},Hs={class:"simulator-buttons"},js=["onClick","title"],Us={class:"item-card__body manual-edit-body"},Ks=["innerHTML"],Xs={class:"traits-section"},Gs=["for"],Ys=["id","onUpdate:modelValue"],Qs={class:"item-card__footer edit-footer"},Ws=G({__name:"ItemEditModal",props:{visible:{type:Boolean},slotId:{},item:{}},emits:["close"],setup(n,{emit:r}){const t=n,b=r,S=W(),k=ie(),{t:v,locale:g}=se(),y=$(1),m=$(1),c=$({}),x=M(()=>[{key:"physical_ap",label:v("stats.physical_ap")},{key:"physical_dp",label:v("stats.physical_dp")},{key:"magic_ap",label:v("stats.magic_ap")},{key:"magic_dp",label:v("stats.magic_dp")},{key:"hp",label:v("stats.hp")},{key:"mp",label:v("stats.mp")},{key:"accuracy",label:v("stats.accuracy")},{key:"evasion",label:v("stats.evasion")}]);Ie(()=>t.visible,u=>{if(u&&t.item&&t.slotId){const a=S.equipmentOverrides[t.slotId];a?(y.value=a.rarity||ce(t.item),m.value=a.level||t.item.level||1,c.value={...a.stats},x.value.forEach(h=>{if(c.value[h.key]===void 0){const I=Number(t.item[h.key]);!isNaN(I)&&I>0&&(c.value[h.key]=I)}})):(y.value=ce(t.item),m.value=t.item.level||1,c.value={},x.value.forEach(h=>{const I=Number(t.item[h.key]);!isNaN(I)&&I>0&&(c.value[h.key]=I)}))}});const w=()=>{if(!t.slotId)return;const u={};Object.keys(c.value).forEach(h=>{c.value[h]>0&&(u[h]=c.value[h])});const a={rarity:y.value,level:m.value,stats:u};S.setItemOverride(t.slotId,a),b("close")},O=u=>{u.key==="Escape"&&t.visible&&b("close")};_e(()=>window.addEventListener("keydown",O)),pe(()=>window.removeEventListener("keydown",O));const L=u=>u?g.value==="pt-BR"?u.baslik_loc_Portuguese||u.baslik_loc_English||u.id:g.value==="en"?u.baslik_loc_English||u.id:g.value==="es"?u.baslik_loc_Spanish||u.baslik_loc_English||u.id:u[`baslik_loc_${g.value}`]||u.baslik_loc_English||u.id:"",B=u=>{const a=typeof u=="number"?u:ce(u);return{1:"#e6edf3",2:"#3fb950",3:"#3f91dd",4:"#bc8cff",5:"#d29922"}[a]||"#e6edf3"},E=u=>{const a=typeof u=="number"?u:ce(u),I={1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[a]||"common";return v(`rarity.${I}`)};return(u,a)=>(l(),X(Se,{to:"body"},[C(ue,{name:"modal"},{default:T(()=>[n.visible?(l(),i("div",{key:0,class:"item-edit-overlay",onClick:a[4]||(a[4]=h=>b("close"))},[n.item?(l(),i("div",{key:0,class:"item-card-wrapper",onClick:a[3]||(a[3]=ne(()=>{},["stop"]))},[e("div",{class:"item-card",style:re({"--rarity-color":B(y.value)})},[e("button",{class:"modal-close-btn",onClick:a[0]||(a[0]=h=>b("close"))},[C(s(fe),{size:20})]),e("div",Cs,[e("div",ws,[e("div",Is,[e("span",xs,p(E(y.value)),1),n.item.tier?(l(),i("span",Ns,"T"+p(n.item.tier),1)):D("",!0),e("span",Es,"Lv. "+p(m.value),1)]),e("div",Os,p(n.item.tip_loc_English||s(v)("item.item")),1)]),e("div",Ls,[e("h2",Bs,p(L(n.item)),1)]),e("div",Ds,[n.item.icon1?(l(),i("img",{key:0,src:s(k).getIconUrl(n.item.icon1)},null,8,Ms)):(l(),X(s(ze),{key:1,size:48,class:"icon-fallback"}))])]),e("div",qs,[e("div",zs,[e("div",Js,[e("span",Fs,p(s(v)("item.simulateLevel")),1),e("span",Ps,[ae("Lv. "+p(m.value)+" ",1),a[5]||(a[5]=e("span",{style:{color:"#8b949e","font-size":"0.75rem","font-weight":"400"}},"/ 150",-1))])]),e("div",Rs,[ve(e("input",{type:"range",min:"1",max:"150","onUpdate:modelValue":a[1]||(a[1]=h=>m.value=h),class:"custom-slider",style:re({"--track-color":B(y.value)})},null,4),[[be,m.value,void 0,{number:!0}]]),a[6]||(a[6]=e("div",{class:"slider-ticks",style:{display:"flex","justify-content":"space-between","font-size":"0.65rem",color:"#8b949e","margin-top":"0.5rem"}},[e("span",null,"1"),e("span",null,"50"),e("span",null,"100"),e("span",null,"150")],-1))])]),e("div",Ts,[e("div",Vs,[e("span",As,p(s(v)("item.simulateRarity")),1),e("div",Hs,[(l(),i(F,null,V(5,h=>e("button",{key:h,class:J(["simulator-btn",{"is-active":y.value===h}]),style:re({"--btn-color":B(h)}),onClick:I=>y.value=h,title:E(h)},null,14,js)),64))])])])]),e("div",Us,[e("div",{class:"item-edit-modal__alert",innerHTML:s(v)("planner.modals.edit.alert")},null,8,Ks),e("div",Xs,[(l(!0),i(F,null,V(x.value,h=>(l(),i("div",{key:h.key,class:"trait-row"},[e("label",{for:h.key,class:"trait-label"},"• "+p(h.label)+":",9,Gs),ve(e("input",{id:h.key,type:"number","onUpdate:modelValue":I=>c.value[h.key]=I,class:"trait-input",min:"0",placeholder:"0"},null,8,Ys),[[be,c.value[h.key],void 0,{number:!0}]])]))),128))])]),e("div",Qs,[C(ye,{variant:"secondary",onClick:a[2]||(a[2]=h=>b("close"))},{default:T(()=>[ae(p(s(v)("common.cancel")),1)]),_:1}),C(ye,{variant:"primary",onClick:w},{icon:T(()=>[C(s(je),{size:16})]),default:T(()=>[ae(" "+p(s(v)("common.save")),1)]),_:1})])],4)])):D("",!0)])):D("",!0)]),_:1})]))}}),Le=Y(Ws,[["__scopeId","data-v-31ba5515"]]),Zs={key:0,class:"header-content"},et={class:"header-label"},st={key:1,class:"header-content empty-content"},tt={class:"header-label"},lt={key:0,class:"class-selector__list"},at=["onClick"],nt={class:"class-item__label"},ot=G({__name:"ClassSelector",setup(n){const r=W(),{t}=se(),b=M(()=>{var c;return(c=r.plannerData)!=null&&c.classes?r.plannerData.classes.map(x=>({id:x.id,labelKey:x.labelKey,name:x.name})):[]}),S=$(!1),k=$(null),v=M(()=>r.selectedClass&&b.value.find(c=>c.id===r.selectedClass)||null),g=c=>{r.setClass(c),S.value=!1},y=()=>{S.value=!S.value},m=c=>{k.value&&!k.value.contains(c.target)&&(S.value=!1)};return _e(()=>{document.addEventListener("click",m)}),pe(()=>{document.removeEventListener("click",m)}),(c,x)=>(l(),i("div",{class:"class-selector",ref_key:"dropdownRef",ref:k},[e("div",{class:J(["class-selector__header",{"is-open":S.value,"is-selected":!!v.value}]),onClick:y},[v.value?(l(),i("div",Zs,[e("span",et,p(s(t)(v.value.name)),1)])):(l(),i("div",st,[e("span",tt,p(s(t)("planner.class.placeholder")),1)])),C(s(ge),{size:20,class:J(["chevron-icon",{rotate:S.value}])},null,8,["class"])],2),C(ue,{name:"dropdown"},{default:T(()=>[S.value?(l(),i("div",lt,[(l(!0),i(F,null,V(b.value,w=>(l(),i("button",{key:w.id,class:J(["class-item",{"is-active":s(r).selectedClass===w.id}]),onClick:O=>g(w.id)},[e("span",nt,p(s(t)(w.name)),1)],10,at))),128))])):D("",!0)]),_:1})],512))}}),it=Y(ot,[["__scopeId","data-v-0af48b10"]]),ct={key:0,class:"header-content"},rt={class:"header-label"},ut={key:1,class:"header-content empty-content"},dt={key:0,class:"header-label"},vt={key:1,class:"header-label"},_t={key:0,class:"subclass-selector__list"},pt=["onClick"],mt={class:"subclass-item__label"},ht=G({__name:"SubclassSelector",setup(n){const r=W(),{t}=se(),b=$(!1),S=$(null),k=M(()=>!r.currentClassData||!r.currentClassData.subclasses?[]:r.currentClassData.subclasses.map(c=>({id:c.id,labelKey:c.labelKey,name:c.name}))),v=M(()=>r.selectedSubclass&&k.value.find(c=>c.id===r.selectedSubclass)||null),g=c=>{r.setSubclass(c),b.value=!1},y=()=>{k.value.length!==0&&(b.value=!b.value)},m=c=>{S.value&&!S.value.contains(c.target)&&(b.value=!1)};return _e(()=>document.addEventListener("click",m)),pe(()=>document.removeEventListener("click",m)),(c,x)=>(l(),i("div",{class:J(["subclass-selector",{"is-disabled":k.value.length===0}]),ref_key:"dropdownRef",ref:S},[e("div",{class:J(["subclass-selector__header",{"is-open":b.value,"is-selected":!!v.value}]),onClick:y},[v.value?(l(),i("div",ct,[C(s(we),{class:"header-icon",size:16}),e("span",rt,p(s(t)(v.value.name)),1)])):(l(),i("div",ut,[k.value.length>0?(l(),i("span",dt,p(s(t)("planner.subclass.placeholder")),1)):(l(),i("span",vt,p(s(t)("planner.subclass.unavailable")),1))])),k.value.length>0?(l(),X(s(ge),{key:2,size:16,class:J(["chevron-icon",{rotate:b.value}])},null,8,["class"])):D("",!0)],2),C(ue,{name:"dropdown"},{default:T(()=>[b.value?(l(),i("div",_t,[(l(!0),i(F,null,V(k.value,w=>(l(),i("button",{key:w.id,class:J(["subclass-item",{"is-active":s(r).selectedSubclass===w.id}]),onClick:O=>g(w.id)},[C(s(we),{class:"subclass-item__icon",size:14}),e("span",mt,p(s(t)(w.name)),1)],10,pt))),128))])):D("",!0)]),_:1})],2))}}),bt=Y(ht,[["__scopeId","data-v-bd5ac1a8"]]),ft={class:"row-icon-col"},kt={class:"skill-icon"},yt={class:"row-info-col"},St={class:"skill-name"},gt={key:0,class:"level-num"},$t={class:"skill-level-ctrl"},Ct={class:"muted-label"},wt={class:"ctrl-group"},It=["disabled"],xt=["disabled"],Nt={class:"row-stats-col"},Et={class:"muted-label"},Ot={class:"stats-val"},Lt={class:"highlight-blue"},Bt={class:"highlight-cyan"},Dt={class:"row-effects-col"},Mt={class:"muted-label"},qt={class:"effects-list"},zt={class:"effect-text"},Jt={key:0,class:"effect-highlight"},Ft={key:0,class:"row-action-col"},Pt={class:"stone-slot-wrapper"},Rt=["title"],Tt=["src","alt"],Vt={key:0,class:"stone-slot-actions"},At=["title"],Ht=["title"],jt=G({__name:"SkillNodeCard",props:{skill:{},index:{}},emits:["openStoneSelector","openStoneEditor"],setup(n,{emit:r}){const t=n,b=W(),S=ie(),{t:k,locale:v}=Te(),g=M(()=>{switch(v.value){case"pt-BR":return"Portuguese";case"es-ES":return"Spanish";default:return"English"}}),y=t.skill.maxLevel||25,m=M(()=>b.skillLevels[t.skill.id]||0),c=M(()=>b.skillStones[t.skill.id]),x=M(()=>!!c.value),w=M(()=>c.value?S.getItemById(c.value):null),O=M(()=>w.value?S.getIconUrl(w.value.icon1||w.value.icon):null),L=M(()=>c.value&&b.equipmentOverrides["stone_"+t.skill.id]||null),B=M(()=>{var o;if(!w.value)return"transparent";const f=((o=L.value)==null?void 0:o.rarity)??ce(w.value);return{1:"#30363d",2:"rgba(63, 185, 80, 0.4)",3:"rgba(88, 166, 255, 0.4)",4:"rgba(188, 140, 255, 0.4)",5:"rgba(227, 179, 65, 0.4)",6:"rgba(255, 123, 114, 0.4)"}[f]||"#30363d"}),E=()=>{m.value<y&&b.setSkillLevel(t.skill.id,m.value+1)},u=()=>{m.value>0&&b.setSkillLevel(t.skill.id,m.value-1)},a=M(()=>{const f=m.value;return f>=19?"rarity-epic":f>=10?"rarity-rare":f>=1?"rarity-uncommon":""}),h=f=>{const N=Math.max(1,m.value),o=N-1;if(f.template){let d=f.template;const _={};return f.params&&Object.entries(f.params).forEach(([q,j])=>{const P=(j.base||0)+(j.scaling||0)*o;_[q]=Number.isInteger(P)?P.toString():P.toFixed(1),d=d.replace(`{${q}}`,_[q])}),d.startsWith("planner.")?k(d,_):d}if(f.text){const d=f.text,_=f.scaling;if(!_||N<=1)return d;const q=_.match(/([+-]?\d+(?:\.\d+)?)/);if(!q)return d;const P=parseFloat(q[1])*o;let R=d;return _.includes("CD")||_.toLowerCase().includes("s")?(R=R.replace(/CD\s*([+-]?\d+(?:\.\d+)?)s/i,(me,K)=>"CD "+Number((parseFloat(K)+P).toFixed(1))+"s"),R===d&&(R=R.replace(/([+-]?\d+(?:\.\d+)?)s/,(me,K)=>Number((parseFloat(K)+P).toFixed(1))+"s"))):_.includes("%")?R=R.replace(/([+-]?\d+(?:\.\d+)?)%/,(me,K)=>Number((parseFloat(K)+P).toFixed(1))+"%"):R=R.replace(/([+-]?\d+(?:\.\d+)?)/,(me,K)=>Number((parseFloat(K)+P).toFixed(1)).toString()),R}return""},I=f=>f.scaling?f.scaling:f.params?Object.values(f.params).filter(N=>N.scaling!==0).map(N=>{const o=(N.scaling||0)>0?"+":"",d=f.template.includes("%")?"%":"";return`${o}${N.scaling}${d}/lvl`}).join(", "):null,z=$(null),A=$(0),H=$(0),Z=f=>{x.value&&w.value&&(z.value=w.value,A.value=f.clientX,H.value=f.clientY)},te=()=>{z.value=null},Q=()=>{z.value=null,ee("openStoneSelector",t.skill.id)},U=()=>{z.value=null,ee("openStoneEditor",t.skill.id)},le=()=>{b.setSkillStone(t.skill.id,null),z.value=null},ee=r;return(f,N)=>{var o,d;return l(),i("div",{class:J(["clean-row-card",[{"is-active":m.value>0},a.value]])},[e("div",ft,[e("div",kt,[e("span",null,p(n.index+1),1)])]),e("div",yt,[e("h4",St,[ae(p(s(k)(n.skill.name))+" ",1),m.value>0?(l(),i("span",gt," I")):D("",!0)]),e("div",$t,[e("span",Ct,p(s(k)("planner.skills.levelLabel")),1),e("div",wt,[e("button",{class:"ctrl-btn",onClick:u,disabled:m.value===0},[C(s(Ae),{size:12})],8,It),e("span",{class:J(["ctrl-val",{"is-active-val":m.value>0}])},p(m.value>0?m.value:1)+" / "+p(s(y)),3),e("button",{class:"ctrl-btn",onClick:E,disabled:m.value===s(y)},[C(s($e),{size:12})],8,xt)])])]),e("div",Nt,[e("div",Et,p(s(k)("planner.skills.costCdLabel")),1),e("div",Ot,[e("span",Lt,p(n.skill.manaCost||n.skill.baseManaCost||0)+" MP",1),N[0]||(N[0]=e("span",{class:"separator"},"•",-1)),e("span",Bt,p(n.skill.cooldown||n.skill.baseCooldown||0)+"s",1)])]),e("div",Dt,[e("div",Mt,p(s(k)("planner.skills.effectsLabel")),1),e("div",qt,[(l(!0),i(F,null,V(n.skill.effects,(_,q)=>(l(),i("div",{class:"effect-line",key:q},[e("span",zt,p(h(_)),1),I(_)?(l(),i("span",Jt,p(I(_)),1)):D("",!0)]))),128))])]),n.skill.hasStoneSlot?(l(),i("div",Ft,[e("div",Pt,[e("button",{class:J(["action-btn",{"has-gem":x.value}]),onClick:ne(Q,["stop"]),title:x.value?"":s(k)("planner.skills.equipStone"),onMousemove:Z,onMouseleave:te},[O.value?(l(),i("img",{key:0,src:O.value,alt:((o=w.value)==null?void 0:o["baslik_loc_"+g.value])||((d=w.value)==null?void 0:d.baslik_loc_English),style:re({borderColor:B.value})},null,12,Tt)):(l(),X(s(Ee),{key:1,size:20}))],42,Rt),x.value?(l(),i("div",Vt,[e("button",{class:"stone-action-btn edit-btn",onClick:ne(U,["stop"]),title:s(k)("planner.skills.changeStone")},[C(s(Oe),{size:12})],8,At),e("button",{class:"stone-action-btn remove-btn",onClick:ne(le,["stop"]),title:s(k)("planner.skills.unsocketStone")},[C(s(Ne),{size:12})],8,Ht)])):D("",!0)])])):D("",!0),C(ke,{item:z.value,visible:!!z.value,x:A.value,y:H.value,overrideRarity:z.value&&L.value?L.value.rarity:void 0,overrideLevel:z.value&&L.value?L.value.level:void 0,overrideStats:z.value&&L.value?L.value.stats:void 0},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])],2)}}}),Ut=Y(jt,[["__scopeId","data-v-9a7f8e8f"]]),Kt={class:"modal-header"},Xt={class:"modal-title"},Gt={class:"modal-search"},Yt={class:"modal-body"},Qt={key:0,class:"empty-state"},Wt={key:1,class:"item-grid"},Zt=["onClick","onMousemove"],el=["src","alt"],sl={key:1,class:"item-card__fallback"},tl={class:"item-card__info"},ll=G({__name:"SkillStoneSelectorModal",props:{show:{type:Boolean},skillId:{}},emits:["close"],setup(n,{emit:r}){const t=n,b=r,S=ie(),k=W(),{t:v}=se(),g=$(""),y=M(()=>S.items.filter(E=>E.tip_loc_English==="Skill Stone")),m=M(()=>{if(!g.value)return y.value;const E=g.value.toLowerCase();return y.value.filter(u=>{var z,A,H;const a=(z=u.baslik_loc_English||u.isim_loc_English||"")==null?void 0:z.toLowerCase(),h=(A=u.baslik_loc_Portuguese||u.isim_loc_Portuguese||"")==null?void 0:A.toLowerCase(),I=(H=u.baslik_loc_Spanish||u.isim_loc_Spanish||"")==null?void 0:H.toLowerCase();return a.includes(E)||h.includes(E)||I.includes(E)})}),c=E=>{t.skillId&&k.setSkillStone(t.skillId,E.id),x.value=null,b("close")},x=$(null),w=$(0),O=$(0),L=(E,u)=>{t.show&&(x.value=u,w.value=E.clientX,O.value=E.clientY)},B=()=>{t.show&&(x.value=null)};return Ie(()=>t.show,E=>{E||(x.value=null)}),(E,u)=>(l(),i(F,null,[C(ue,{name:"modal"},{default:T(()=>[n.show?(l(),i("div",{key:0,class:"modal-overlay",onClick:u[3]||(u[3]=a=>b("close"))},[e("div",{class:"modal-content",onClick:u[2]||(u[2]=ne(()=>{},["stop"]))},[e("div",Kt,[e("div",Xt,[C(s(Ee),{size:20,class:"title-icon"}),u[4]||(u[4]=e("h3",null,"Equip Skill Stone",-1))]),e("button",{class:"icon-btn close-btn",onClick:u[0]||(u[0]=a=>b("close"))},[C(s(fe),{size:20})])]),e("div",Gt,[C(s(xe),{class:"search-icon",size:16}),ve(e("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=a=>g.value=a),placeholder:"Search for a skill stone...",class:"search-input",ref:"searchInput"},null,512),[[be,g.value]])]),e("div",Yt,[m.value.length===0?(l(),i("div",Qt," No skill stones found. ")):(l(),i("div",Wt,[(l(!0),i(F,null,V(m.value,a=>(l(),i("button",{key:a.id,class:"item-card",onClick:h=>c(a),onMousemove:h=>L(h,a),onMouseleave:B},[e("div",{class:J(["item-card__icon","rarity-"+(a.quality||1)])},[a.icon1||a.icon?(l(),i("img",{key:0,src:s(S).getIconUrl(a.icon1||a.icon),alt:a.baslik_loc_English||a.isim_loc_English},null,8,el)):(l(),i("div",sl))],2),e("div",tl,[e("span",{class:J(["item-name","text-rarity-"+(a.quality||1)])},p(a["baslik_loc_"+s(v)("lang_suffix")]||a["isim_loc_"+s(v)("lang_suffix")]||a.baslik_loc_English||a.isim_loc_English||a.id),3)])],40,Zt))),128))]))])])])):D("",!0)]),_:1}),C(ke,{item:x.value,visible:!!x.value,x:w.value,y:O.value},null,8,["item","visible","x","y"])],64))}}),al=Y(ll,[["__scopeId","data-v-d51b71cb"]]),nl={class:"planner-skills"},ol={key:0,class:"planner-skills__empty"},il={key:1,class:"planner-skills__content"},cl={key:0,class:"passive-banner"},rl={class:"passive-banner__header"},ul={class:"passive-tag"},dl={class:"passive-name"},vl={class:"passive-desc"},_l={key:1,class:"skills-list"},pl={key:2,class:"planner-skills__empty"},ml=G({__name:"PlannerSkillsTab",setup(n){const r=W(),t=ie(),{t:b}=se(),S=M(()=>r.currentSubclassData),k=$(!1),v=$(null),g=L=>{v.value=L,k.value=!0},y=()=>{k.value=!1,v.value=null},m=$(!1),c=$(null),x=M(()=>{if(!c.value)return null;const L=r.skillStones[c.value];return L?t.getItemById(L):null}),w=L=>{c.value=L,m.value=!0},O=()=>{m.value=!1,c.value=null};return(L,B)=>(l(),i("div",nl,[S.value?(l(),i("div",il,[S.value.passive?(l(),i("div",cl,[e("div",rl,[e("span",ul,p(s(b)("planner.skills.passiveAbility")),1),e("h4",dl,p(s(b)(S.value.passive.name)),1)]),e("p",vl,p(s(b)(S.value.passive.description)),1)])):D("",!0),S.value.skills&&S.value.skills.length>0?(l(),i("div",_l,[(l(!0),i(F,null,V(S.value.skills,(E,u)=>(l(),X(Ut,{key:E.id,skill:E,index:Number(u)+1,onOpenStoneSelector:g,onOpenStoneEditor:w},null,8,["skill","index"]))),128))])):(l(),i("div",pl,[e("p",null,p(s(b)("planner.skills.noSubclassSkills")),1)]))])):(l(),i("div",ol,[e("p",null,p(s(b)("planner.skills.emptySubclass")),1)])),C(al,{show:k.value,skillId:v.value,onClose:y},null,8,["show","skillId"]),C(Le,{visible:m.value,slotId:"stone_"+c.value,item:x.value,onClose:O},null,8,["visible","slotId","item"])]))}}),hl=Y(ml,[["__scopeId","data-v-79a2b1e7"]]),bl={class:"planner-page"},fl={class:"planner-page__container"},kl={class:"planner-page__header"},yl={class:"header-left"},Sl={class:"planner-page__title"},gl={key:0,class:"build-selector-box is-creating"},$l=["placeholder"],Cl={class:"build-actions inline-actions"},wl={key:0,class:"custom-dropdown-list"},Il={key:0,class:"dropdown-item empty-state",disabled:""},xl=["onClick"],Nl={key:0,class:"dropdown-item__class"},El={class:"build-actions"},Ol=["title"],Ll=["title"],Bl={class:"header-right"},Dl={key:0,class:"error-msg"},Ml={key:1,class:"planner-layout"},ql={class:"planner-layout__col planner-layout__col--equip"},zl={class:"gear-ring"},Jl=["src"],Fl={class:"planner-layout__col planner-layout__col--attrs"},Pl={class:"planner-tabs"},Rl={class:"tab-content"},Tl={class:"planner-section-title"},Vl={class:"planner-attr-counter"},Al={class:"attr-grid"},Hl={key:0,class:"tab-content"},jl={key:0},Ul={style:{display:"flex",gap:"1rem","margin-bottom":"1.5rem"}},Kl={style:{color:"#8b949e",display:"flex","align-items":"center","font-size":"0.875rem"}},Xl={style:{"margin-top":"1rem"}},Gl={key:1,style:{color:"#8b949e","text-align":"center","margin-top":"4rem"}},Yl={class:"planner-layout__col planner-layout__col--stats"},Ql={class:"planner-stats-panel"},Wl={class:"planner-stats-panel__header"},Zl={class:"planner-stats-panel__content"},ea={class:"planner-stat-label"},sa={class:"planner-stat-value"},ta={key:0,class:"planner-stat-empty"},la=G({__name:"Planner",setup(n){const{t:r}=se(),t=W(),b=ie(),S=$("attributes"),k=$(!1),v=$(null),g=$(!1),y=$(null),m=$(null),c=$(""),x=$(!1),w=$(""),O=$(!1),L=$(null),B=()=>{x.value||(O.value=!O.value)},E=f=>{L.value&&!L.value.contains(f.target)&&(O.value=!1)},u=f=>{if(!t.selectedClass){c.value=r("planner.attributes.errorClass"),setTimeout(()=>c.value="",3e3);return}v.value=f,k.value=!0},a=(f,N)=>{y.value=f,m.value=N,g.value=!0},h=f=>{v.value&&(f===null?t.unequipItem(v.value):(t.equipItem(v.value,f),y.value=v.value,m.value=f,g.value=!0))},I=()=>{t.resetPlanner(),w.value=""},z=f=>{f&&(t.loadBuild(f),O.value=!1)},A=()=>{x.value=!0,w.value=""},H=()=>{x.value=!1,w.value=""},Z=()=>{const f=w.value.trim();if(!f){c.value=r("planner.builds.errorName"),setTimeout(()=>c.value="",3e3);return}t.newBuild(f),x.value=!1,w.value=""},te=()=>{t.currentBuildId&&confirm(r("planner.builds.confirmDelete"))&&t.deleteBuild(t.currentBuildId)},Q=M(()=>{var N;const f={};return(N=t.plannerData)!=null&&N.classes&&t.plannerData.classes.forEach(o=>{f[o.id]=o.labelKey}),f}),U=M(()=>{if(!t.currentBuildId)return t.savedBuilds.length?r("planner.builds.select"):r("planner.builds.none");const f=t.savedBuilds.find(N=>N.id===t.currentBuildId);return f?`${f.name} ${f.charClass?`(${r("planner.class.names."+(Q.value[f.charClass]||f.charClass))})`:""}`:r("planner.builds.select")});_e(async()=>{await t.loadPlannerData(),await b.loadData(),document.addEventListener("click",E)}),pe(()=>{document.removeEventListener("click",E)});const le=f=>r(`planner.attributes.bonus.${f}`),ee=f=>"/CodexFall/"+f.replace(/^\//,"");return(f,N)=>{var o,d;return l(),i("div",bl,[e("div",fl,[e("div",kl,[e("div",yl,[e("h1",Sl,p(s(r)("nav.planner")),1),e("div",{class:"build-section-wrapper",ref_key:"buildDropdownRef",ref:L},[x.value?(l(),i("div",gl,[ve(e("input",{type:"text","onUpdate:modelValue":N[0]||(N[0]=_=>w.value=_),placeholder:s(r)("planner.builds.namePlaceholder"),class:"build-input",onKeyup:Me(Z,["enter"])},null,40,$l),[[be,w.value]]),e("div",Cl,[e("button",{class:"icon-btn success-btn",onClick:Z},[C(s(Ve),{size:16})]),e("button",{class:"icon-btn",onClick:H},[C(s(fe),{size:16})])])])):(l(),i(F,{key:1},[e("div",{class:J(["build-selector-box",{"is-open":O.value,"is-selected":!!s(t).currentBuildId}]),onClick:B},[e("span",{class:J(["build-value",{placeholder:!s(t).currentBuildId}])},p(U.value),3),C(s(ge),{size:16,class:J(["chevron-icon",{rotate:O.value}])},null,8,["class"])],2),C(ue,{name:"dropdown"},{default:T(()=>[O.value?(l(),i("div",wl,[s(t).savedBuilds.length===0?(l(),i("button",Il,p(s(r)("planner.builds.none")),1)):D("",!0),(l(!0),i(F,null,V(s(t).savedBuilds,_=>(l(),i("button",{key:_.id,class:J(["dropdown-item",{"is-active":s(t).currentBuildId===_.id}]),onClick:ne(q=>z(_.id),["stop"])},[ae(p(_.name)+" ",1),_.charClass?(l(),i("span",Nl,"("+p(s(r)("planner.class.names."+(Q.value[_.charClass]||_.charClass)))+")",1)):D("",!0)],10,xl))),128))])):D("",!0)]),_:1}),e("div",El,[e("button",{class:"icon-btn",title:s(r)("planner.builds.create"),onClick:A},[C(s($e),{size:16})],8,Ol),s(t).currentBuildId?(l(),i("button",{key:0,class:"icon-btn delete-btn",title:s(r)("common.delete"),onClick:te},[C(s(Ue),{size:16})],8,Ll)):D("",!0)])],64))],512)]),e("div",Bl,[C(it),C(ye,{variant:"secondary",onClick:I,title:s(r)("planner.stats.clear")},{icon:T(()=>[C(s(He),{size:16})]),default:T(()=>[ae(" "+p(s(r)("planner.stats.clear")),1)]),_:1},8,["title"])])]),c.value?(l(),i("div",Dl,p(c.value),1)):D("",!0),s(t).isLoaded?(l(),i("div",Ml,[e("div",ql,[e("div",zl,[N[5]||(N[5]=e("div",{class:"gear-ring__bg-line"},null,-1)),N[6]||(N[6]=e("img",{src:Je,class:"gear-ring__watermark",alt:"Quinfall"},null,-1)),(l(!0),i(F,null,V((o=s(t).plannerData)==null?void 0:o.equipmentSlots,_=>(l(),i(F,{key:_.id},[!_.allowedClasses||_.allowedClasses.includes(s(t).selectedClass)?(l(),i("div",{key:0,class:J(["gear-ring__slot",_.positionClass])},[C(es,{id:_.id,item:s(t).equipment[_.id],onClick:u,onEdit:a},{icon:T(()=>[e("img",{src:ee(_.iconFallback),class:"planner-slot__fallback-img",alt:""},null,8,Jl)]),_:2},1032,["id","item"])],2)):D("",!0)],64))),128))])]),e("div",Fl,[e("div",Pl,[e("button",{class:J(["planner-tab",{"is-active":S.value==="attributes"}]),onClick:N[1]||(N[1]=_=>S.value="attributes")},p(s(r)("planner.tabs.attributes")),3),e("button",{class:J(["planner-tab",{"is-active":S.value==="skills"}]),onClick:N[2]||(N[2]=_=>S.value="skills")},p(s(r)("planner.tabs.skills")),3)]),ve(e("div",Rl,[e("div",Tl,[e("h3",null,p(s(r)("planner.attributes.title")),1),e("span",Vl,p(s(r)("planner.attributes.counter",{current:s(t).totalAttributePoints,max:600})),1)]),e("div",Al,[(l(!0),i(F,null,V((d=s(t).plannerData)==null?void 0:d.attributes,_=>(l(),X(ps,{key:_.id,id:_.id,title:s(r)("planner.attributes."+_.id),shortName:s(r)("planner.attributes."+_.id+"Short"),value:s(t).attributes[_.id],"onUpdate:value":q=>s(t).attributes[_.id]=q,max:_.max,bonusText:le(_.id)},null,8,["id","title","shortName","value","onUpdate:value","max","bonusText"]))),128))])],512),[[qe,S.value==="attributes"]]),S.value==="skills"?(l(),i("div",Hl,[s(t).selectedClass?(l(),i("div",jl,[e("div",Ul,[e("label",Kl,p(s(r)("planner.skills.selectSubclass")),1),C(bt)]),e("div",Xl,[C(hl)])])):(l(),i("div",Gl,p(s(r)("planner.skills.selectWeaponPrompt")),1))])):D("",!0)]),e("div",Yl,[e("div",Ql,[e("div",Wl,[C(s(Pe),{size:18}),e("h3",null,p(s(r)("planner.stats.title")),1)]),e("div",Zl,[(l(!0),i(F,null,V(s(t).stats,(_,q)=>(l(),i("div",{class:"planner-stat-row",key:q},[e("span",ea,p(s(r)("stats."+q.toLowerCase().replace(/ /g,"_"))),1),e("span",sa,p(_),1)]))),128)),Object.keys(s(t).stats).length===0?(l(),i("div",ta,p(s(r)("planner.stats.empty")),1)):D("",!0)])])])])):D("",!0)]),C($s,{visible:k.value,slotId:v.value,onClose:N[3]||(N[3]=_=>k.value=!1),onSelect:h},null,8,["visible","slotId"]),C(Le,{visible:g.value,slotId:y.value,item:m.value,onClose:N[4]||(N[4]=_=>{g.value=!1,y.value=null,m.value=null})},null,8,["visible","slotId","item"])])}}}),da=Y(la,[["__scopeId","data-v-5f01e679"]]);export{da as default};
