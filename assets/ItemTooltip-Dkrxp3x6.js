import{k as Re,r as M,c as p,d as De,w as fe,n as Te,S as Ve,l as v,y as ye,m as o,t as m,p as S,u as n,x as le,G as V,F as Z,q as ee,j as P,C as oe,A as c,X as Ge}from"./vue-vendor-C0EkfGRl.js";import{c as $,a as Ae,u as Ue,P as be,S as $e,f as He,b as ke,n as ge,_ as Ke}from"./index-XSguMhun.js";const pe=$("coins",[["path",{d:"M13.744 17.736a6 6 0 1 1-7.48-7.48",key:"bq4yh3"}],["path",{d:"M15 6h1v4",key:"11y1tn"}],["path",{d:"m6.134 14.768.866-.5 2 3.464",key:"17snzx"}],["circle",{cx:"16",cy:"8",r:"6",key:"14bfc9"}]]);const We=$("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const Xe=$("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Ye=$("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);const ne=$("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Qe=$("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const Ze=$("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const et=$("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function tt(e,a){const F=new Map;for(const i of Object.values(e)){if(!i?.talisman)continue;const{id:d,rarity:b}=i.talisman,x=`${d}__${b}`,f=F.get(x);f?f.count++:F.set(x,{id:d,rarity:b,count:1})}const N=[];for(const{id:i,rarity:d,count:b}of F.values()){const x=a[d];if(!x)continue;const f=x.find(k=>k.talisman===i);if(!f)continue;const B=[],E={};for(const k of[2,3,4]){const _=`bonus_${k}`,G=f[_];if(!G)continue;const O=b>=k;if(B.push({required:k,bonuses:G,active:O}),O)for(const[D,T]of Object.entries(G))E[D]||(E[D]=0),E[D]+=T}B.length>0&&N.push({setName:f.set_name,talismanName:i,rarity:d,count:b,activeBonuses:E,thresholds:B})}return N}function Se(e){return{powerStones:Array(e).fill(null),talisman:null}}const at=["id","level","tier","grade","default_grade","upgradeLevel","weight","armor_weight","speed","atk_speed","casting_speed","purchase_price","sale_price","repair_price","satis_kapali","gender","req_level"];function _e(e,a){if(!e||a<0)return{...e};const F=1+a/200,N={...e};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const d=e[i];if(typeof d=="number"&&!at.includes(i)&&!i.endsWith("_id")&&i!=="id"&&d!==0){const b=d*F;N[i]=Math.round(b*10)/10}}return N.grade=a,N}const te=e=>{if(e)return{...e,upgradeLevel:e.upgradeLevel!==void 0?Math.min(15,Math.max(0,e.upgradeLevel)):0}},st=Re("planner",()=>{const e=M([]),a=M(null),F=M(null),N=M(null),i=M(!1),d=M(null),b=M({}),x=M({}),f=M({}),B=M({}),E=M({}),k=M({}),_=async()=>{if(!i.value)try{const s=await fetch("/CodexFall/datas/plannerData.json");if(!s.ok)throw new Error("Failed to load planner data");d.value=await s.json(),d.value.equipmentSlots.forEach(y=>{y.id in b.value||(b.value[y.id]=null)}),d.value.attributes.forEach(y=>{y.id in B.value||(B.value[y.id]=0)}),i.value=!0}catch(t){console.error("Failed to load planner data",t)}},G=p(()=>Object.values(B.value).reduce((t,s)=>t+s,0)),O=p(()=>d.value?.config||null),D=p(()=>O.value?.maxAttributePoints||600),T=p(()=>O.value?.maxAttributePerAttr||100),ae=p(()=>O.value?.maxUpgradeLevel||15),A=p(()=>O.value?.maxSkillLevel||25),W=p(()=>O.value?.maxGrade||320),X=p(()=>O.value?.socketConfig||{maxPowerStones:3,maxTalismans:1}),H=p(()=>O.value?.rarityThresholds||{uncommon:1,rare:10,epic:19}),ie=p(()=>O.value?.gearscoreExcludedSlots||["card1","card2"]),ce=p(()=>O.value?.gradeSliderTicks||[0,80,160,240,320]),K=p(()=>O.value?.upgradeBonuses||{0:0,1:0,2:14,3:24,4:42,5:76,6:106,7:142,8:184,9:232,10:286,11:346,12:412,13:484,14:562,15:646}),Y=p(()=>d.value?.powerStoneStats||{}),re=p(()=>d.value?.rarityColors||{1:{hex:"#e6edf3",rgba:"rgba(230, 237, 243, 1)"},2:{hex:"#56B65C",rgba:"rgba(86, 182, 92, 1)"},3:{hex:"#4F8EFF",rgba:"rgba(79, 142, 255, 1)"},4:{hex:"#C572FF",rgba:"rgba(197, 114, 255, 1)"},5:{hex:"#FFB347",rgba:"rgba(255, 179, 71, 1)"},6:{hex:"#FFD700",rgba:"rgba(255, 215, 0, 1)"}}),se=p(()=>d.value?.modifiableStats||["physical_ap","physical_dp","magic_ap","magic_dp","hp","mp","accuracy","evasion"]),Q=p(()=>d.value?.cardStats||{}),l=t=>(d.value?.equipmentSlots||[]).find(g=>g.id===t)?.socketsEnabled??!1,u=p(()=>!d.value?.classes||!F.value?null:d.value.classes.find(t=>t.id===F.value)||null),r=p(()=>{const t=u.value;return!t||!t.subclasses||!N.value?null:t.subclasses.find(s=>s.id===N.value)||null}),w=p(()=>d.value?.setBonuses?tt(f.value,d.value.setBonuses):[]),L=p(()=>{const t={},s={},y=(h,J)=>{t[h]||(t[h]=0),t[h]+=J},g=(h,J)=>{s[h]||(s[h]=0),s[h]+=J};d.value?.attributes&&d.value.attributes.forEach(h=>{const J=B.value[h.id]||0;J>0&&h.bonuses.forEach(q=>{y(q.stat,J*q.multiplier)})}),Object.keys(b.value).forEach(h=>{const J=h,q=b.value[J];if(!q)return;const ve=x.value[J],qe=ve?.stats||{},je=ve?.upgradeLevel||0,ze=ve?.grade??q.grade??q.default_grade??0,Ce=_e(q,ze),he=1+(K.value[je.toString()]||0)/100;if((d.value?.statKeys||[]).forEach(R=>{let z;const U=qe[R.key],Pe=Number(q[R.key])||0;U!==void 0&&Number(U)!==Pe?z=Number(U):z=Number(Ce[R.key]),!isNaN(z)&&z>0&&y(R.key,z*he)}),q.id&&Q.value[q.id]){const R=Q.value[q.id];for(const[z,U]of Object.entries(R))z==="hp"||z==="mp"?g(z,Number(U)):y(z,Number(U))}const me=f.value[J];me&&me.powerStones&&me.powerStones.forEach(R=>{if(R&&Y.value[R])for(const[z,U]of Object.entries(Y.value[R]))y(z,Number(U)*he)})});for(const h of w.value)for(const[J,q]of Object.entries(h.activeBonuses))y(J,q);for(const[h,J]of Object.entries(s))t[h]&&(t[h]=t[h]*(1+J/100));for(const[h,J]of Object.entries(t))t[h]=Math.round(J*100)/100;return t});(()=>{const t=localStorage.getItem("quinfall_saved_builds");if(t)try{const s=JSON.parse(t);s.forEach(y=>{y.equipmentOverrides&&Object.keys(y.equipmentOverrides).forEach(g=>{y.equipmentOverrides[g]=te(y.equipmentOverrides[g])})}),e.value=s}catch{console.error("Failed to parse builds from localStorage")}})();const j=()=>{localStorage.setItem("quinfall_saved_builds",JSON.stringify(e.value))},I=()=>{if(!a.value)return;const t=e.value.findIndex(s=>s.id===a.value);if(t!==-1){e.value[t].charClass=F.value,e.value[t].subclass=N.value,e.value[t].equipment=JSON.parse(JSON.stringify(b.value));const s=JSON.parse(JSON.stringify(x.value)),y={};Object.keys(s).forEach(g=>{y[g]=te(s[g])}),e.value[t].equipmentOverrides=y,e.value[t].equipmentSockets=JSON.parse(JSON.stringify(f.value)),e.value[t].attributes=JSON.parse(JSON.stringify(B.value)),e.value[t].skillLevels=JSON.parse(JSON.stringify(E.value)),e.value[t].skillStones=JSON.parse(JSON.stringify(k.value)),j()}},ue=t=>{F.value=t,N.value=null,E.value={},k.value={},b.value.weapon=null,b.value.offhand=null,x.value.weapon=void 0,x.value.offhand=void 0,I()},Ne=t=>{N.value=t,I()},Oe=(t,s)=>{s<1&&(s=1),E.value[t]=s,I()},we=(t,s)=>{k.value[t]=s,I()},xe=(t,s)=>{s=Math.max(0,Math.min(T.value,isNaN(s)?0:s)),B.value[t]=s,I()},Be=(t,s)=>{b.value[t]=s,x.value[t]=void 0,f.value[t]=void 0,I()},Je=t=>{b.value[t]=null,x.value[t]=void 0,f.value[t]=void 0,I()},Fe=(t,s)=>{x.value[t]=te(s),I()},Me=(t,s,y)=>{f.value[t]||(f.value[t]=Se(X.value.maxPowerStones));const g=f.value[t];s>=0&&s<g.powerStones.length&&(g.powerStones[s]=y),I()},Ee=(t,s)=>{const y=f.value[t];y&&s>=0&&s<y.powerStones.length&&(y.powerStones[s]=null),I()},Ie=(t,s)=>{f.value[t]||(f.value[t]=Se(X.value.maxPowerStones)),f.value[t].talisman=s,I()},Le=t=>{const s=f.value[t];s&&(s.talisman=null),I()},de=()=>{F.value=null,N.value=null,Object.keys(b.value).forEach(t=>{b.value[t]=null}),x.value={},f.value={},Object.keys(B.value).forEach(t=>{B.value[t]=0}),E.value={},k.value={},a.value=null};return{savedBuilds:e,currentBuildId:a,selectedClass:F,equipment:b,equipmentOverrides:x,equipmentSockets:f,attributes:B,totalAttributePoints:G,currentClassData:u,currentSubclassData:r,stats:L,activeSetBonuses:w,setClass:ue,setSubclass:Ne,setSkillLevel:Oe,setSkillStone:we,setAttribute:xe,equipItem:Be,unequipItem:Je,setItemOverride:Fe,setPowerStone:Me,removePowerStone:Ee,setTalisman:Ie,removeTalisman:Le,isSocketsEnabled:l,resetPlanner:de,saveCurrentBuild:t=>{const s=JSON.parse(JSON.stringify(x.value)),y={};Object.keys(s).forEach(h=>{y[h]=te(s[h])});const g={id:a.value||Date.now().toString(),name:t,charClass:F.value,subclass:N.value,equipment:JSON.parse(JSON.stringify(b.value)),equipmentOverrides:y,equipmentSockets:JSON.parse(JSON.stringify(f.value)),attributes:JSON.parse(JSON.stringify(B.value)),skillLevels:JSON.parse(JSON.stringify(E.value)),skillStones:JSON.parse(JSON.stringify(k.value))};if(a.value){const h=e.value.findIndex(J=>J.id===a.value);h!==-1?(g.name=t,e.value[h]=g):e.value.push(g)}else a.value=g.id,e.value.push(g);j()},loadBuild:t=>{const s=e.value.find(g=>g.id===t);if(!s)return;a.value=s.id,F.value=s.charClass,N.value=s.subclass||null,b.value=JSON.parse(JSON.stringify(s.equipment||{}));const y=JSON.parse(JSON.stringify(s.equipmentOverrides||{}));x.value={},Object.keys(y).forEach(g=>{x.value[g]=te(y[g])}),f.value=JSON.parse(JSON.stringify(s.equipmentSockets||{})),B.value=JSON.parse(JSON.stringify(s.attributes||{})),E.value=JSON.parse(JSON.stringify(s.skillLevels||{})),k.value=JSON.parse(JSON.stringify(s.skillStones||{}))},deleteBuild:t=>{e.value=e.value.filter(s=>s.id!==t),a.value===t&&de(),j()},newBuild:t=>{de();const s=Date.now().toString();a.value=s;const y=JSON.parse(JSON.stringify(x.value)),g={};Object.keys(y).forEach(h=>{g[h]=te(y[h])}),e.value.push({id:s,name:t,charClass:null,subclass:null,equipment:JSON.parse(JSON.stringify(b.value)),equipmentOverrides:g,equipmentSockets:JSON.parse(JSON.stringify(f.value)),attributes:JSON.parse(JSON.stringify(B.value)),skillLevels:{},skillStones:{}}),j()},isLoaded:i,plannerData:d,loadPlannerData:_,selectedSubclass:N,skillLevels:E,skillStones:k,config:O,socketConfig:X,maxAttributePoints:D,maxAttributePerAttr:T,maxUpgradeLevel:ae,maxSkillLevel:A,maxGrade:W,powerStoneStatsMap:Y,cardStatsMap:Q,rarityThresholds:H,gearscoreExcludedSlots:ie,gradeSliderTicks:ce,rarityColors:re,modifiableStats:se,upgradeBonuses:K}}),lt={class:"tooltip-header"},it={class:"header-top"},rt={class:"rarity-tier"},ot={class:"rarity-label"},nt={key:0,class:"tier-label"},ct={key:1,class:"level-label"},ut={class:"item-type"},dt={class:"header-main"},vt={class:"item-name"},mt={class:"header-icon"},yt=["src"],pt={class:"tooltip-body"},ht={key:0,class:"primary-stats"},ft={key:0,class:"primary-stat-block"},bt={class:"primary-label"},kt={class:"primary-value"},gt={key:0,class:"bonus-value"},St={key:1,class:"primary-stat-block"},_t={class:"primary-label"},Nt={class:"primary-value"},Ot={key:0,class:"bonus-value"},wt={key:2,class:"grade-block"},xt={class:"grade-value"},Bt={class:"grade-label"},Jt={class:"stars-container"},Ft={key:1,class:"primary-stats"},Mt={class:"primary-stat-block"},Et={class:"primary-label"},It={class:"primary-value"},Lt={key:0,class:"bonus-value"},qt={key:0,class:"grade-block"},jt={class:"grade-value"},zt={class:"grade-label"},Ct={class:"stars-container"},Pt={key:2,class:"grade-only"},Rt={class:"grade-block"},Dt={class:"grade-value"},Tt={class:"grade-label"},Vt={class:"stars-container"},Gt={key:3,class:"item-description"},At={key:4,class:"traits-section"},Ut={class:"trait-label"},$t={class:"trait-value-container"},Ht={class:"trait-value"},Kt={key:0,class:"bonus-text"},Wt={key:5,class:"socket-section"},Xt={class:"socket-section__title"},Yt={key:0,class:"socket-stone-stats"},Qt={key:0,class:"bonus-value",style:{"font-size":"0.75rem","margin-left":"2px"}},Zt={key:0,class:"socket-talisman-row"},ea={class:"socket-talisman-count"},ta={class:"pieces-label"},aa={key:6,class:"tooltip-footer"},sa={key:0,class:"footer-prices"},la=["title"],ia={class:"footer-label"},ra={class:"footer-value"},oa={class:"footer-value-text"},na=["title"],ca={class:"footer-label"},ua={class:"footer-value"},da={class:"footer-value-text"},va=["title"],ma={class:"footer-label"},ya={class:"footer-value"},pa={class:"footer-value-text"},ha={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},fa={class:"footer-icons-row"},ba=["title"],ka=["title"],ga=["title"],Sa={class:"icon-badge is-disabled",title:"No Data for Indestructible/Trash"},_a={key:0,style:{"font-size":"0.8125rem",color:"#8b949e","text-align":"right"}},Na={style:{color:"#e6edf3","font-weight":"600"}},Oa=De({__name:"ItemTooltip",props:{item:{},visible:{type:Boolean},x:{},y:{},overrideGrade:{},overrideRarity:{},overrideLevel:{},overrideUpgradeLevel:{},overrideStats:{},slotId:{}},setup(e){const a=e,F=Ae(),N=st(),{t:i,locale:d}=Ue(),b=l=>l?d.value==="pt-BR"?l.baslik_loc_Portuguese||l.baslik_loc_English||l.id:d.value==="en"?l.baslik_loc_English||l.id:d.value==="es"?l.baslik_loc_Spanish||l.baslik_loc_English||l.id:l[`baslik_loc_${d.value}`]||l.baslik_loc_English||l.id:"",x=l=>l?d.value==="pt-BR"?l.aciklama_loc_Portuguese||l.aciklama_loc_English||"":d.value==="en"?l.aciklama_loc_English||"":d.value==="es"?l.aciklama_loc_Spanish||l.aciklama_loc_English||"":l[`aciklama_loc_${d.value}`]||l.aciklama_loc_English||"":"",f=l=>{let u;return a.overrideGrade!==void 0?u=ke(a.overrideGrade):a.overrideRarity!==void 0?u=a.overrideRarity:u=ge(l),{1:"#e6edf3",2:"#3fb950",3:"#58a6ff",4:"#bc8cff",5:"#d29922"}[u]||"#e6edf3"},B=l=>{let u;a.overrideGrade!==void 0?u=ke(a.overrideGrade):a.overrideRarity!==void 0?u=a.overrideRarity:u=ge(l);const w={1:"common",2:"uncommon",3:"rare",4:"epic",5:"legendary"}[u]||"common";return i(`rarity.${w}`)},E=p(()=>a.overrideUpgradeLevel!==void 0?a.overrideUpgradeLevel:a.item?.upgradeLevel||0),k=p(()=>{const l=E.value;return(N.upgradeBonuses?.[l.toString()]||0)/100}),_=p(()=>_e(a.item,O.value)),G=p(()=>{if(!a.item)return[];if(T.value&&N.cardStatsMap[a.item.id]){const r=[],w=N.cardStatsMap[a.item.id];for(const[L,C]of Object.entries(w))r.push({key:L,label:i("stats."+L),value:`+${C}%`,bonus:0});return r}const l=[{key:"accuracy",label:i("stats.accuracy")},{key:"atk_speed",label:i("stats.atk_speed")},{key:"evasion",label:i("stats.evasion")},{key:"hp",label:i("stats.hp")},{key:"hp_regen",label:i("stats.hp_regen")},{key:"magic_ap",label:i("stats.magic_ap")},{key:"magic_dp",label:i("stats.magic_dp")},{key:"mp",label:i("stats.mp")},{key:"mp_regen",label:i("stats.mp_regen")},{key:"physical_ap",label:i("stats.physical_ap")},{key:"physical_dp",label:i("stats.physical_dp")},{key:"speed",label:i("stats.speed")},{key:"casting_speed",label:i("stats.casting_speed")},{key:"extra_damage_mob",label:i("stats.extra_damage_mob")},{key:"extra_damage_boss",label:i("stats.extra_damage_boss")}],u=_.value;return l.filter(r=>{if(ae.value&&r.key==="hp"&&A.value.key==="hp")return!1;const w=a.item[r.key]!==void 0?Number(a.item[r.key]):0;return a.overrideStats&&a.overrideStats[r.key]!==void 0&&Number(a.overrideStats[r.key])!==w?!0:u[r.key]!==void 0&&u[r.key]!==null&&Number(u[r.key])!==0}).map(r=>{const w=a.item[r.key]!==void 0?Number(a.item[r.key]):0,L=a.overrideStats&&a.overrideStats[r.key]!==void 0&&Number(a.overrideStats[r.key])!==w,C=Number(L?a.overrideStats[r.key]:u[r.key]),j=k.value>0?Number((C*k.value).toFixed(2)):0;return{key:r.key,label:r.label,value:Number(C.toFixed(2)),bonus:j}})}),O=p(()=>a.overrideGrade!==void 0?a.overrideGrade:a.item?.grade||0),D=p(()=>{const l=O.value;return l<160?1:l>=160&&l<200?2:l>=200&&l<240?3:l>=240&&l<288?4:5}),T=p(()=>a.slotId==="card1"||a.slotId==="card2"||a.item?.tip_loc_English==="Power Card"),ae=p(()=>a.slotId==="earring1"||a.slotId==="earring2"),A=p(()=>{const l=_.value,u=Number(a.item?.hp||0),r=Number(a.item?.mp||0),w=a.overrideStats?.hp!==void 0&&Number(a.overrideStats.hp)!==u,L=a.overrideStats?.mp!==void 0&&Number(a.overrideStats.mp)!==r,C=Number((w?a.overrideStats.hp:l?.hp)||0),j=Number((L?a.overrideStats.mp:l?.mp)||0);return C>=j?{key:"hp",label:i("stats.hp"),value:Number(C.toFixed(2)),bonus:k.value>0?Number((C*k.value).toFixed(2)):0}:{key:"mp",label:i("stats.mp"),value:Number(j.toFixed(2)),bonus:k.value>0?Number((j*k.value).toFixed(2)):0}}),W=p(()=>a.slotId&&N.equipmentSockets[a.slotId]||null),X=p(()=>W.value?W.value.powerStones.filter(l=>l!==null).map(l=>{const u=F.getItemById(l),r=N.powerStoneStatsMap[l]||{},w={};for(const[C,j]of Object.entries(r)){const I=Number(j),ue=k.value>0?Number((I*k.value).toFixed(2)):0;w[C]={value:I,bonus:ue}}const L=u?b(u):l;return{id:l,name:L,stats:w}}):[]),H=p(()=>{if(!W.value?.talisman)return null;const l=W.value.talisman;let u=0;for(const r of Object.values(N.equipmentSockets))r?.talisman?.id===l.id&&r?.talisman?.rarity===l.rarity&&u++;return{...l,count:u}}),ie=p(()=>{const l=H.value?.rarity;if(!l)return"#8b949e";switch(l){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#8b949e"}}),ce=l=>{const u=b(l),r=E.value;return r>0?`+${r} ${u}`:u},K=M(null),Y=M(0),re=M(0),se=M(!1),Q=async()=>{if(!K.value||!a.visible||(await Ge(),!K.value||!a.visible))return;const l=K.value.getBoundingClientRect(),u=15;let r=a.x+u,w=a.y-l.height-u;r+l.width>window.innerWidth&&(r=a.x-l.width-u),w<0&&(w=10),Y.value=r,re.value=w,se.value=!0};return fe(()=>a.visible,l=>{l?Q():se.value=!1}),fe([()=>a.x,()=>a.y],()=>{a.visible&&Q()}),(l,u)=>Te((c(),v("div",{ref_key:"tooltipRef",ref:K,class:"item-tooltip",style:ye({left:`${Y.value}px`,top:`${re.value}px`,opacity:se.value?1:0,transition:"opacity 0.05s ease","--rarity-color":f(e.item)})},[o("div",lt,[o("div",it,[o("div",rt,[o("span",ot,m(B(e.item)),1),e.item?.tier?(c(),v("span",nt,"T"+m(e.item.tier),1)):S("",!0),e.overrideLevel||e.item?.level?(c(),v("span",ct,"Lv. "+m(e.overrideLevel||e.item?.level),1)):S("",!0)]),o("div",ut,m(e.item?.tip_loc_English||n(i)("item.item")),1)]),o("div",dt,[o("h3",vt,m(ce(e.item)),1)]),o("div",mt,[e.item?.icon1?(c(),v("img",{key:0,src:n(F).getIconUrl(e.item.icon1)},null,8,yt)):(c(),le(n(be),{key:1,size:40,class:"icon-fallback"}))])]),o("div",pt,[_.value.physical_dp||_.value.physical_ap||_.value.magic_ap||_.value.magic_dp?(c(),v("div",ht,[_.value.physical_dp||_.value.magic_dp?(c(),v("div",ft,[o("span",bt,m(_.value.physical_dp?n(i)("stats.physical_dp"):n(i)("stats.magic_dp")),1),o("span",kt,[V(m(Number(((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:_.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:_.value.magic_dp)).toFixed(2)))+" ",1),k.value>0?(c(),v("span",gt," (+"+m(Number((((e.overrideStats?.physical_dp!==void 0&&Number(e.overrideStats.physical_dp)!==Number(e.item.physical_dp||0)?e.overrideStats.physical_dp:_.value.physical_dp)||(e.overrideStats?.magic_dp!==void 0&&Number(e.overrideStats.magic_dp)!==Number(e.item.magic_dp||0)?e.overrideStats.magic_dp:_.value.magic_dp))*k.value).toFixed(2)))+") ",1)):S("",!0)])])):_.value.physical_ap||_.value.magic_ap?(c(),v("div",St,[o("span",_t,m(_.value.physical_ap?n(i)("stats.physical_ap"):n(i)("stats.magic_ap")),1),o("span",Nt,[V(m(Number(((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:_.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:_.value.magic_ap)).toFixed(2)))+" ",1),k.value>0?(c(),v("span",Ot," (+"+m(Number((((e.overrideStats?.physical_ap!==void 0&&Number(e.overrideStats.physical_ap)!==Number(e.item.physical_ap||0)?e.overrideStats.physical_ap:_.value.physical_ap)||(e.overrideStats?.magic_ap!==void 0&&Number(e.overrideStats.magic_ap)!==Number(e.item.magic_ap||0)?e.overrideStats.magic_ap:_.value.magic_ap))*k.value).toFixed(2)))+") ",1)):S("",!0)])])):S("",!0),O.value>0&&!T.value?(c(),v("div",wt,[o("span",xt,m(O.value),1),o("span",Bt,m(n(i)("item.simulateGrade")),1),o("div",Jt,[(c(),v(Z,null,ee(5,r=>P(n(ne),{key:r,size:12,class:oe(["star-icon",{"star-active":r<=D.value}])},null,8,["class"])),64))])])):S("",!0)])):ae.value&&A.value.value>0?(c(),v("div",Ft,[o("div",Mt,[o("span",Et,m(A.value.label),1),o("span",It,[V(m(A.value.value)+" ",1),A.value.bonus>0?(c(),v("span",Lt," (+"+m(A.value.bonus)+") ",1)):S("",!0)])]),O.value>0?(c(),v("div",qt,[o("span",jt,m(O.value),1),o("span",zt,m(n(i)("item.simulateGrade")),1),o("div",Ct,[(c(),v(Z,null,ee(5,r=>P(n(ne),{key:r,size:12,class:oe(["star-icon",{"star-active":r<=D.value}])},null,8,["class"])),64))])])):S("",!0)])):O.value>0&&!T.value&&!ae.value?(c(),v("div",Pt,[o("div",Rt,[o("span",Dt,m(O.value),1),o("span",Tt,m(n(i)("item.simulateGrade")),1),o("div",Vt,[(c(),v(Z,null,ee(5,r=>P(n(ne),{key:r,size:12,class:oe(["star-icon",{"star-active":r<=D.value}])},null,8,["class"])),64))])])])):S("",!0),x(e.item)&&!T.value?(c(),v("p",Gt,m(x(e.item)),1)):S("",!0),G.value.length>0?(c(),v("div",At,[(c(!0),v(Z,null,ee(G.value,r=>(c(),v("div",{class:"trait-row",key:r.key},[o("span",Ut,"â€¢ "+m(r.label)+":",1),o("span",$t,[o("span",Ht,m(r.value),1),r.bonus>0?(c(),v("span",Kt," (+"+m(r.bonus)+")",1)):S("",!0)])]))),128))])):S("",!0),X.value.length>0||H.value?(c(),v("div",Wt,[o("div",Xt,[P(n(We),{size:11}),o("span",null,m(n(i)("planner.sockets.title")),1)]),(c(!0),v(Z,null,ee(X.value,r=>(c(),v("div",{key:r.id,class:"socket-stone-row"},[P(n(ne),{size:10,class:"socket-power-icon"}),Object.keys(r.stats).length>0?(c(),v("span",Yt,[(c(!0),v(Z,null,ee(r.stats,(w,L)=>(c(),v("span",{key:L},[V(m(n(i)("stats."+L))+": "+m(w.value)+" ",1),w.bonus>0?(c(),v("span",Qt,"(+"+m(w.bonus)+")",1)):S("",!0)]))),128))])):S("",!0)]))),128)),H.value?(c(),v("div",Zt,[P(n(Ye),{size:10,style:ye({color:ie.value})},null,8,["style"]),o("span",{class:"socket-talisman-name",style:ye({color:ie.value})},m(H.value.id),5),o("span",ea,[V(m(H.value.count)+"/4 ",1),o("span",ta,m(n(i)("planner.sockets.pieces")),1)])])):S("",!0)])):S("",!0),e.item?.sale_price||e.item?.price||e.item?.repair_price||e.item?.id||e.item?.satis_kapali!==void 0||e.item?.weight||e.item?.gender!==void 0?(c(),v("div",aa,[e.item?.sale_price||e.item?.price||e.item?.repair_price?(c(),v("div",sa,[e.item?.price?(c(),v("div",{key:0,class:"footer-stat",title:n(i)("stats.purchase_price")},[o("span",ia,m(n(i)("stats.purchase_price"))+":",1),o("span",ra,[P(n(pe),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),u[0]||(u[0]=V()),o("span",oa,m(new Intl.NumberFormat(n(d)==="pt-BR"?"pt-BR":"en-US").format(e.item.price)),1)])],8,la)):S("",!0),e.item?.sale_price?(c(),v("div",{key:1,class:"footer-stat",title:n(i)("stats.sale_price")},[o("span",ca,m(n(i)("stats.sale_price"))+":",1),o("span",ua,[P(n(pe),{size:12,class:"inline-icon gold",style:{"margin-right":"4px"}}),u[1]||(u[1]=V()),o("span",da,m(new Intl.NumberFormat(n(d)==="pt-BR"?"pt-BR":"en-US").format(e.item.sale_price)),1)])],8,na)):S("",!0),e.item?.repair_price?(c(),v("div",{key:2,class:"footer-stat",title:n(i)("stats.repair_price")},[o("span",ma,m(n(i)("stats.repair_price"))+":",1),o("span",ya,[P(n(pe),{size:12,class:"inline-icon blue",style:{"margin-right":"4px"}}),u[2]||(u[2]=V()),o("span",pa,m(new Intl.NumberFormat(n(d)==="pt-BR"?"pt-BR":"en-US").format(e.item.repair_price)),1)])],8,va)):S("",!0)])):S("",!0),o("div",ha,[o("div",fa,[e.item?.id?(c(),v("div",{key:0,class:"icon-badge",title:n(i)("common.itemID")+": "+e.item.id},[P(n($e),{size:14})],8,ba)):S("",!0),e.item?.satis_kapali!==void 0&&e.item?.satis_kapali!==null?(c(),v("div",{key:1,class:oe(["icon-badge",{"is-disabled":e.item.satis_kapali!==0}]),title:e.item.satis_kapali===0?n(i)("stats.salis_closed")+": "+n(i)("common.yes"):n(i)("stats.salis_closed")+": "+n(i)("common.no")},[e.item.satis_kapali===0?(c(),le(n(be),{key:0,size:14,style:{color:"#3fb950"}})):(c(),le(n(Xe),{key:1,size:14,style:{color:"#f85149"}}))],10,ka)):S("",!0),e.item?.gender!==void 0&&e.item?.gender!==null?(c(),v("div",{key:2,class:"icon-badge",title:n(i)("stats.gender")+": "+(e.item.gender===0?"Both":e.item.gender===1?"Male":"Female")},[e.item.gender===0?(c(),le(n(et),{key:0,size:14,style:{color:"#8b949e"}})):(c(),le(n(Ze),{key:1,size:14,style:{color:"#8b949e"}}))],8,ga)):S("",!0),o("div",Sa,[P(n(Qe),{size:14})])]),e.item?.weight!==void 0&&e.item?.weight!==null?(c(),v("div",_a,[V(m(n(i)("common.weight"))+": ",1),o("span",Na,m(n(He)(e.item.weight)),1)])):S("",!0)])])):S("",!0)])],4)),[[Ve,e.visible]])}}),La=Ke(Oa,[["__scopeId","data-v-8a2e3094"]]);export{pe as C,We as G,La as I,Xe as L,Ye as S,Qe as T,et as U,Ze as a,_e as c,st as u};
