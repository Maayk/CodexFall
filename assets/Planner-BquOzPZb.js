import{d as Q,l,y as Y,C as O,I as Pe,j as p,u as s,p as I,m as e,t as n,F,q as A,x as X,Q as ke,r as B,c as V,A as t,o as de,b as ve,D as ne,B as j,G as ae,O as te,n as ie,S as Ee,w as $e,v as he,U as ze,V as Re}from"./vue-vendor-C0EkfGRl.js";import{c as _e,a as le,u as ee,b as Ce,n as ye,_ as W,X as re,S as Ie,C as fe,P as Ne,d as Te}from"./index-XSguMhun.js";import{u as Z,T as Le,G as pe,S as ce,I as be,c as ge}from"./ItemTooltip-Dkrxp3x6.js";import{A as we}from"./AppButton-gF_qhB42.js";import{A as Be,C as qe}from"./AppInput-DYjqlYit.js";import{I as Ve}from"./ItemRow-DHHIaFHi.js";import{u as Fe}from"./i18n-CUek5RsN.js";const Oe=_e("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Ae=_e("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const De=_e("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const xe=_e("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ue=_e("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const He=_e("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const Ke=_e("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ge={key:0,class:"planner-slot__placeholder"},je=["src","alt"],Xe={key:2,class:"planner-slot__active-ring"},Ye={key:3,class:"planner-slot__actions"},Qe=["title"],We=["title"],Je={key:4,class:"planner-slot__upgrade-badge"},Ze={key:5,class:"planner-slot__sockets"},es={class:"socket-dots"},ss=["title"],ts=["title"],ls=Q({__name:"PlannerSlot",props:{id:{},item:{},active:{type:Boolean}},emits:["click","edit"],setup(o,{emit:h}){const a=o,f=h,u=le(),g=Z(),{t:b}=ee(),y=B(!1),c=B(0),k=B(0),d=v=>{a.item&&(y.value=!0,c.value=v.clientX,k.value=v.clientY)},E=()=>{y.value=!1},x=(v,r)=>{if(!v)return"#30363d";const i=g.equipmentOverrides[r];let P;i?.grade!==void 0?P=Ce(i.grade):i?.rarity!==void 0?P=i.rarity:P=ye(v);const q=g.rarityColors;return q&&q[P]?.hex||"#e6edf3"},T=v=>{v.stopPropagation(),a.item&&(y.value=!1,f("edit",a.id,a.item))},N=v=>{v.stopPropagation(),a.item&&(y.value=!1,g.unequipItem(a.id))},U=V(()=>g.equipmentOverrides[a.id]?.upgradeLevel||0),D=V(()=>g.equipmentSockets[a.id]),M=V(()=>g.isSocketsEnabled(a.id)),m=V(()=>{if(!M.value)return!1;const v=D.value;return v?v.powerStones.some(r=>r!==null)||v.talisman!==null:!1}),_=V(()=>{const v=D.value?.talisman?.rarity;if(!v)return"#484f58";switch(v){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#484f58"}});return(v,r)=>(t(),l("div",{class:O(["planner-slot",{"planner-slot--empty":!o.item,"planner-slot--active":o.active}]),style:Y({borderColor:o.item?`${x(o.item,o.id)}80`:"#30363d"}),onClick:r[0]||(r[0]=i=>f("click",o.id)),onMousemove:d,onMouseleave:E},[o.item?o.item?.icon1?(t(),l("img",{key:1,src:s(u).getIconUrl(o.item.icon1),class:"planner-slot__image",alt:s(b)("item.name")},null,8,je)):I("",!0):(t(),l("div",Ge,[Pe(v.$slots,"icon",{},()=>[p(s(xe),{size:20,class:"planner-slot__fallback-icon"})])])),o.active?(t(),l("div",Xe)):I("",!0),o.item?(t(),l("div",Ye,[e("button",{class:"planner-slot__action-btn edit-btn",onClick:T,title:s(b)("planner.slots.edit")},[p(s(De),{size:12})],8,Qe),e("button",{class:"planner-slot__action-btn remove-btn",onClick:N,title:s(b)("planner.slots.remove")},[p(s(Le),{size:12})],8,We)])):I("",!0),o.item&&U.value>0?(t(),l("div",Je,n(U.value),1)):I("",!0),o.item&&m.value?(t(),l("div",Ze,[e("div",es,[(t(!0),l(F,null,A(D.value?.powerStones,(i,P)=>(t(),l("div",{key:"ps-"+P,class:O(["socket-dot",{"socket-dot--filled":i!==null}]),title:i?"Power Stone":"Empty Socket"},[p(s(pe),{size:6})],10,ss))),128))]),D.value?.talisman?(t(),l("div",{key:0,class:"socket-talisman",style:Y({color:_.value}),title:D.value.talisman.id+" ("+D.value.talisman.rarity+")"},[p(s(ce),{size:8})],12,ts)):I("",!0)])):I("",!0),(t(),X(ke,{to:"body"},[o.item?(t(),X(be,{key:0,item:o.item,visible:y.value,x:c.value,y:k.value,overrideGrade:s(g).equipmentOverrides[o.id]?.grade,overrideRarity:s(g).equipmentOverrides[o.id]?.rarity,overrideLevel:s(g).equipmentOverrides[o.id]?.level,overrideUpgradeLevel:s(g).equipmentOverrides[o.id]?.upgradeLevel,overrideStats:s(g).equipmentOverrides[o.id]?.stats,slotId:o.id},null,8,["item","visible","x","y","overrideGrade","overrideRarity","overrideLevel","overrideUpgradeLevel","overrideStats","slotId"])):I("",!0)]))],38))}}),as=W(ls,[["__scopeId","data-v-33246955"]]),ns={class:"planner-attr-card"},os={class:"planner-attr-card__header"},is={class:"planner-attr-card__title-group"},cs={class:"planner-attr-card__short"},rs={class:"planner-attr-card__title"},us={class:"planner-attr-card__value"},ds={class:"planner-attr-card__controls"},vs=["disabled"],_s={class:"planner-attr-card__slider-container"},ms=["max","value"],ps=["disabled"],hs={class:"planner-attr-card__bonus"},ks=Q({__name:"PlannerAttributeCard",props:{id:{},title:{},shortName:{},value:{},max:{},bonusText:{}},emits:["update:value"],setup(o,{emit:h}){const a=o,f=h,u=V(()=>a.max??100),g=()=>{a.value>0&&f("update:value",a.value-1)},b=()=>{a.value<u.value&&f("update:value",a.value+1)},y=c=>{const k=c.target;let d=parseInt(k.value,10);isNaN(d)&&(d=0),d>u.value&&(d=u.value),d<0&&(d=0),f("update:value",d)};return(c,k)=>(t(),l("div",ns,[e("div",os,[e("div",is,[e("span",cs,n(o.shortName),1),e("span",rs,n(o.title),1)]),e("div",us,n(o.value),1)]),e("div",ds,[e("button",{class:"planner-attr-card__btn",onClick:g,disabled:o.value<=0},"-",8,vs),e("div",_s,[e("input",{type:"range",min:0,max:u.value,value:o.value,onInput:y,class:"planner-attr-card__slider"},null,40,ms),e("div",{class:"planner-attr-card__slider-track-fill",style:Y({width:`${o.value/u.value*100}%`})},null,4)]),e("button",{class:"planner-attr-card__btn",onClick:b,disabled:o.value>=u.value},"+",8,ps)]),e("div",hs,n(o.bonusText),1)]))}}),bs=W(ks,[["__scopeId","data-v-f065bfe1"]]),ys={class:"item-modal__header"},fs={class:"item-modal__title"},Ss={key:0,class:"item-modal__slot-name"},gs={class:"item-modal__search-box"},$s={class:"item-modal__content"},Cs={key:0,class:"item-modal__list"},ws={key:1,class:"item-modal__empty"},Is=Q({__name:"ItemSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(o,{emit:h}){const a=o,f=h,u=le(),g=Z(),{t:b}=ee(),y=B(""),c=B(null),k=B(0),d=B(0),E=(m,_)=>{c.value=_,k.value=m.clientX,d.value=m.clientY},x=()=>{c.value=null},T=()=>{y.value="",c.value=null,f("close")},N=m=>{if(!m)return[];switch(m){case"weapon":switch(g.selectedClass){case"Sword & Shield":return["Sword"];case"Two-Handed Sword":return["Two Handed Sword"];case"Spear":return["Spear"];case"Dual Axe":return["Dual Axe"];case"Dual Dagger":return["Dual Dagger"];case"War Hammer":return["War Hammer"];case"Bow":return["Bow"];case"Dual Crossbow":return["Dual Crossbow"];case"Arcane Staff":return["Arcane Staff"];case"Life Staff":return["Life Staff"];default:return[]}case"offhand":return g.selectedClass==="Sword & Shield"?["Shield"]:[];case"head":return["Helmet [Heavy]","Helmet [Light]","Helmet [Robe]"];case"chest":return["Armor [Heavy]","Armor [Light]","Armor [Robe]"];case"gloves":return["Gauntlet [Heavy]","Gauntlet [Light]","Gauntlet [Robe]"];case"boots":return["Boots [Heavy]","Boots [Light]","Boots [Robe]"];case"earring1":case"earring2":return["Earring"];case"ring1":case"ring2":return["Ring"];case"bracelet":return["Bracelet"];case"necklace":return["Necklace"];case"card1":case"card2":return["Power Card"];case"bag":return["Bag"];default:return[]}},U=V(()=>{if(!a.slotId)return[];const m=N(a.slotId);let _=u.items.filter(v=>m.includes(v.tip_loc_English)&&v.baslik_loc_English);if(y.value){const v=y.value.toLowerCase();_=_.filter(r=>{const i=r.baslik_loc_English?.toLowerCase()||"",P=r.baslik_loc_Turkish?.toLowerCase()||"",q=r.baslik_loc_Portuguese?.toLowerCase()||"",G=r.baslik_loc_Spanish?.toLowerCase()||"";return i.includes(v)||P.includes(v)||q.includes(v)||G.includes(v)})}return _.slice(0,100)}),D=m=>{x(),f("select",m),T()},M=m=>{m.key==="Escape"&&a.visible&&T()};return de(()=>window.addEventListener("keydown",M)),ve(()=>window.removeEventListener("keydown",M)),(m,_)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"item-modal-overlay",onClick:T},[e("div",{class:"item-modal",onClick:_[1]||(_[1]=te(()=>{},["stop"]))},[e("div",ys,[e("h3",fs,[ae(n(s(b)("planner.modals.selector.title"))+" ",1),o.slotId?(t(),l("span",Ss,"("+n(o.slotId)+")",1)):I("",!0)]),e("button",{class:"item-modal__close-btn",onClick:T},[p(s(re),{size:20})])]),e("div",gs,[p(Be,{modelValue:y.value,"onUpdate:modelValue":_[0]||(_[0]=v=>y.value=v),placeholder:s(b)("planner.modals.common.search"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",$s,[U.value.length>0?(t(),l("div",Cs,[(t(!0),l(F,null,A(U.value,v=>(t(),X(Ve,{key:v.id,item:v,disableNavigation:!0,onClick:r=>D(v),onHover:E,onLeave:x},null,8,["item","onClick"]))),128))])):(t(),l("div",ws,[p(s(Ie),{size:32,class:"item-modal__empty-icon"}),e("p",null,n(s(b)("common.noResults")),1)]))]),p(be,{item:c.value,visible:!!c.value,x:k.value,y:d.value},null,8,["item","visible","x","y"])])])):I("",!0)]),_:1})]))}}),xs=W(Is,[["__scopeId","data-v-91c57b01"]]),Es={class:"socket-bar"},Ls={class:"socket-bar__label"},Bs={class:"socket-bar__slots"},Ds=["title","onClick"],Ms=["src","alt"],Ps=["onClick"],zs=["title"],Rs={key:0,class:"socket-bar__details"},Ns={class:"socket-detail__name"},Ts={class:"socket-detail__desc"},qs={key:0,class:"socket-detail socket-detail--talisman"},Vs={class:"socket-detail__rarity"},Fs=Q({__name:"SocketBar",props:{slotId:{}},emits:["open-power-stone","open-talisman"],setup(o,{emit:h}){const a=o,f=h,u=Z(),g=le(),{t:b,locale:y}=ee(),c=V(()=>u.equipmentSockets[a.slotId]),k=V(()=>u.socketConfig.maxPowerStones),d=m=>m?g.getItemById(m):null,E=m=>{const _=d(m);return _?y.value==="pt-BR"?_.baslik_loc_Portuguese||_.baslik_loc_English||_.id:y.value==="en"?_.baslik_loc_English||_.id:y.value==="es"?_.baslik_loc_Spanish||_.baslik_loc_English||_.id:_[`baslik_loc_${y.value}`]||_.baslik_loc_English||_.id:""},x=m=>{const _=d(m);return _?y.value==="pt-BR"?_.aciklama_loc_Portuguese||_.aciklama_loc_English||"":y.value==="en"?_.aciklama_loc_English||"":y.value==="es"?_.aciklama_loc_Spanish||_.aciklama_loc_English||"":_[`aciklama_loc_${y.value}`]||_.aciklama_loc_English||"":""},T=m=>{c.value?.powerStones[m]||f("open-power-stone",a.slotId,m)},N=(m,_)=>{m.stopPropagation(),u.removePowerStone(a.slotId,_)},U=()=>{c.value?.talisman||f("open-talisman",a.slotId)},D=m=>{m.stopPropagation(),u.removeTalisman(a.slotId)},M=V(()=>{const m=c.value?.talisman?.rarity;if(!m)return"#484f58";switch(m){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#484f58"}});return(m,_)=>(t(),l("div",Es,[e("div",Ls,[p(s(pe),{size:12}),e("span",null,n(s(b)("planner.sockets.title")),1)]),e("div",Bs,[(t(!0),l(F,null,A(k.value,v=>(t(),l("div",{key:"ps-"+v,class:O(["socket-slot socket-slot--power-stone",{"socket-slot--filled":c.value?.powerStones[v-1]}]),title:c.value?.powerStones[v-1]?E(c.value.powerStones[v-1]):s(b)("planner.sockets.powerStone")+" "+v,onClick:r=>T(v-1)},[c.value?.powerStones[v-1]?(t(),l(F,{key:0},[d(c.value.powerStones[v-1])?.icon1?(t(),l("img",{key:0,src:s(g).getIconUrl(d(c.value.powerStones[v-1]).icon1),class:"socket-slot__icon",alt:E(c.value.powerStones[v-1])},null,8,Ms)):I("",!0),e("button",{class:"socket-slot__remove",onClick:r=>N(r,v-1)},[p(s(re),{size:8})],8,Ps)],64)):(t(),X(s(pe),{key:1,size:12,class:"socket-slot__placeholder"}))],10,Ds))),128)),_[1]||(_[1]=e("div",{class:"socket-bar__divider"},null,-1)),e("div",{class:O(["socket-slot socket-slot--talisman",{"socket-slot--filled":c.value?.talisman}]),style:Y(c.value?.talisman?{borderColor:M.value}:{}),title:c.value?.talisman?c.value.talisman.id+" ("+s(b)("rarity."+c.value.talisman.rarity)+")":s(b)("planner.sockets.talisman"),onClick:U},[c.value?.talisman?(t(),l(F,{key:0},[p(s(ce),{size:12,style:Y({color:M.value})},null,8,["style"]),e("button",{class:"socket-slot__remove",onClick:_[0]||(_[0]=v=>D(v))},[p(s(re),{size:8})])],64)):(t(),X(s(ce),{key:1,size:12,class:"socket-slot__placeholder"}))],14,zs)]),c.value?(t(),l("div",Rs,[(t(!0),l(F,null,A(c.value.powerStones,(v,r)=>ie((t(),l("div",{key:"detail-"+r,class:"socket-detail"},[e("span",Ns,n(E(v)),1),e("span",Ts,n(x(v)),1)])),[[Ee,v]])),128)),c.value.talisman?(t(),l("div",qs,[p(s(ce),{size:10,style:Y({color:M.value})},null,8,["style"]),e("span",{class:"socket-detail__name",style:Y({color:M.value})},n(c.value.talisman.id),5),e("span",Vs,n(s(b)("rarity."+c.value.talisman.rarity)),1)])):I("",!0)])):I("",!0)]))}}),Os=W(Fs,[["__scopeId","data-v-f960112f"]]),As={class:"ps-modal__header"},Us={class:"ps-modal__title"},Hs={key:0,class:"ps-modal__slot-info"},Ks={class:"ps-modal__search-box"},Gs={class:"ps-modal__content"},js={key:0,class:"ps-modal__list"},Xs=["onClick","onMousemove"],Ys={class:"ps-item__icon-wrap"},Qs=["src","alt"],Ws={class:"ps-item__info"},Js={class:"ps-item__desc"},Zs={key:0,class:"ps-item__stats"},et={key:1,class:"ps-modal__empty"},st=Q({__name:"PowerStoneSelectorModal",props:{visible:{type:Boolean},slotId:{},socketIndex:{}},emits:["close","select"],setup(o,{emit:h}){const a=o,f=h,u=le(),g=Z(),{t:b,locale:y}=ee(),c=B(""),k=B(null),d=B(0),E=B(0),x=(i,P)=>{k.value=P,d.value=i.clientX,E.value=i.clientY},T=()=>{k.value=null},N=()=>{c.value="",k.value=null,f("close")},U=V(()=>{let i=u.items.filter(P=>P.tip_loc_English==="Power Stone"&&P.baslik_loc_English);if(c.value){const P=c.value.toLowerCase();i=i.filter(q=>{const G=q.baslik_loc_English?.toLowerCase()||"",C=q.baslik_loc_Portuguese?.toLowerCase()||"",L=q.baslik_loc_Spanish?.toLowerCase()||"";return G.includes(P)||C.includes(P)||L.includes(P)})}return i.sort((P,q)=>(P.default_grade||0)-(q.default_grade||0)),i}),D=i=>i?y.value==="pt-BR"?i.baslik_loc_Portuguese||i.baslik_loc_English||i.id:y.value==="en"?i.baslik_loc_English||i.id:y.value==="es"?i.baslik_loc_Spanish||i.baslik_loc_English||i.id:i[`baslik_loc_${y.value}`]||i.baslik_loc_English||i.id:"",M=i=>i?y.value==="pt-BR"?i.aciklama_loc_Portuguese||i.aciklama_loc_English||"":y.value==="en"?i.aciklama_loc_English||"":y.value==="es"?i.aciklama_loc_Spanish||i.aciklama_loc_English||"":i[`aciklama_loc_${y.value}`]||i.aciklama_loc_English||"":"",m=i=>{const P=g.rarityColors;return P&&P[i]?.hex||"#e6edf3"},_=i=>{T(),f("select",i.id),N()},v=i=>{const P=g.powerStoneStatsMap[i];return P?Object.entries(P).map(([q,G])=>`${b("stats."+q)}: +${G}%`).join(", "):""},r=i=>{i.key==="Escape"&&a.visible&&N()};return de(()=>window.addEventListener("keydown",r)),ve(()=>window.removeEventListener("keydown",r)),(i,P)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"ps-modal-overlay",onClick:N},[e("div",{class:"ps-modal",onClick:P[1]||(P[1]=te(()=>{},["stop"]))},[e("div",As,[e("h3",Us,[p(s(pe),{size:18}),ae(" "+n(s(b)("planner.sockets.powerStone"))+" ",1),o.slotId?(t(),l("span",Hs,n(o.slotId)+" — "+n(s(b)("planner.sockets.title"))+" "+n(o.socketIndex+1),1)):I("",!0)]),e("button",{class:"ps-modal__close-btn",onClick:N},[p(s(re),{size:20})])]),e("div",Ks,[p(Be,{modelValue:c.value,"onUpdate:modelValue":P[0]||(P[0]=q=>c.value=q),placeholder:s(b)("codex.searchPlaceholder"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",Gs,[U.value.length>0?(t(),l("div",js,[(t(!0),l(F,null,A(U.value,q=>(t(),l("div",{key:q.id,class:"ps-item",onClick:G=>_(q),onMousemove:G=>x(G,q),onMouseleave:T},[e("div",Ys,[q.icon1?(t(),l("img",{key:0,src:s(u).getIconUrl(q.icon1),class:"ps-item__icon",alt:D(q)},null,8,Qs)):I("",!0)]),e("div",Ws,[e("span",{class:"ps-item__name",style:Y({color:m(q.default_grade)})},n(D(q)),5),e("span",Js,n(M(q)),1),v(q.id)?(t(),l("span",Zs,n(v(q.id)),1)):I("",!0)])],40,Xs))),128))])):(t(),l("div",et,[p(s(Ie),{size:32,class:"ps-modal__empty-icon"}),e("p",null,n(s(b)("common.noResults")),1)]))]),p(be,{item:k.value,visible:!!k.value,x:d.value,y:E.value},null,8,["item","visible","x","y"])])])):I("",!0)]),_:1})]))}}),tt=W(st,[["__scopeId","data-v-b2a2132d"]]),lt={class:"talisman-modal__header"},at={class:"talisman-modal__title"},nt={key:0,class:"talisman-modal__slot-info"},ot={class:"talisman-modal__tabs"},it=["onClick"],ct={class:"talisman-modal__content"},rt={key:0,class:"talisman-modal__list"},ut=["onClick"],dt={class:"talisman-set__info"},vt={class:"talisman-set__icon-wrapper"},_t=["src","alt"],mt={key:1,class:"talisman-set__icon-fallback"},pt={class:"talisman-set__names"},ht={class:"talisman-set__name"},kt={class:"talisman-set__talisman"},bt={class:"talisman-set__meta"},yt={key:0,class:"talisman-set__count"},ft={key:0,class:"talisman-set__details"},St={class:"talisman-set__bonuses"},gt={class:"bonus-tier__label"},$t={class:"bonus-tier__stats"},Ct={class:"bonus-tier__label"},wt={class:"bonus-tier__stats"},It={class:"bonus-tier__label"},xt={class:"bonus-tier__stats"},Et=["onClick"],Lt={key:1,class:"talisman-modal__empty"},Bt=Q({__name:"TalismanSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(o,{emit:h}){const{t:a,locale:f}=ee(),u=le(),g=o,b=h,y=Z(),c=B("uncommon"),k=B(null),d=[{key:"uncommon",label:"Uncommon",color:"#56B65C"},{key:"rare",label:"Rare",color:"#4F8EFF"},{key:"legendary",label:"Legendary",color:"#FFD700"}],E={"Sovereign's Legacy":"23001","Ravager's Dominion":"23002","Divine Aegis":"23003",Tempestbound:"23004",Bladeweaver:"23005",Spellfire:"23006","Astral Conflux":"23007","Seraphic Grace":"23008","Fortress of Valor":"23009",Dragonclaw:"23010","Eldritch Catalyst":"23011","Divine Harmony":"23012"},x=V(()=>y.plannerData?.setBonuses?(y.plannerData.setBonuses[c.value]||[]).map(v=>{const r=E[v.talisman],i=r?u.getItemById(r):null,P=f.value==="pt-BR"?"Portuguese":f.value==="es-ES"?"Spanish":"English",q=i?i[`baslik_loc_${P}`]:null;return{...v,itemId:r,itemIcon:i?u.getIconUrl(i.icon1):null,dbTitle:q}}):[]),T=_=>{k.value=k.value===_?null:_},N=_=>{b("select",{id:_.talisman,rarity:c.value}),U()},U=()=>{k.value=null,b("close")},D=(_,v)=>{let r=0;for(const i of Object.values(y.equipmentSockets))i?.talisman&&i.talisman.id===_&&i.talisman.rarity===v&&r++;return r},M=_=>Object.entries(_).map(([v,r])=>({stat:a("stats."+v),value:r})),m=_=>{_.key==="Escape"&&g.visible&&U()};return de(()=>window.addEventListener("keydown",m)),ve(()=>window.removeEventListener("keydown",m)),(_,v)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"talisman-modal-overlay",onClick:U},[e("div",{class:"talisman-modal",onClick:v[0]||(v[0]=te(()=>{},["stop"]))},[e("div",lt,[e("h3",at,[p(s(ce),{size:18}),ae(" "+n(s(a)("planner.sockets.talisman"))+" ",1),o.slotId?(t(),l("span",nt," ("+n(o.slotId)+") ",1)):I("",!0)]),e("button",{class:"talisman-modal__close-btn",onClick:U},[p(s(re),{size:20})])]),e("div",ot,[(t(),l(F,null,A(d,r=>e("button",{key:r.key,class:O(["rarity-tab",{"is-active":c.value===r.key}]),style:Y(c.value===r.key?{color:r.color,borderColor:r.color}:{}),onClick:i=>{c.value=r.key,k.value=null}},n(s(a)("rarity."+r.key)),15,it)),64))]),e("div",ct,[x.value.length>0?(t(),l("div",rt,[(t(!0),l(F,null,A(x.value,r=>(t(),l("div",{key:r.set_name,class:O(["talisman-set",{"is-expanded":k.value===r.set_name}]),style:Y(k.value===r.set_name?{borderColor:d.find(i=>i.key===c.value)?.color+"66"}:{})},[e("div",{class:"talisman-set__header",onClick:i=>T(r.set_name)},[e("div",dt,[e("div",vt,[r.itemIcon?(t(),l("img",{key:0,src:r.itemIcon,alt:r.set_name,class:"talisman-set__icon"},null,8,_t)):(t(),l("div",mt,[p(s(ce),{size:20})]))]),e("div",pt,[e("span",ht,n(r.dbTitle||r.set_name),1),e("span",kt,n(r.talisman),1)]),e("div",bt,[D(r.talisman,c.value)>0?(t(),l("span",yt,n(s(a)("planner.sockets.equipped"))+": "+n(D(r.talisman,c.value))+"/4 ",1)):I("",!0)])]),p(s(fe),{size:16,class:O(["talisman-set__chevron",{"is-open":k.value===r.set_name}])},null,8,["class"])],8,ut),p(ne,{name:"expand"},{default:j(()=>[k.value===r.set_name?(t(),l("div",ft,[e("div",St,[r.bonus_2?(t(),l("div",{key:0,class:O(["bonus-tier",{"is-active":D(r.talisman,c.value)>=2}])},[e("span",gt,"2 "+n(s(a)("planner.sockets.pieces")),1),e("div",$t,[(t(!0),l(F,null,A(M(r.bonus_2),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):I("",!0),r.bonus_3?(t(),l("div",{key:1,class:O(["bonus-tier",{"is-active":D(r.talisman,c.value)>=3}])},[e("span",Ct,"3 "+n(s(a)("planner.sockets.pieces")),1),e("div",wt,[(t(!0),l(F,null,A(M(r.bonus_3),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):I("",!0),r.bonus_4?(t(),l("div",{key:2,class:O(["bonus-tier",{"is-active":D(r.talisman,c.value)>=4}])},[e("span",It,"4 "+n(s(a)("planner.sockets.pieces")),1),e("div",xt,[(t(!0),l(F,null,A(M(r.bonus_4),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):I("",!0)]),e("button",{class:"talisman-set__select-btn",onClick:te(i=>N(r),["stop"])},n(s(a)("planner.sockets.equipTalisman",{name:r.talisman})),9,Et)])):I("",!0)]),_:2},1024)],6))),128))])):(t(),l("div",Lt,[...v[1]||(v[1]=[e("p",null,"No sets available",-1)])]))])])])):I("",!0)]),_:1})]))}}),Dt=W(Bt,[["__scopeId","data-v-da995438"]]),Mt={class:"item-card__header"},Pt={class:"header-top"},zt={class:"rarity-tier"},Rt={class:"rarity-label"},Nt={key:0,class:"tier-label"},Tt={class:"level-label"},qt={class:"item-type"},Vt={class:"header-main"},Ft={class:"item-name"},Ot={class:"header-icon"},At=["src"],Ut={class:"item-card__simulator compact"},Ht={class:"simulator-row"},Kt={class:"simulator-header"},Gt={class:"simulator-label"},jt={class:"simulator-value"},Xt={class:"slider-wrapper"},Yt=["max"],Qt={class:"slider-ticks"},Wt={class:"simulator-row level-upgrade-row"},Jt={class:"level-upgrade-col"},Zt={class:"simulator-header"},el={class:"simulator-label"},sl={class:"simulator-value"},tl=["max"],ll={key:0,class:"level-upgrade-col"},al={class:"simulator-header"},nl={class:"simulator-label"},ol={class:"simulator-value"},il=["value"],cl={class:"item-card__body manual-edit-body"},rl={class:"edit-note"},ul={class:"traits-section"},dl=["for"],vl={class:"bonus-text-container"},_l={key:0,class:"bonus-text"},ml=["id","onUpdate:modelValue"],pl={class:"item-card__footer edit-footer"},hl=Q({__name:"ItemEditModal",props:{visible:{type:Boolean},slotId:{},item:{}},emits:["close"],setup(o,{emit:h}){const a=o,f=h,u=Z(),g=le(),{t:b,locale:y}=ee(),c=B(0),k=B(1),d=B(0),E=B({}),x=B(!1),T=B(0),N=B(!1),U=(C,L)=>{T.value=L,x.value=!0},D=C=>{a.slotId&&u.setPowerStone(a.slotId,T.value,C)},M=()=>{N.value=!0},m=C=>{a.slotId&&u.setTalisman(a.slotId,C)},_=V(()=>{const C=u.plannerData?.statKeys||[],L=u.modifiableStats||[];return C.filter(w=>L.includes(w.key)).map(w=>({key:w.key,label:b("stats."+w.key)}))});$e(()=>a.visible,C=>{if(C&&a.item&&a.slotId){const L=u.equipmentOverrides[a.slotId],w=L?.grade!==void 0?L.grade:a.item.default_grade||0;c.value=w,k.value=L?.level||a.item.level||1,d.value=L?.upgradeLevel!==void 0?L.upgradeLevel:0;const K=ge(a.item,w);E.value={},_.value.forEach(z=>{const S=L?.stats?.[z.key];if(S!==void 0)E.value[z.key]=S;else{const R=Number(K[z.key]);!isNaN(R)&&R>0&&(E.value[z.key]=R)}})}}),$e(c,(C,L)=>{if(a.item&&a.visible&&L!==0&&C!==L){const w=ge(a.item,C);_.value.forEach(K=>{const z=Number(w[K.key]);!isNaN(z)&&z>0?E.value[K.key]=z:delete E.value[K.key]})}});const v=()=>{if(!a.slotId||d.value<0||d.value>u.maxUpgradeLevel)return;const C={},L=ge(a.item,c.value);Object.keys(E.value).forEach(K=>{const z=E.value[K],S=Number(L[K])||0;z>0&&z!==S&&(C[K]=z)});const w={grade:c.value,level:k.value,upgradeLevel:d.value,stats:C};u.setItemOverride(a.slotId,w),f("close")},r=C=>{C.key==="Escape"&&a.visible&&f("close")};de(()=>window.addEventListener("keydown",r)),ve(()=>window.removeEventListener("keydown",r));const i=C=>C?y.value==="pt-BR"?C.baslik_loc_Portuguese||C.baslik_loc_English||C.id:y.value==="en"?C.baslik_loc_English||C.id:y.value==="es"?C.baslik_loc_Spanish||C.baslik_loc_English||C.id:C[`baslik_loc_${y.value}`]||C.baslik_loc_English||C.id:"",P=C=>{const L=typeof C=="number"&&C>5?Ce(C):typeof C=="number"?C:ye(C),w=u.rarityColors;return w&&w[L]?.hex||"#e6edf3"},q=C=>{const L=typeof C=="number"&&C>5?Ce(C):typeof C=="number"?C:ye(C),w=u.rarityColors;if(!w)return"common";const K=w[L]?.hex?Object.keys(w).find(z=>w[z].hex===w[L].hex):"common";return K?b(`rarity.${K}`):"common"},G=V(()=>{const C=d.value;return(u.upgradeBonuses?.[C.toString()]||0)/100});return(C,L)=>(t(),X(ke,{to:"body"},[p(ne,{name:"modal"},{default:j(()=>[o.visible?(t(),l("div",{key:0,class:"item-edit-overlay",onClick:L[8]||(L[8]=w=>f("close"))},[o.item?(t(),l("div",{key:0,class:"item-card-wrapper",onClick:L[7]||(L[7]=te(()=>{},["stop"]))},[e("div",{class:"item-card",style:Y({"--rarity-color":P(c.value)})},[e("button",{class:"modal-close-btn",onClick:L[0]||(L[0]=w=>f("close"))},[p(s(re),{size:16})]),e("div",Mt,[e("div",Pt,[e("div",zt,[e("span",Rt,n(q(c.value)),1),o.item.tier?(t(),l("span",Nt,"T"+n(o.item.tier),1)):I("",!0),e("span",Tt,"Lv. "+n(k.value),1)]),e("div",qt,n(o.item.tip_loc_English||s(b)("item.item")),1)]),e("div",Vt,[e("h2",Ft,n(i(o.item)),1)]),e("div",Ot,[o.item.icon1?(t(),l("img",{key:0,src:s(g).getIconUrl(o.item.icon1)},null,8,At)):(t(),X(s(Ne),{key:1,size:40,class:"icon-fallback"}))])]),e("div",Ut,[e("div",Ht,[e("div",Kt,[e("span",Gt,n(s(b)("item.grade")),1),e("span",jt,n(c.value)+" / "+n(s(u).maxGrade),1)]),e("div",Xt,[ie(e("input",{type:"range",min:"0",max:s(u).maxGrade,"onUpdate:modelValue":L[1]||(L[1]=w=>c.value=w),class:"custom-slider",style:Y({"--track-color":P(c.value)})},null,12,Yt),[[he,c.value,void 0,{number:!0}]]),e("div",Qt,[(t(!0),l(F,null,A(s(u).gradeSliderTicks,w=>(t(),l("span",{key:w},n(w),1))),128))])])]),e("div",Wt,[e("div",Jt,[e("div",Zt,[e("span",el,n(s(b)("item.simulateLevel")),1),e("span",sl,"Lv. "+n(k.value)+" / "+n(s(u).maxSkillLevel),1)]),ie(e("input",{type:"number",min:"1",max:s(u).maxSkillLevel,"onUpdate:modelValue":L[2]||(L[2]=w=>k.value=w),class:"custom-level-input"},null,8,tl),[[he,k.value,void 0,{number:!0}]])]),s(u).plannerData?.equipmentSlots.find(w=>w.id===o.slotId)?.canUpgrade!==!1?(t(),l("div",ll,[e("div",al,[e("span",nl,n(s(b)("item.upgradeLevel")),1),e("span",ol,"+"+n(d.value)+" / "+n(s(u).maxUpgradeLevel),1)]),ie(e("select",{"onUpdate:modelValue":L[3]||(L[3]=w=>d.value=w),class:"custom-level-input custom-select"},[(t(!0),l(F,null,A(s(u).maxUpgradeLevel+1,w=>(t(),l("option",{key:w-1,value:w-1}," +"+n(w-1),9,il))),128))],512),[[ze,d.value,void 0,{number:!0}]])])):I("",!0)])]),e("div",cl,[e("div",rl,n(s(b)("planner.modals.edit.alert")),1),e("div",ul,[(t(!0),l(F,null,A(_.value,w=>(t(),l("div",{key:w.key,class:"trait-row"},[e("label",{for:w.key,class:"trait-label"},"• "+n(w.label)+":",9,dl),e("span",vl,[G.value>0&&E.value[w.key]>0?(t(),l("span",_l," (+"+n(Number((E.value[w.key]*G.value).toFixed(2)))+") ",1)):I("",!0)]),ie(e("input",{id:w.key,type:"number","onUpdate:modelValue":K=>E.value[w.key]=K,class:"trait-input",min:"0",placeholder:"0"},null,8,ml),[[he,E.value[w.key],void 0,{number:!0}]])]))),128))])]),o.item&&o.slotId&&s(u).isSocketsEnabled(o.slotId)?(t(),X(Os,{key:0,slotId:o.slotId,onOpenPowerStone:U,onOpenTalisman:M},null,8,["slotId"])):I("",!0),e("div",pl,[p(we,{variant:"secondary",onClick:L[4]||(L[4]=w=>f("close"))},{default:j(()=>[ae(n(s(b)("common.cancel")),1)]),_:1}),p(we,{variant:"primary",onClick:v},{icon:j(()=>[p(s(He),{size:16})]),default:j(()=>[ae(" "+n(s(b)("common.save")),1)]),_:1})])],4),p(tt,{visible:x.value,slotId:o.slotId,socketIndex:T.value,onClose:L[5]||(L[5]=w=>x.value=!1),onSelect:D},null,8,["visible","slotId","socketIndex"]),p(Dt,{visible:N.value,slotId:o.slotId,onClose:L[6]||(L[6]=w=>N.value=!1),onSelect:m},null,8,["visible","slotId"])])):I("",!0)])):I("",!0)]),_:1})]))}}),Me=W(hl,[["__scopeId","data-v-067c3d06"]]),kl={key:0,class:"header-content"},bl={class:"header-label"},yl={key:1,class:"header-content empty-content"},fl={class:"header-label"},Sl={key:0,class:"class-selector__list"},gl=["onClick"],$l={class:"class-item__label"},Cl=Q({__name:"ClassSelector",setup(o){const h=Z(),{t:a}=ee(),f=V(()=>h.plannerData?.classes?h.plannerData.classes.map(d=>({id:d.id,labelKey:d.labelKey,name:d.name})):[]),u=B(!1),g=B(null),b=V(()=>h.selectedClass&&f.value.find(d=>d.id===h.selectedClass)||null),y=d=>{h.setClass(d),u.value=!1},c=()=>{u.value=!u.value},k=d=>{g.value&&!g.value.contains(d.target)&&(u.value=!1)};return de(()=>{document.addEventListener("click",k)}),ve(()=>{document.removeEventListener("click",k)}),(d,E)=>(t(),l("div",{class:"class-selector",ref_key:"dropdownRef",ref:g},[e("div",{class:O(["class-selector__header",{"is-open":u.value,"is-selected":!!b.value}]),onClick:c},[b.value?(t(),l("div",kl,[e("span",bl,n(s(a)(b.value.name)),1)])):(t(),l("div",yl,[e("span",fl,n(s(a)("planner.class.placeholder")),1)])),p(s(fe),{size:20,class:O(["chevron-icon",{rotate:u.value}])},null,8,["class"])],2),p(ne,{name:"dropdown"},{default:j(()=>[u.value?(t(),l("div",Sl,[(t(!0),l(F,null,A(f.value,x=>(t(),l("button",{key:x.id,class:O(["class-item",{"is-active":s(h).selectedClass===x.id}]),onClick:T=>y(x.id)},[e("span",$l,n(s(a)(x.name)),1)],10,gl))),128))])):I("",!0)]),_:1})],512))}}),wl=W(Cl,[["__scopeId","data-v-0af48b10"]]),Il={key:0,class:"header-content"},xl={class:"header-label"},El={key:1,class:"header-content empty-content"},Ll={key:0,class:"header-label"},Bl={key:1,class:"header-label"},Dl={key:0,class:"subclass-selector__list"},Ml=["onClick"],Pl={class:"subclass-item__label"},zl=Q({__name:"SubclassSelector",setup(o){const h=Z(),{t:a}=ee(),f=B(!1),u=B(null),g=V(()=>!h.currentClassData||!h.currentClassData.subclasses?[]:h.currentClassData.subclasses.map(d=>({id:d.id,labelKey:d.labelKey,name:d.name}))),b=V(()=>h.selectedSubclass&&g.value.find(d=>d.id===h.selectedSubclass)||null),y=d=>{h.setSubclass(d),f.value=!1},c=()=>{g.value.length!==0&&(f.value=!f.value)},k=d=>{u.value&&!u.value.contains(d.target)&&(f.value=!1)};return de(()=>document.addEventListener("click",k)),ve(()=>document.removeEventListener("click",k)),(d,E)=>(t(),l("div",{class:O(["subclass-selector",{"is-disabled":g.value.length===0}]),ref_key:"dropdownRef",ref:u},[e("div",{class:O(["subclass-selector__header",{"is-open":f.value,"is-selected":!!b.value}]),onClick:c},[b.value?(t(),l("div",Il,[p(s(ce),{class:"header-icon",size:16}),e("span",xl,n(s(a)(b.value.name)),1)])):(t(),l("div",El,[g.value.length>0?(t(),l("span",Ll,n(s(a)("planner.subclass.placeholder")),1)):(t(),l("span",Bl,n(s(a)("planner.subclass.unavailable")),1))])),g.value.length>0?(t(),X(s(fe),{key:2,size:16,class:O(["chevron-icon",{rotate:f.value}])},null,8,["class"])):I("",!0)],2),p(ne,{name:"dropdown"},{default:j(()=>[f.value?(t(),l("div",Dl,[(t(!0),l(F,null,A(g.value,x=>(t(),l("button",{key:x.id,class:O(["subclass-item",{"is-active":s(h).selectedSubclass===x.id}]),onClick:T=>y(x.id)},[p(s(ce),{class:"subclass-item__icon",size:14}),e("span",Pl,n(s(a)(x.name)),1)],10,Ml))),128))])):I("",!0)]),_:1})],2))}}),Rl=W(zl,[["__scopeId","data-v-bd5ac1a8"]]),Nl={class:"row-icon-col"},Tl={class:"skill-icon"},ql={class:"row-info-col"},Vl={class:"skill-name"},Fl={key:0,class:"level-num"},Ol={class:"skill-level-ctrl"},Al={class:"muted-label"},Ul={class:"ctrl-group"},Hl=["disabled"],Kl=["disabled"],Gl={class:"row-stats-col"},jl={class:"muted-label"},Xl={class:"stats-val"},Yl={class:"highlight-blue"},Ql={class:"highlight-cyan"},Wl={class:"row-effects-col"},Jl={class:"muted-label"},Zl={class:"effects-list"},ea={class:"effect-text"},sa={key:0,class:"effect-highlight"},ta={key:0,class:"row-action-col"},la={class:"stone-slot-wrapper"},aa=["title"],na=["src","alt"],oa={key:0,class:"stone-slot-actions"},ia=["title"],ca=["title"],ra=Q({__name:"SkillNodeCard",props:{skill:{},index:{}},emits:["openStoneSelector","openStoneEditor"],setup(o,{emit:h}){const a=o,f=Z(),u=le(),{t:g,locale:b}=Fe(),y=V(()=>{switch(b.value){case"pt-BR":return"Portuguese";case"es-ES":return"Spanish";default:return"English"}}),c=a.skill.maxLevel||f.maxSkillLevel,k=V(()=>f.skillLevels[a.skill.id]||0),d=V(()=>f.skillStones[a.skill.id]),E=V(()=>!!d.value),x=V(()=>d.value?u.getItemById(d.value):null),T=V(()=>x.value?u.getIconUrl(x.value.icon1||x.value.icon):null),N=V(()=>d.value&&f.equipmentOverrides["stone_"+a.skill.id]||null),U=V(()=>{if(!x.value)return"transparent";const z=N.value?.rarity??ye(x.value),S=f.rarityColors;return S&&S[z]?.rgba||"#30363d"}),D=()=>{k.value<c&&f.setSkillLevel(a.skill.id,k.value+1)},M=()=>{k.value>0&&f.setSkillLevel(a.skill.id,k.value-1)},m=V(()=>{const z=k.value,S=f.rarityThresholds;return S?z>=S.epic?"rarity-epic":z>=S.rare?"rarity-rare":z>=S.uncommon?"rarity-uncommon":"":""}),_=z=>{const S=Math.max(1,k.value),R=S-1;if(z.template){let $=z.template;const H={};return z.params&&Object.entries(z.params).forEach(([J,me])=>{const oe=(me.base||0)+(me.scaling||0)*R;H[J]=Number.isInteger(oe)?oe.toString():oe.toFixed(1),$=$.replace(`{${J}}`,H[J])}),$.startsWith("planner.")?g($,H):$}if(z.text){const $=z.text,H=z.scaling;if(!H||S<=1)return $;const J=H.match(/([+-]?\d+(?:\.\d+)?)/);if(!J)return $;const oe=parseFloat(J[1])*R;let se=$;return H.includes("CD")||H.toLowerCase().includes("s")?(se=se.replace(/CD\s*([+-]?\d+(?:\.\d+)?)s/i,(Se,ue)=>"CD "+Number((parseFloat(ue)+oe).toFixed(1))+"s"),se===$&&(se=se.replace(/([+-]?\d+(?:\.\d+)?)s/,(Se,ue)=>Number((parseFloat(ue)+oe).toFixed(1))+"s"))):H.includes("%")?se=se.replace(/([+-]?\d+(?:\.\d+)?)%/,(Se,ue)=>Number((parseFloat(ue)+oe).toFixed(1))+"%"):se=se.replace(/([+-]?\d+(?:\.\d+)?)/,(Se,ue)=>Number((parseFloat(ue)+oe).toFixed(1)).toString()),se}return""},v=z=>z.scaling?z.scaling:z.params?Object.values(z.params).filter(S=>S.scaling!==0).map(S=>{const R=(S.scaling||0)>0?"+":"",$=z.template.includes("%")?"%":"";return`${R}${S.scaling}${$}/lvl`}).join(", "):null,r=B(null),i=B(0),P=B(0),q=z=>{E.value&&x.value&&(r.value=x.value,i.value=z.clientX,P.value=z.clientY)},G=()=>{r.value=null},C=()=>{r.value=null,K("openStoneSelector",a.skill.id)},L=()=>{r.value=null,K("openStoneEditor",a.skill.id)},w=()=>{f.setSkillStone(a.skill.id,null),r.value=null},K=h;return(z,S)=>(t(),l("div",{class:O(["clean-row-card",[{"is-active":k.value>0},m.value]])},[e("div",Nl,[e("div",Tl,[e("span",null,n(o.index+1),1)])]),e("div",ql,[e("h4",Vl,[ae(n(s(g)(o.skill.name))+" ",1),k.value>0?(t(),l("span",Fl," I")):I("",!0)]),e("div",Ol,[e("span",Al,n(s(g)("planner.skills.levelLabel")),1),e("div",Ul,[e("button",{class:"ctrl-btn",onClick:M,disabled:k.value===0},[p(s(Ae),{size:12})],8,Hl),e("span",{class:O(["ctrl-val",{"is-active-val":k.value>0}])},n(k.value>0?k.value:1)+" / "+n(s(c)),3),e("button",{class:"ctrl-btn",onClick:D,disabled:k.value===s(c)},[p(s(xe),{size:12})],8,Kl)])])]),e("div",Gl,[e("div",jl,n(s(g)("planner.skills.costCdLabel")),1),e("div",Xl,[e("span",Yl,n(o.skill.manaCost||o.skill.baseManaCost||0)+" MP",1),S[0]||(S[0]=e("span",{class:"separator"},"•",-1)),e("span",Ql,n(o.skill.cooldown||o.skill.baseCooldown||0)+"s",1)])]),e("div",Wl,[e("div",Jl,n(s(g)("planner.skills.effectsLabel")),1),e("div",Zl,[(t(!0),l(F,null,A(o.skill.effects,(R,$)=>(t(),l("div",{class:"effect-line",key:$},[e("span",ea,n(_(R)),1),v(R)?(t(),l("span",sa,n(v(R)),1)):I("",!0)]))),128))])]),o.skill.hasStoneSlot?(t(),l("div",ta,[e("div",la,[e("button",{class:O(["action-btn",{"has-gem":E.value}]),onClick:te(C,["stop"]),title:E.value?"":s(g)("planner.skills.equipStone"),onMousemove:q,onMouseleave:G},[T.value?(t(),l("img",{key:0,src:T.value,alt:x.value?.["baslik_loc_"+y.value]||x.value?.baslik_loc_English,style:Y({borderColor:U.value})},null,12,na)):(t(),X(s(pe),{key:1,size:20}))],42,aa),E.value?(t(),l("div",oa,[e("button",{class:"stone-action-btn edit-btn",onClick:te(L,["stop"]),title:s(g)("planner.skills.changeStone")},[p(s(De),{size:12})],8,ia),e("button",{class:"stone-action-btn remove-btn",onClick:te(w,["stop"]),title:s(g)("planner.skills.unsocketStone")},[p(s(Le),{size:12})],8,ca)])):I("",!0)])])):I("",!0),p(be,{item:r.value,visible:!!r.value,x:i.value,y:P.value,overrideRarity:r.value&&N.value?N.value.rarity:void 0,overrideLevel:r.value&&N.value?N.value.level:void 0,overrideStats:r.value&&N.value?N.value.stats:void 0},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])],2))}}),ua=W(ra,[["__scopeId","data-v-442e9498"]]),da={class:"modal-header"},va={class:"modal-title"},_a={class:"modal-search"},ma=["placeholder"],pa={class:"modal-body"},ha={key:0,class:"empty-state"},ka={key:1,class:"item-grid"},ba=["onClick","onMousemove"],ya=["src","alt"],fa={key:1,class:"item-card__fallback"},Sa={key:2,class:"item-card__level-badge"},ga={class:"item-card__info"},$a=Q({__name:"SkillStoneSelectorModal",props:{show:{type:Boolean},skillId:{}},emits:["close"],setup(o,{emit:h}){const a=o,f=h,u=le(),g=Z(),{t:b}=ee(),y=B(""),c=V(()=>u.items.filter(D=>D.tip_loc_English==="Skill Stone")),k=V(()=>{if(!y.value)return c.value;const D=y.value.toLowerCase();return c.value.filter(M=>{const m=(M.baslik_loc_English||M.isim_loc_English||"")?.toLowerCase(),_=(M.baslik_loc_Portuguese||M.isim_loc_Portuguese||"")?.toLowerCase(),v=(M.baslik_loc_Spanish||M.isim_loc_Spanish||"")?.toLowerCase();return m.includes(D)||_.includes(D)||v.includes(D)})}),d=D=>{a.skillId&&g.setSkillStone(a.skillId,D.id),E.value=null,f("close")},E=B(null),x=B(0),T=B(0),N=(D,M)=>{a.show&&(E.value=M,x.value=D.clientX,T.value=D.clientY)},U=()=>{a.show&&(E.value=null)};return $e(()=>a.show,D=>{D||(E.value=null)}),(D,M)=>(t(),l(F,null,[p(ne,{name:"modal"},{default:j(()=>[o.show?(t(),l("div",{key:0,class:"modal-overlay",onClick:M[3]||(M[3]=m=>f("close"))},[e("div",{class:"modal-content",onClick:M[2]||(M[2]=te(()=>{},["stop"]))},[e("div",da,[e("div",va,[p(s(pe),{size:20,class:"title-icon"}),e("h3",null,n(s(b)("planner.skillStone.title")),1)]),e("button",{class:"icon-btn close-btn",onClick:M[0]||(M[0]=m=>f("close"))},[p(s(re),{size:20})])]),e("div",_a,[p(s(Ie),{class:"search-icon",size:16}),ie(e("input",{type:"text","onUpdate:modelValue":M[1]||(M[1]=m=>y.value=m),placeholder:s(b)("planner.skillStone.searchPlaceholder"),class:"search-input",ref:"searchInput"},null,8,ma),[[he,y.value]])]),e("div",pa,[k.value.length===0?(t(),l("div",ha,n(s(b)("planner.skillStone.emptyState")),1)):(t(),l("div",ka,[(t(!0),l(F,null,A(k.value,m=>(t(),l("button",{key:m.id,class:"item-card",onClick:_=>d(m),onMousemove:_=>N(_,m),onMouseleave:U},[e("div",{class:O(["item-card__icon","rarity-"+(m.quality||1)])},[m.icon1||m.icon?(t(),l("img",{key:0,src:s(u).getIconUrl(m.icon1||m.icon),alt:m.baslik_loc_English||m.isim_loc_English},null,8,ya)):(t(),l("div",fa)),m.level?(t(),l("div",Sa,"Lv. "+n(m.level),1)):I("",!0)],2),e("div",ga,[e("span",{class:O(["item-name","text-rarity-"+(m.quality||1)])},n(m["baslik_loc_"+s(b)("lang_suffix")]||m["isim_loc_"+s(b)("lang_suffix")]||m.baslik_loc_English||m.isim_loc_English||m.id),3)])],40,ba))),128))]))])])])):I("",!0)]),_:1}),p(be,{item:E.value,visible:!!E.value,x:x.value,y:T.value},null,8,["item","visible","x","y"])],64))}}),Ca=W($a,[["__scopeId","data-v-802ff69d"]]),wa={class:"planner-skills"},Ia={key:0,class:"planner-skills__empty"},xa={key:1,class:"planner-skills__content"},Ea={key:0,class:"passive-banner"},La={class:"passive-banner__header"},Ba={class:"passive-tag"},Da={class:"passive-name"},Ma={class:"passive-desc"},Pa={key:1,class:"skills-list"},za={key:2,class:"planner-skills__empty"},Ra=Q({__name:"PlannerSkillsTab",setup(o){const h=Z(),a=le(),{t:f}=ee(),u=V(()=>h.currentSubclassData),g=B(!1),b=B(null),y=N=>{b.value=N,g.value=!0},c=()=>{g.value=!1,b.value=null},k=B(!1),d=B(null),E=V(()=>{if(!d.value)return null;const N=h.skillStones[d.value];return N?a.getItemById(N):null}),x=N=>{d.value=N,k.value=!0},T=()=>{k.value=!1,d.value=null};return(N,U)=>(t(),l("div",wa,[u.value?(t(),l("div",xa,[u.value.passive?(t(),l("div",Ea,[e("div",La,[e("span",Ba,n(s(f)("planner.skills.passiveAbility")),1),e("h4",Da,n(s(f)(u.value.passive.name)),1)]),e("p",Ma,n(s(f)(u.value.passive.description)),1)])):I("",!0),u.value.skills&&u.value.skills.length>0?(t(),l("div",Pa,[(t(!0),l(F,null,A(u.value.skills,(D,M)=>(t(),X(ua,{key:D.id,skill:D,index:Number(M)+1,onOpenStoneSelector:y,onOpenStoneEditor:x},null,8,["skill","index"]))),128))])):(t(),l("div",za,[e("p",null,n(s(f)("planner.skills.noSubclassSkills")),1)]))])):(t(),l("div",Ia,[e("p",null,n(s(f)("planner.skills.emptySubclass")),1)])),p(Ca,{show:g.value,skillId:b.value,onClose:c},null,8,["show","skillId"]),p(Me,{visible:k.value,slotId:"stone_"+d.value,item:E.value,onClose:T},null,8,["visible","slotId","item"])]))}}),Na=W(Ra,[["__scopeId","data-v-79a2b1e7"]]),Ta={class:"planner-page"},qa={class:"planner-page__container"},Va={class:"planner-page__header"},Fa={class:"header-left"},Oa={class:"planner-page__title"},Aa={key:0,class:"build-selector-box is-creating"},Ua=["placeholder"],Ha={class:"build-actions inline-actions"},Ka={key:0,class:"custom-dropdown-list"},Ga={key:0,class:"dropdown-item empty-state",disabled:""},ja=["onClick"],Xa={key:0,class:"dropdown-item__class"},Ya={class:"build-actions"},Qa=["title"],Wa=["title"],Ja={class:"header-right"},Za={key:0,class:"error-msg"},en={key:1,class:"planner-layout"},sn={class:"planner-layout__col planner-layout__col--equip"},tn={class:"gear-ring"},ln=["src"],an={class:"gearscore-container"},nn={class:"gearscore-value"},on={class:"planner-layout__col planner-layout__col--attrs"},cn={class:"planner-tabs"},rn={class:"tab-content"},un={class:"planner-section-title"},dn={class:"planner-attr-counter"},vn={class:"attr-grid"},_n={key:0,class:"tab-content"},mn={key:0},pn={style:{display:"flex",gap:"1rem","margin-bottom":"1.5rem"}},hn={style:{color:"#8b949e",display:"flex","align-items":"center","font-size":"0.875rem"}},kn={style:{"margin-top":"1rem"}},bn={key:1,style:{color:"#8b949e","text-align":"center","margin-top":"4rem"}},yn={class:"planner-layout__col planner-layout__col--stats"},fn={class:"planner-stats-panel"},Sn={class:"planner-stats-panel__header"},gn={class:"planner-stats-panel__content"},$n={class:"planner-stat-label"},Cn={class:"planner-stat-value"},wn={key:0,class:"planner-stat-empty"},In={key:0,class:"planner-stats-panel__set-bonuses"},xn={class:"set-bonuses-header"},En={class:"set-bonus-entry__header"},Ln={class:"set-bonus-entry__name"},Bn={class:"set-bonus-entry__count"},Dn={class:"set-bonus-tier__label"},Mn={class:"set-bonus-tier__bonuses"},Pn={class:"set-bonus-tier__value"},zn=Q({__name:"Planner",setup(o){const{t:h}=ee(),a=Z(),f=le(),u=B("attributes"),g=B(!1),b=B(null),y=B(!1),c=B(null),k=B(null),d=B(""),E=B(!1),x=B(""),T=B(!1),N=B(null),U=()=>{E.value||(T.value=!T.value)},D=S=>{N.value&&!N.value.contains(S.target)&&(T.value=!1)},M=S=>{if(!a.selectedClass){d.value=h("planner.attributes.errorClass"),setTimeout(()=>d.value="",3e3);return}b.value=S,g.value=!0},m=(S,R)=>{c.value=S,k.value=R,y.value=!0},_=S=>{b.value&&(S===null?a.unequipItem(b.value):(a.equipItem(b.value,S),c.value=b.value,k.value=S,y.value=!0))},v=()=>{a.resetPlanner(),x.value=""},r=S=>{S&&(a.loadBuild(S),T.value=!1)},i=()=>{E.value=!0,x.value=""},P=()=>{E.value=!1,x.value=""},q=()=>{const S=x.value.trim();if(!S){d.value=h("planner.builds.errorName"),setTimeout(()=>d.value="",3e3);return}a.newBuild(S),E.value=!1,x.value=""},G=()=>{a.currentBuildId&&confirm(h("planner.builds.confirmDelete"))&&a.deleteBuild(a.currentBuildId)},C=V(()=>{const S={};return a.plannerData?.classes&&a.plannerData.classes.forEach(R=>{S[R.id]=R.labelKey}),S}),L=V(()=>{if(!a.currentBuildId)return a.savedBuilds.length?h("planner.builds.select"):h("planner.builds.none");const S=a.savedBuilds.find(R=>R.id===a.currentBuildId);return S?`${S.name} ${S.charClass?`(${h("planner.class.names."+(C.value[S.charClass]||S.charClass))})`:""}`:h("planner.builds.select")}),w=V(()=>{let S=0;return Object.keys(a.equipment).forEach(R=>{if(a.gearscoreExcludedSlots.includes(R))return;const $=a.equipment[R];if(!$)return;const H=a.equipmentOverrides[R],J=H?.grade!==void 0?H.grade:$.grade;J!=null&&(S+=Number(J))}),S});de(async()=>{await a.loadPlannerData(),await f.loadData(),document.addEventListener("click",D)}),ve(()=>{document.removeEventListener("click",D)});const K=S=>h(`planner.attributes.bonus.${S}`),z=S=>"/CodexFall/"+S.replace(/^\//,"");return(S,R)=>(t(),l("div",Ta,[e("div",qa,[e("div",Va,[e("div",Fa,[e("h1",Oa,n(s(h)("nav.planner")),1),e("div",{class:"build-section-wrapper",ref_key:"buildDropdownRef",ref:N},[E.value?(t(),l("div",Aa,[ie(e("input",{type:"text","onUpdate:modelValue":R[0]||(R[0]=$=>x.value=$),placeholder:s(h)("planner.builds.namePlaceholder"),class:"build-input",onKeyup:Re(q,["enter"])},null,40,Ua),[[he,x.value]]),e("div",Ha,[e("button",{class:"icon-btn success-btn",onClick:q},[p(s(Oe),{size:16})]),e("button",{class:"icon-btn",onClick:P},[p(s(re),{size:16})])])])):(t(),l(F,{key:1},[e("div",{class:O(["build-selector-box",{"is-open":T.value,"is-selected":!!s(a).currentBuildId}]),onClick:U},[e("span",{class:O(["build-value",{placeholder:!s(a).currentBuildId}])},n(L.value),3),p(s(fe),{size:16,class:O(["chevron-icon",{rotate:T.value}])},null,8,["class"])],2),p(ne,{name:"dropdown"},{default:j(()=>[T.value?(t(),l("div",Ka,[s(a).savedBuilds.length===0?(t(),l("button",Ga,n(s(h)("planner.builds.none")),1)):I("",!0),(t(!0),l(F,null,A(s(a).savedBuilds,$=>(t(),l("button",{key:$.id,class:O(["dropdown-item",{"is-active":s(a).currentBuildId===$.id}]),onClick:te(H=>r($.id),["stop"])},[ae(n($.name)+" ",1),$.charClass?(t(),l("span",Xa,"("+n(s(h)("planner.class.names."+(C.value[$.charClass]||$.charClass)))+")",1)):I("",!0)],10,ja))),128))])):I("",!0)]),_:1}),e("div",Ya,[e("button",{class:"icon-btn",title:s(h)("planner.builds.create"),onClick:i},[p(s(xe),{size:16})],8,Qa),s(a).currentBuildId?(t(),l("button",{key:0,class:"icon-btn delete-btn",title:s(h)("common.delete"),onClick:G},[p(s(Ke),{size:16})],8,Wa)):I("",!0)])],64))],512)]),e("div",Ja,[p(wl),p(we,{variant:"secondary",onClick:v,title:s(h)("planner.stats.clear")},{icon:j(()=>[p(s(Ue),{size:16})]),default:j(()=>[ae(" "+n(s(h)("planner.stats.clear")),1)]),_:1},8,["title"])])]),d.value?(t(),l("div",Za,n(d.value),1)):I("",!0),s(a).isLoaded?(t(),l("div",en,[e("div",sn,[e("div",tn,[R[5]||(R[5]=e("div",{class:"gear-ring__bg-line"},null,-1)),R[6]||(R[6]=e("img",{src:Te,class:"gear-ring__watermark",alt:"Quinfall"},null,-1)),(t(!0),l(F,null,A(s(a).plannerData?.equipmentSlots,$=>(t(),l(F,{key:$.id},[!$.allowedClasses||$.allowedClasses.includes(s(a).selectedClass)?(t(),l("div",{key:0,class:O(["gear-ring__slot",$.positionClass])},[p(as,{id:$.id,item:s(a).equipment[$.id],onClick:M,onEdit:m},{icon:j(()=>[e("img",{src:z($.iconFallback),class:"planner-slot__fallback-img",alt:""},null,8,ln)]),_:2},1032,["id","item"])],2)):I("",!0)],64))),128))]),e("div",an,[R[7]||(R[7]=e("div",{class:"gearscore-label"},"GEARSCORE",-1)),e("div",nn,n(w.value),1)])]),e("div",on,[e("div",cn,[e("button",{class:O(["planner-tab",{"is-active":u.value==="attributes"}]),onClick:R[1]||(R[1]=$=>u.value="attributes")},n(s(h)("planner.tabs.attributes")),3),e("button",{class:O(["planner-tab",{"is-active":u.value==="skills"}]),onClick:R[2]||(R[2]=$=>u.value="skills")},n(s(h)("planner.tabs.skills")),3)]),ie(e("div",rn,[e("div",un,[e("h3",null,n(s(h)("planner.attributes.title")),1),e("span",dn,n(s(h)("planner.attributes.counter",{current:s(a).totalAttributePoints,max:s(a).maxAttributePoints})),1)]),e("div",vn,[(t(!0),l(F,null,A(s(a).plannerData?.attributes,$=>(t(),X(bs,{key:$.id,id:$.id,title:s(h)("planner.attributes."+$.id),shortName:s(h)("planner.attributes."+$.id+"Short"),value:s(a).attributes[$.id],"onUpdate:value":H=>s(a).attributes[$.id]=H,max:$.max,bonusText:K($.id)},null,8,["id","title","shortName","value","onUpdate:value","max","bonusText"]))),128))])],512),[[Ee,u.value==="attributes"]]),u.value==="skills"?(t(),l("div",_n,[s(a).selectedClass?(t(),l("div",mn,[e("div",pn,[e("label",hn,n(s(h)("planner.skills.selectSubclass")),1),p(Rl)]),e("div",kn,[p(Na)])])):(t(),l("div",bn,n(s(h)("planner.skills.selectWeaponPrompt")),1))])):I("",!0)]),e("div",yn,[e("div",fn,[e("div",Sn,[p(s(qe),{size:18}),e("h3",null,n(s(h)("planner.stats.title")),1)]),e("div",gn,[(t(!0),l(F,null,A(s(a).stats,($,H)=>(t(),l("div",{class:"planner-stat-row",key:H},[e("span",$n,n(s(h)("stats."+H.toLowerCase().replace(/ /g,"_"))),1),e("span",Cn,n($),1)]))),128)),Object.keys(s(a).stats).length===0?(t(),l("div",wn,n(s(h)("planner.stats.empty")),1)):I("",!0)]),s(a).activeSetBonuses.length>0?(t(),l("div",In,[e("div",xn,[e("h4",null,n(s(h)("planner.sockets.setBonus")),1)]),(t(!0),l(F,null,A(s(a).activeSetBonuses,$=>(t(),l("div",{key:$.setName,class:"set-bonus-entry"},[e("div",En,[e("span",Ln,n($.setName),1),e("span",Bn,n($.count)+"/4",1)]),(t(!0),l(F,null,A($.thresholds,H=>(t(),l("div",{key:H.required,class:O(["set-bonus-tier",{"is-active":H.active}])},[e("span",Dn,n(H.required)+"pc",1),e("span",Mn,[(t(!0),l(F,null,A(H.bonuses,(J,me)=>(t(),l("span",{key:me,class:"set-bonus-tier__stat"},[ae(n(s(h)("stats."+me))+": ",1),e("span",Pn,"+"+n(J),1)]))),128))])],2))),128))]))),128))])):I("",!0)])])])):I("",!0)]),p(xs,{visible:g.value,slotId:b.value,onClose:R[3]||(R[3]=$=>g.value=!1),onSelect:_},null,8,["visible","slotId"]),p(Me,{visible:y.value,slotId:c.value,item:k.value,onClose:R[4]||(R[4]=$=>{y.value=!1,c.value=null,k.value=null})},null,8,["visible","slotId","item"])]))}}),An=W(zn,[["__scopeId","data-v-545ceae5"]]);export{An as default};
