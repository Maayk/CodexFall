import{d as Y,l,y as X,C as V,I as Me,j as p,u as s,p as x,m as e,t as n,F as O,q as A,x as j,Q as ke,r as E,c as q,A as t,o as de,b as ue,D as ae,B as K,G as le,O as se,n as oe,S as Ie,w as xe,v as he,U as Pe,V as ze}from"./vue-vendor-C0EkfGRl.js";import{c as ve,a as te,u as Z,b as $e,n as ye,_ as Q,X as ce,S as Ce,C as fe,P as Re,d as Te}from"./index-BxzMyJiG.js";import{u as J,T as Ee,G as pe,S as ie,I as be}from"./ItemTooltip-DxJ5IemV.js";import{A as ge}from"./AppButton-BJRlE_Zn.js";import{A as Le,C as Ne}from"./AppInput-C8mZZSsm.js";import{I as qe}from"./ItemRow-BLOjbt0c.js";import{u as Oe}from"./i18n-CUek5RsN.js";const Ve=ve("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Fe=ve("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Be=ve("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const we=ve("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ae=ve("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ue=ve("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const He=ve("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ge={key:0,class:"planner-slot__placeholder"},Ke=["src","alt"],je={key:2,class:"planner-slot__active-ring"},Xe={key:3,class:"planner-slot__actions"},Ye=["title"],Qe=["title"],We={key:4,class:"planner-slot__upgrade-badge"},Je={key:5,class:"planner-slot__sockets"},Ze={class:"socket-dots"},es=["title"],ss=["title"],ts=Y({__name:"PlannerSlot",props:{id:{},item:{},active:{type:Boolean}},emits:["click","edit"],setup(o,{emit:h}){const a=o,f=h,v=te(),S=J(),{t:b}=Z(),y=E(!1),c=E(0),k=E(0),d=u=>{a.item&&(y.value=!0,c.value=u.clientX,k.value=u.clientY)},L=()=>{y.value=!1},I=(u,r)=>{if(!u)return"#30363d";const i=S.equipmentOverrides[r];let P;i?.grade!==void 0?P=$e(i.grade):i?.rarity!==void 0?P=i.rarity:P=ye(u);const N=S.rarityColors;return N&&N[P]?.hex||"#e6edf3"},T=u=>{u.stopPropagation(),a.item&&(y.value=!1,f("edit",a.id,a.item))},z=u=>{u.stopPropagation(),a.item&&(y.value=!1,S.unequipItem(a.id))},U=q(()=>S.equipmentOverrides[a.id]?.upgradeLevel||0),D=q(()=>S.equipmentSockets[a.id]),M=q(()=>S.isSocketsEnabled(a.id)),m=q(()=>{if(!M.value)return!1;const u=D.value;return u?u.powerStones.some(r=>r!==null)||u.talisman!==null:!1}),_=q(()=>{const u=D.value?.talisman?.rarity;if(!u)return"#484f58";switch(u){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#484f58"}});return(u,r)=>(t(),l("div",{class:V(["planner-slot",{"planner-slot--empty":!o.item,"planner-slot--active":o.active}]),style:X({borderColor:o.item?`${I(o.item,o.id)}80`:"#30363d"}),onClick:r[0]||(r[0]=i=>f("click",o.id)),onMousemove:d,onMouseleave:L},[o.item?o.item?.icon1?(t(),l("img",{key:1,src:s(v).getIconUrl(o.item.icon1),class:"planner-slot__image",alt:s(b)("item.name")},null,8,Ke)):x("",!0):(t(),l("div",Ge,[Me(u.$slots,"icon",{},()=>[p(s(we),{size:20,class:"planner-slot__fallback-icon"})])])),o.active?(t(),l("div",je)):x("",!0),o.item?(t(),l("div",Xe,[e("button",{class:"planner-slot__action-btn edit-btn",onClick:T,title:s(b)("planner.slots.edit")},[p(s(Be),{size:12})],8,Ye),e("button",{class:"planner-slot__action-btn remove-btn",onClick:z,title:s(b)("planner.slots.remove")},[p(s(Ee),{size:12})],8,Qe)])):x("",!0),o.item&&U.value>0?(t(),l("div",We,n(U.value),1)):x("",!0),o.item&&m.value?(t(),l("div",Je,[e("div",Ze,[(t(!0),l(O,null,A(D.value?.powerStones,(i,P)=>(t(),l("div",{key:"ps-"+P,class:V(["socket-dot",{"socket-dot--filled":i!==null}]),title:i?"Power Stone":"Empty Socket"},[p(s(pe),{size:6})],10,es))),128))]),D.value?.talisman?(t(),l("div",{key:0,class:"socket-talisman",style:X({color:_.value}),title:D.value.talisman.id+" ("+D.value.talisman.rarity+")"},[p(s(ie),{size:8})],12,ss)):x("",!0)])):x("",!0),(t(),j(ke,{to:"body"},[o.item?(t(),j(be,{key:0,item:o.item,visible:y.value,x:c.value,y:k.value,overrideGrade:s(S).equipmentOverrides[o.id]?.grade,overrideRarity:s(S).equipmentOverrides[o.id]?.rarity,overrideLevel:s(S).equipmentOverrides[o.id]?.level,overrideUpgradeLevel:s(S).equipmentOverrides[o.id]?.upgradeLevel,overrideStats:s(S).equipmentOverrides[o.id]?.stats,slotId:o.id},null,8,["item","visible","x","y","overrideGrade","overrideRarity","overrideLevel","overrideUpgradeLevel","overrideStats","slotId"])):x("",!0)]))],38))}}),ls=Q(ts,[["__scopeId","data-v-33246955"]]),as={class:"planner-attr-card"},ns={class:"planner-attr-card__header"},os={class:"planner-attr-card__title-group"},is={class:"planner-attr-card__short"},cs={class:"planner-attr-card__title"},rs={class:"planner-attr-card__value"},ds={class:"planner-attr-card__controls"},us=["disabled"],vs={class:"planner-attr-card__slider-container"},_s=["max","value"],ms=["disabled"],ps={class:"planner-attr-card__bonus"},hs=Y({__name:"PlannerAttributeCard",props:{id:{},title:{},shortName:{},value:{},max:{},bonusText:{}},emits:["update:value"],setup(o,{emit:h}){const a=o,f=h,v=q(()=>a.max??100),S=()=>{a.value>0&&f("update:value",a.value-1)},b=()=>{a.value<v.value&&f("update:value",a.value+1)},y=c=>{const k=c.target;let d=parseInt(k.value,10);isNaN(d)&&(d=0),d>v.value&&(d=v.value),d<0&&(d=0),f("update:value",d)};return(c,k)=>(t(),l("div",as,[e("div",ns,[e("div",os,[e("span",is,n(o.shortName),1),e("span",cs,n(o.title),1)]),e("div",rs,n(o.value),1)]),e("div",ds,[e("button",{class:"planner-attr-card__btn",onClick:S,disabled:o.value<=0},"-",8,us),e("div",vs,[e("input",{type:"range",min:0,max:v.value,value:o.value,onInput:y,class:"planner-attr-card__slider"},null,40,_s),e("div",{class:"planner-attr-card__slider-track-fill",style:X({width:`${o.value/v.value*100}%`})},null,4)]),e("button",{class:"planner-attr-card__btn",onClick:b,disabled:o.value>=v.value},"+",8,ms)]),e("div",ps,n(o.bonusText),1)]))}}),ks=Q(hs,[["__scopeId","data-v-f065bfe1"]]),bs={class:"item-modal__header"},ys={class:"item-modal__title"},fs={key:0,class:"item-modal__slot-name"},Ss={class:"item-modal__search-box"},$s={class:"item-modal__content"},gs={key:0,class:"item-modal__list"},Cs={key:1,class:"item-modal__empty"},ws=Y({__name:"ItemSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(o,{emit:h}){const a=o,f=h,v=te(),S=J(),{t:b}=Z(),y=E(""),c=E(null),k=E(0),d=E(0),L=(m,_)=>{c.value=_,k.value=m.clientX,d.value=m.clientY},I=()=>{c.value=null},T=()=>{y.value="",c.value=null,f("close")},z=m=>{if(!m)return[];switch(m){case"weapon":switch(S.selectedClass){case"Sword & Shield":return["Sword"];case"Two-Handed Sword":return["Two Handed Sword"];case"Spear":return["Spear"];case"Dual Axe":return["Dual Axe"];case"Dual Dagger":return["Dual Dagger"];case"War Hammer":return["War Hammer"];case"Bow":return["Bow"];case"Dual Crossbow":return["Dual Crossbow"];case"Arcane Staff":return["Arcane Staff"];case"Life Staff":return["Life Staff"];default:return[]}case"offhand":return S.selectedClass==="Sword & Shield"?["Shield"]:[];case"head":return["Helmet [Heavy]","Helmet [Light]","Helmet [Robe]"];case"chest":return["Armor [Heavy]","Armor [Light]","Armor [Robe]"];case"gloves":return["Gauntlet [Heavy]","Gauntlet [Light]","Gauntlet [Robe]"];case"boots":return["Boots [Heavy]","Boots [Light]","Boots [Robe]"];case"earring1":case"earring2":return["Earring"];case"ring1":case"ring2":return["Ring"];case"bracelet":return["Bracelet"];case"necklace":return["Necklace"];case"card1":case"card2":return["Power Card"];default:return[]}},U=q(()=>{if(!a.slotId)return[];const m=z(a.slotId);let _=v.items.filter(u=>m.includes(u.tip_loc_English)&&u.baslik_loc_English);if(y.value){const u=y.value.toLowerCase();_=_.filter(r=>{const i=r.baslik_loc_English?.toLowerCase()||"",P=r.baslik_loc_Turkish?.toLowerCase()||"",N=r.baslik_loc_Portuguese?.toLowerCase()||"",C=r.baslik_loc_Spanish?.toLowerCase()||"";return i.includes(u)||P.includes(u)||N.includes(u)||C.includes(u)})}return _.slice(0,100)}),D=m=>{I(),f("select",m),T()},M=m=>{m.key==="Escape"&&a.visible&&T()};return de(()=>window.addEventListener("keydown",M)),ue(()=>window.removeEventListener("keydown",M)),(m,_)=>(t(),j(ke,{to:"body"},[p(ae,{name:"modal"},{default:K(()=>[o.visible?(t(),l("div",{key:0,class:"item-modal-overlay",onClick:T},[e("div",{class:"item-modal",onClick:_[1]||(_[1]=se(()=>{},["stop"]))},[e("div",bs,[e("h3",ys,[le(n(s(b)("planner.modals.selector.title"))+" ",1),o.slotId?(t(),l("span",fs,"("+n(o.slotId)+")",1)):x("",!0)]),e("button",{class:"item-modal__close-btn",onClick:T},[p(s(ce),{size:20})])]),e("div",Ss,[p(Le,{modelValue:y.value,"onUpdate:modelValue":_[0]||(_[0]=u=>y.value=u),placeholder:s(b)("planner.modals.common.search"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",$s,[U.value.length>0?(t(),l("div",gs,[(t(!0),l(O,null,A(U.value,u=>(t(),j(qe,{key:u.id,item:u,disableNavigation:!0,onClick:r=>D(u),onHover:L,onLeave:I},null,8,["item","onClick"]))),128))])):(t(),l("div",Cs,[p(s(Ce),{size:32,class:"item-modal__empty-icon"}),e("p",null,n(s(b)("common.noResults")),1)]))]),p(be,{item:c.value,visible:!!c.value,x:k.value,y:d.value},null,8,["item","visible","x","y"])])])):x("",!0)]),_:1})]))}}),Is=Q(ws,[["__scopeId","data-v-9e9fb7dd"]]),xs={class:"socket-bar"},Es={class:"socket-bar__label"},Ls={class:"socket-bar__slots"},Bs=["title","onClick"],Ds=["src","alt"],Ms=["onClick"],Ps=["title"],zs={key:0,class:"socket-bar__details"},Rs={class:"socket-detail__name"},Ts={class:"socket-detail__desc"},Ns={key:0,class:"socket-detail socket-detail--talisman"},qs={class:"socket-detail__rarity"},Os=Y({__name:"SocketBar",props:{slotId:{}},emits:["open-power-stone","open-talisman"],setup(o,{emit:h}){const a=o,f=h,v=J(),S=te(),{t:b,locale:y}=Z(),c=q(()=>v.equipmentSockets[a.slotId]),k=q(()=>v.socketConfig.maxPowerStones),d=m=>m?S.getItemById(m):null,L=m=>{const _=d(m);return _?y.value==="pt-BR"?_.baslik_loc_Portuguese||_.baslik_loc_English||_.id:y.value==="en"?_.baslik_loc_English||_.id:y.value==="es"?_.baslik_loc_Spanish||_.baslik_loc_English||_.id:_[`baslik_loc_${y.value}`]||_.baslik_loc_English||_.id:""},I=m=>{const _=d(m);return _?y.value==="pt-BR"?_.aciklama_loc_Portuguese||_.aciklama_loc_English||"":y.value==="en"?_.aciklama_loc_English||"":y.value==="es"?_.aciklama_loc_Spanish||_.aciklama_loc_English||"":_[`aciklama_loc_${y.value}`]||_.aciklama_loc_English||"":""},T=m=>{c.value?.powerStones[m]||f("open-power-stone",a.slotId,m)},z=(m,_)=>{m.stopPropagation(),v.removePowerStone(a.slotId,_)},U=()=>{c.value?.talisman||f("open-talisman",a.slotId)},D=m=>{m.stopPropagation(),v.removeTalisman(a.slotId)},M=q(()=>{const m=c.value?.talisman?.rarity;if(!m)return"#484f58";switch(m){case"uncommon":return"#56B65C";case"rare":return"#4F8EFF";case"legendary":return"#FFD700";default:return"#484f58"}});return(m,_)=>(t(),l("div",xs,[e("div",Es,[p(s(pe),{size:12}),e("span",null,n(s(b)("planner.sockets.title")),1)]),e("div",Ls,[(t(!0),l(O,null,A(k.value,u=>(t(),l("div",{key:"ps-"+u,class:V(["socket-slot socket-slot--power-stone",{"socket-slot--filled":c.value?.powerStones[u-1]}]),title:c.value?.powerStones[u-1]?L(c.value.powerStones[u-1]):s(b)("planner.sockets.powerStone")+" "+u,onClick:r=>T(u-1)},[c.value?.powerStones[u-1]?(t(),l(O,{key:0},[d(c.value.powerStones[u-1])?.icon1?(t(),l("img",{key:0,src:s(S).getIconUrl(d(c.value.powerStones[u-1]).icon1),class:"socket-slot__icon",alt:L(c.value.powerStones[u-1])},null,8,Ds)):x("",!0),e("button",{class:"socket-slot__remove",onClick:r=>z(r,u-1)},[p(s(ce),{size:8})],8,Ms)],64)):(t(),j(s(pe),{key:1,size:12,class:"socket-slot__placeholder"}))],10,Bs))),128)),_[1]||(_[1]=e("div",{class:"socket-bar__divider"},null,-1)),e("div",{class:V(["socket-slot socket-slot--talisman",{"socket-slot--filled":c.value?.talisman}]),style:X(c.value?.talisman?{borderColor:M.value}:{}),title:c.value?.talisman?c.value.talisman.id+" ("+s(b)("rarity."+c.value.talisman.rarity)+")":s(b)("planner.sockets.talisman"),onClick:U},[c.value?.talisman?(t(),l(O,{key:0},[p(s(ie),{size:12,style:X({color:M.value})},null,8,["style"]),e("button",{class:"socket-slot__remove",onClick:_[0]||(_[0]=u=>D(u))},[p(s(ce),{size:8})])],64)):(t(),j(s(ie),{key:1,size:12,class:"socket-slot__placeholder"}))],14,Ps)]),c.value?(t(),l("div",zs,[(t(!0),l(O,null,A(c.value.powerStones,(u,r)=>oe((t(),l("div",{key:"detail-"+r,class:"socket-detail"},[e("span",Rs,n(L(u)),1),e("span",Ts,n(I(u)),1)])),[[Ie,u]])),128)),c.value.talisman?(t(),l("div",Ns,[p(s(ie),{size:10,style:X({color:M.value})},null,8,["style"]),e("span",{class:"socket-detail__name",style:X({color:M.value})},n(c.value.talisman.id),5),e("span",qs,n(s(b)("rarity."+c.value.talisman.rarity)),1)])):x("",!0)])):x("",!0)]))}}),Vs=Q(Os,[["__scopeId","data-v-f960112f"]]),Fs={class:"ps-modal__header"},As={class:"ps-modal__title"},Us={key:0,class:"ps-modal__slot-info"},Hs={class:"ps-modal__search-box"},Gs={class:"ps-modal__content"},Ks={key:0,class:"ps-modal__list"},js=["onClick","onMousemove"],Xs={class:"ps-item__icon-wrap"},Ys=["src","alt"],Qs={class:"ps-item__info"},Ws={class:"ps-item__desc"},Js={key:0,class:"ps-item__stats"},Zs={key:1,class:"ps-modal__empty"},et=Y({__name:"PowerStoneSelectorModal",props:{visible:{type:Boolean},slotId:{},socketIndex:{}},emits:["close","select"],setup(o,{emit:h}){const a=o,f=h,v=te(),S=J(),{t:b,locale:y}=Z(),c=E(""),k=E(null),d=E(0),L=E(0),I=(i,P)=>{k.value=P,d.value=i.clientX,L.value=i.clientY},T=()=>{k.value=null},z=()=>{c.value="",k.value=null,f("close")},U=q(()=>{let i=v.items.filter(P=>P.tip_loc_English==="Power Stone"&&P.baslik_loc_English);if(c.value){const P=c.value.toLowerCase();i=i.filter(N=>{const C=N.baslik_loc_English?.toLowerCase()||"",B=N.baslik_loc_Portuguese?.toLowerCase()||"",$=N.baslik_loc_Spanish?.toLowerCase()||"";return C.includes(P)||B.includes(P)||$.includes(P)})}return i.sort((P,N)=>(P.default_grade||0)-(N.default_grade||0)),i}),D=i=>i?y.value==="pt-BR"?i.baslik_loc_Portuguese||i.baslik_loc_English||i.id:y.value==="en"?i.baslik_loc_English||i.id:y.value==="es"?i.baslik_loc_Spanish||i.baslik_loc_English||i.id:i[`baslik_loc_${y.value}`]||i.baslik_loc_English||i.id:"",M=i=>i?y.value==="pt-BR"?i.aciklama_loc_Portuguese||i.aciklama_loc_English||"":y.value==="en"?i.aciklama_loc_English||"":y.value==="es"?i.aciklama_loc_Spanish||i.aciklama_loc_English||"":i[`aciklama_loc_${y.value}`]||i.aciklama_loc_English||"":"",m=i=>{const P=S.rarityColors;return P&&P[i]?.hex||"#e6edf3"},_=i=>{T(),f("select",i.id),z()},u=i=>{const P=S.powerStoneStatsMap[i];return P?Object.entries(P).map(([N,C])=>`${b("stats."+N)}: +${C}%`).join(", "):""},r=i=>{i.key==="Escape"&&a.visible&&z()};return de(()=>window.addEventListener("keydown",r)),ue(()=>window.removeEventListener("keydown",r)),(i,P)=>(t(),j(ke,{to:"body"},[p(ae,{name:"modal"},{default:K(()=>[o.visible?(t(),l("div",{key:0,class:"ps-modal-overlay",onClick:z},[e("div",{class:"ps-modal",onClick:P[1]||(P[1]=se(()=>{},["stop"]))},[e("div",Fs,[e("h3",As,[p(s(pe),{size:18}),le(" "+n(s(b)("planner.sockets.powerStone"))+" ",1),o.slotId?(t(),l("span",Us,n(o.slotId)+" — "+n(s(b)("planner.sockets.title"))+" "+n(o.socketIndex+1),1)):x("",!0)]),e("button",{class:"ps-modal__close-btn",onClick:z},[p(s(ce),{size:20})])]),e("div",Hs,[p(Le,{modelValue:c.value,"onUpdate:modelValue":P[0]||(P[0]=N=>c.value=N),placeholder:s(b)("codex.searchPlaceholder"),showIcon:!0,size:"lg"},null,8,["modelValue","placeholder"])]),e("div",Gs,[U.value.length>0?(t(),l("div",Ks,[(t(!0),l(O,null,A(U.value,N=>(t(),l("div",{key:N.id,class:"ps-item",onClick:C=>_(N),onMousemove:C=>I(C,N),onMouseleave:T},[e("div",Xs,[N.icon1?(t(),l("img",{key:0,src:s(v).getIconUrl(N.icon1),class:"ps-item__icon",alt:D(N)},null,8,Ys)):x("",!0)]),e("div",Qs,[e("span",{class:"ps-item__name",style:X({color:m(N.default_grade)})},n(D(N)),5),e("span",Ws,n(M(N)),1),u(N.id)?(t(),l("span",Js,n(u(N.id)),1)):x("",!0)])],40,js))),128))])):(t(),l("div",Zs,[p(s(Ce),{size:32,class:"ps-modal__empty-icon"}),e("p",null,n(s(b)("common.noResults")),1)]))]),p(be,{item:k.value,visible:!!k.value,x:d.value,y:L.value},null,8,["item","visible","x","y"])])])):x("",!0)]),_:1})]))}}),st=Q(et,[["__scopeId","data-v-b2a2132d"]]),tt={class:"talisman-modal__header"},lt={class:"talisman-modal__title"},at={key:0,class:"talisman-modal__slot-info"},nt={class:"talisman-modal__tabs"},ot=["onClick"],it={class:"talisman-modal__content"},ct={key:0,class:"talisman-modal__list"},rt=["onClick"],dt={class:"talisman-set__info"},ut={class:"talisman-set__icon-wrapper"},vt=["src","alt"],_t={key:1,class:"talisman-set__icon-fallback"},mt={class:"talisman-set__names"},pt={class:"talisman-set__name"},ht={class:"talisman-set__talisman"},kt={class:"talisman-set__meta"},bt={key:0,class:"talisman-set__count"},yt={key:0,class:"talisman-set__details"},ft={class:"talisman-set__bonuses"},St={class:"bonus-tier__label"},$t={class:"bonus-tier__stats"},gt={class:"bonus-tier__label"},Ct={class:"bonus-tier__stats"},wt={class:"bonus-tier__label"},It={class:"bonus-tier__stats"},xt=["onClick"],Et={key:1,class:"talisman-modal__empty"},Lt=Y({__name:"TalismanSelectorModal",props:{visible:{type:Boolean},slotId:{}},emits:["close","select"],setup(o,{emit:h}){const{t:a,locale:f}=Z(),v=te(),S=o,b=h,y=J(),c=E("uncommon"),k=E(null),d=[{key:"uncommon",label:"Uncommon",color:"#56B65C"},{key:"rare",label:"Rare",color:"#4F8EFF"},{key:"legendary",label:"Legendary",color:"#FFD700"}],L={"Sovereign's Legacy":"23001","Ravager's Dominion":"23002","Divine Aegis":"23003",Tempestbound:"23004",Bladeweaver:"23005",Spellfire:"23006","Astral Conflux":"23007","Seraphic Grace":"23008","Fortress of Valor":"23009",Dragonclaw:"23010","Eldritch Catalyst":"23011","Divine Harmony":"23012"},I=q(()=>y.plannerData?.setBonuses?(y.plannerData.setBonuses[c.value]||[]).map(u=>{const r=L[u.talisman],i=r?v.getItemById(r):null,P=f.value==="pt-BR"?"Portuguese":f.value==="es-ES"?"Spanish":"English",N=i?i[`baslik_loc_${P}`]:null;return{...u,itemId:r,itemIcon:i?v.getIconUrl(i.icon1):null,dbTitle:N}}):[]),T=_=>{k.value=k.value===_?null:_},z=_=>{b("select",{id:_.talisman,rarity:c.value}),U()},U=()=>{k.value=null,b("close")},D=(_,u)=>{let r=0;for(const i of Object.values(y.equipmentSockets))i?.talisman&&i.talisman.id===_&&i.talisman.rarity===u&&r++;return r},M=_=>Object.entries(_).map(([u,r])=>({stat:a("stats."+u),value:r})),m=_=>{_.key==="Escape"&&S.visible&&U()};return de(()=>window.addEventListener("keydown",m)),ue(()=>window.removeEventListener("keydown",m)),(_,u)=>(t(),j(ke,{to:"body"},[p(ae,{name:"modal"},{default:K(()=>[o.visible?(t(),l("div",{key:0,class:"talisman-modal-overlay",onClick:U},[e("div",{class:"talisman-modal",onClick:u[0]||(u[0]=se(()=>{},["stop"]))},[e("div",tt,[e("h3",lt,[p(s(ie),{size:18}),le(" "+n(s(a)("planner.sockets.talisman"))+" ",1),o.slotId?(t(),l("span",at," ("+n(o.slotId)+") ",1)):x("",!0)]),e("button",{class:"talisman-modal__close-btn",onClick:U},[p(s(ce),{size:20})])]),e("div",nt,[(t(),l(O,null,A(d,r=>e("button",{key:r.key,class:V(["rarity-tab",{"is-active":c.value===r.key}]),style:X(c.value===r.key?{color:r.color,borderColor:r.color}:{}),onClick:i=>{c.value=r.key,k.value=null}},n(s(a)("rarity."+r.key)),15,ot)),64))]),e("div",it,[I.value.length>0?(t(),l("div",ct,[(t(!0),l(O,null,A(I.value,r=>(t(),l("div",{key:r.set_name,class:V(["talisman-set",{"is-expanded":k.value===r.set_name}]),style:X(k.value===r.set_name?{borderColor:d.find(i=>i.key===c.value)?.color+"66"}:{})},[e("div",{class:"talisman-set__header",onClick:i=>T(r.set_name)},[e("div",dt,[e("div",ut,[r.itemIcon?(t(),l("img",{key:0,src:r.itemIcon,alt:r.set_name,class:"talisman-set__icon"},null,8,vt)):(t(),l("div",_t,[p(s(ie),{size:20})]))]),e("div",mt,[e("span",pt,n(r.dbTitle||r.set_name),1),e("span",ht,n(r.talisman),1)]),e("div",kt,[D(r.talisman,c.value)>0?(t(),l("span",bt,n(s(a)("planner.sockets.equipped"))+": "+n(D(r.talisman,c.value))+"/4 ",1)):x("",!0)])]),p(s(fe),{size:16,class:V(["talisman-set__chevron",{"is-open":k.value===r.set_name}])},null,8,["class"])],8,rt),p(ae,{name:"expand"},{default:K(()=>[k.value===r.set_name?(t(),l("div",yt,[e("div",ft,[r.bonus_2?(t(),l("div",{key:0,class:V(["bonus-tier",{"is-active":D(r.talisman,c.value)>=2}])},[e("span",St,"2 "+n(s(a)("planner.sockets.pieces")),1),e("div",$t,[(t(!0),l(O,null,A(M(r.bonus_2),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):x("",!0),r.bonus_3?(t(),l("div",{key:1,class:V(["bonus-tier",{"is-active":D(r.talisman,c.value)>=3}])},[e("span",gt,"3 "+n(s(a)("planner.sockets.pieces")),1),e("div",Ct,[(t(!0),l(O,null,A(M(r.bonus_3),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):x("",!0),r.bonus_4?(t(),l("div",{key:2,class:V(["bonus-tier",{"is-active":D(r.talisman,c.value)>=4}])},[e("span",wt,"4 "+n(s(a)("planner.sockets.pieces")),1),e("div",It,[(t(!0),l(O,null,A(M(r.bonus_4),i=>(t(),l("span",{key:i.stat,class:"bonus-stat"},n(i.stat)+": +"+n(i.value),1))),128))])],2)):x("",!0)]),e("button",{class:"talisman-set__select-btn",onClick:se(i=>z(r),["stop"])},n(s(a)("planner.sockets.equipTalisman",{name:r.talisman})),9,xt)])):x("",!0)]),_:2},1024)],6))),128))])):(t(),l("div",Et,[...u[1]||(u[1]=[e("p",null,"No sets available",-1)])]))])])])):x("",!0)]),_:1})]))}}),Bt=Q(Lt,[["__scopeId","data-v-da995438"]]),Dt={class:"item-card__header"},Mt={class:"header-top"},Pt={class:"rarity-tier"},zt={class:"rarity-label"},Rt={key:0,class:"tier-label"},Tt={class:"level-label"},Nt={class:"item-type"},qt={class:"header-main"},Ot={class:"item-name"},Vt={class:"header-icon"},Ft=["src"],At={class:"item-card__simulator compact"},Ut={class:"simulator-row"},Ht={class:"simulator-header"},Gt={class:"simulator-label"},Kt={class:"simulator-value"},jt={class:"slider-wrapper"},Xt=["max"],Yt={class:"slider-ticks"},Qt={class:"simulator-row level-upgrade-row"},Wt={class:"level-upgrade-col"},Jt={class:"simulator-header"},Zt={class:"simulator-label"},el={class:"simulator-value"},sl=["max"],tl={class:"level-upgrade-col"},ll={class:"simulator-header"},al={class:"simulator-label"},nl={class:"simulator-value"},ol=["value"],il={class:"item-card__body manual-edit-body"},cl={class:"edit-note"},rl={class:"traits-section"},dl=["for"],ul=["id","onUpdate:modelValue"],vl={class:"item-card__footer edit-footer"},_l=Y({__name:"ItemEditModal",props:{visible:{type:Boolean},slotId:{},item:{}},emits:["close"],setup(o,{emit:h}){const a=o,f=h,v=J(),S=te(),{t:b,locale:y}=Z(),c=E(0),k=E(1),d=E(0),L=E({}),I=E(!1),T=E(0),z=E(!1),U=(C,B)=>{T.value=B,I.value=!0},D=C=>{a.slotId&&v.setPowerStone(a.slotId,T.value,C)},M=()=>{z.value=!0},m=C=>{a.slotId&&v.setTalisman(a.slotId,C)},_=q(()=>{const C=v.plannerData?.statKeys||[],B=v.modifiableStats||[];return C.filter($=>B.includes($.key)).map($=>({key:$.key,label:b("stats."+$.key)}))});xe(()=>a.visible,C=>{if(C&&a.item&&a.slotId){const B=v.equipmentOverrides[a.slotId];B?(c.value=B.grade!==void 0?B.grade:a.item.default_grade||0,k.value=B.level||a.item.level||1,d.value=B.upgradeLevel!==void 0?B.upgradeLevel:0,L.value={...B.stats},_.value.forEach($=>{if(L.value[$.key]===void 0){const G=Number(a.item[$.key]);!isNaN(G)&&G>0&&(L.value[$.key]=G)}})):(c.value=a.item.default_grade||0,k.value=a.item.level||1,d.value=0,L.value={},_.value.forEach($=>{const G=Number(a.item[$.key]);!isNaN(G)&&G>0&&(L.value[$.key]=G)}))}});const u=()=>{if(!a.slotId||d.value<0||d.value>v.maxUpgradeLevel)return;const C={};Object.keys(L.value).forEach($=>{L.value[$]>0&&(C[$]=L.value[$])});const B={grade:c.value,level:k.value,upgradeLevel:d.value,stats:C};v.setItemOverride(a.slotId,B),f("close")},r=C=>{C.key==="Escape"&&a.visible&&f("close")};de(()=>window.addEventListener("keydown",r)),ue(()=>window.removeEventListener("keydown",r));const i=C=>C?y.value==="pt-BR"?C.baslik_loc_Portuguese||C.baslik_loc_English||C.id:y.value==="en"?C.baslik_loc_English||C.id:y.value==="es"?C.baslik_loc_Spanish||C.baslik_loc_English||C.id:C[`baslik_loc_${y.value}`]||C.baslik_loc_English||C.id:"",P=C=>{const B=typeof C=="number"&&C>5?$e(C):typeof C=="number"?C:ye(C),$=v.rarityColors;return $&&$[B]?.hex||"#e6edf3"},N=C=>{const B=typeof C=="number"&&C>5?$e(C):typeof C=="number"?C:ye(C),$=v.rarityColors;if(!$)return"common";const G=$[B]?.hex?Object.keys($).find(_e=>$[_e].hex===$[B].hex):"common";return G?b(`rarity.${G}`):"common"};return(C,B)=>(t(),j(ke,{to:"body"},[p(ae,{name:"modal"},{default:K(()=>[o.visible?(t(),l("div",{key:0,class:"item-edit-overlay",onClick:B[8]||(B[8]=$=>f("close"))},[o.item?(t(),l("div",{key:0,class:"item-card-wrapper",onClick:B[7]||(B[7]=se(()=>{},["stop"]))},[e("div",{class:"item-card",style:X({"--rarity-color":P(c.value)})},[e("button",{class:"modal-close-btn",onClick:B[0]||(B[0]=$=>f("close"))},[p(s(ce),{size:16})]),e("div",Dt,[e("div",Mt,[e("div",Pt,[e("span",zt,n(N(c.value)),1),o.item.tier?(t(),l("span",Rt,"T"+n(o.item.tier),1)):x("",!0),e("span",Tt,"Lv. "+n(k.value),1)]),e("div",Nt,n(o.item.tip_loc_English||s(b)("item.item")),1)]),e("div",qt,[e("h2",Ot,n(i(o.item)),1)]),e("div",Vt,[o.item.icon1?(t(),l("img",{key:0,src:s(S).getIconUrl(o.item.icon1)},null,8,Ft)):(t(),j(s(Re),{key:1,size:40,class:"icon-fallback"}))])]),e("div",At,[e("div",Ut,[e("div",Ht,[e("span",Gt,n(s(b)("item.grade")),1),e("span",Kt,n(c.value)+" / "+n(s(v).maxGrade),1)]),e("div",jt,[oe(e("input",{type:"range",min:"0",max:s(v).maxGrade,"onUpdate:modelValue":B[1]||(B[1]=$=>c.value=$),class:"custom-slider",style:X({"--track-color":P(c.value)})},null,12,Xt),[[he,c.value,void 0,{number:!0}]]),e("div",Yt,[(t(!0),l(O,null,A(s(v).gradeSliderTicks,$=>(t(),l("span",{key:$},n($),1))),128))])])]),e("div",Qt,[e("div",Wt,[e("div",Jt,[e("span",Zt,n(s(b)("item.simulateLevel")),1),e("span",el,"Lv. "+n(k.value)+" / "+n(s(v).maxSkillLevel),1)]),oe(e("input",{type:"number",min:"1",max:s(v).maxSkillLevel,"onUpdate:modelValue":B[2]||(B[2]=$=>k.value=$),class:"custom-level-input"},null,8,sl),[[he,k.value,void 0,{number:!0}]])]),e("div",tl,[e("div",ll,[e("span",al,n(s(b)("item.upgradeLevel")),1),e("span",nl,"+"+n(d.value)+" / "+n(s(v).maxUpgradeLevel),1)]),oe(e("select",{"onUpdate:modelValue":B[3]||(B[3]=$=>d.value=$),class:"custom-level-input custom-select"},[(t(!0),l(O,null,A(s(v).maxUpgradeLevel+1,$=>(t(),l("option",{key:$-1,value:$-1}," +"+n($-1),9,ol))),128))],512),[[Pe,d.value,void 0,{number:!0}]])])])]),e("div",il,[e("div",cl,n(s(b)("planner.modals.edit.alert")),1),e("div",rl,[(t(!0),l(O,null,A(_.value,$=>(t(),l("div",{key:$.key,class:"trait-row"},[e("label",{for:$.key,class:"trait-label"},"• "+n($.label)+":",9,dl),oe(e("input",{id:$.key,type:"number","onUpdate:modelValue":G=>L.value[$.key]=G,class:"trait-input",min:"0",placeholder:"0"},null,8,ul),[[he,L.value[$.key],void 0,{number:!0}]])]))),128))])]),o.item&&o.slotId&&s(v).isSocketsEnabled(o.slotId)?(t(),j(Vs,{key:0,slotId:o.slotId,onOpenPowerStone:U,onOpenTalisman:M},null,8,["slotId"])):x("",!0),e("div",vl,[p(ge,{variant:"secondary",onClick:B[4]||(B[4]=$=>f("close"))},{default:K(()=>[le(n(s(b)("common.cancel")),1)]),_:1}),p(ge,{variant:"primary",onClick:u},{icon:K(()=>[p(s(Ue),{size:16})]),default:K(()=>[le(" "+n(s(b)("common.save")),1)]),_:1})])],4),p(st,{visible:I.value,slotId:o.slotId,socketIndex:T.value,onClose:B[5]||(B[5]=$=>I.value=!1),onSelect:D},null,8,["visible","slotId","socketIndex"]),p(Bt,{visible:z.value,slotId:o.slotId,onClose:B[6]||(B[6]=$=>z.value=!1),onSelect:m},null,8,["visible","slotId"])])):x("",!0)])):x("",!0)]),_:1})]))}}),De=Q(_l,[["__scopeId","data-v-b88f28b7"]]),ml={key:0,class:"header-content"},pl={class:"header-label"},hl={key:1,class:"header-content empty-content"},kl={class:"header-label"},bl={key:0,class:"class-selector__list"},yl=["onClick"],fl={class:"class-item__label"},Sl=Y({__name:"ClassSelector",setup(o){const h=J(),{t:a}=Z(),f=q(()=>h.plannerData?.classes?h.plannerData.classes.map(d=>({id:d.id,labelKey:d.labelKey,name:d.name})):[]),v=E(!1),S=E(null),b=q(()=>h.selectedClass&&f.value.find(d=>d.id===h.selectedClass)||null),y=d=>{h.setClass(d),v.value=!1},c=()=>{v.value=!v.value},k=d=>{S.value&&!S.value.contains(d.target)&&(v.value=!1)};return de(()=>{document.addEventListener("click",k)}),ue(()=>{document.removeEventListener("click",k)}),(d,L)=>(t(),l("div",{class:"class-selector",ref_key:"dropdownRef",ref:S},[e("div",{class:V(["class-selector__header",{"is-open":v.value,"is-selected":!!b.value}]),onClick:c},[b.value?(t(),l("div",ml,[e("span",pl,n(s(a)(b.value.name)),1)])):(t(),l("div",hl,[e("span",kl,n(s(a)("planner.class.placeholder")),1)])),p(s(fe),{size:20,class:V(["chevron-icon",{rotate:v.value}])},null,8,["class"])],2),p(ae,{name:"dropdown"},{default:K(()=>[v.value?(t(),l("div",bl,[(t(!0),l(O,null,A(f.value,I=>(t(),l("button",{key:I.id,class:V(["class-item",{"is-active":s(h).selectedClass===I.id}]),onClick:T=>y(I.id)},[e("span",fl,n(s(a)(I.name)),1)],10,yl))),128))])):x("",!0)]),_:1})],512))}}),$l=Q(Sl,[["__scopeId","data-v-0af48b10"]]),gl={key:0,class:"header-content"},Cl={class:"header-label"},wl={key:1,class:"header-content empty-content"},Il={key:0,class:"header-label"},xl={key:1,class:"header-label"},El={key:0,class:"subclass-selector__list"},Ll=["onClick"],Bl={class:"subclass-item__label"},Dl=Y({__name:"SubclassSelector",setup(o){const h=J(),{t:a}=Z(),f=E(!1),v=E(null),S=q(()=>!h.currentClassData||!h.currentClassData.subclasses?[]:h.currentClassData.subclasses.map(d=>({id:d.id,labelKey:d.labelKey,name:d.name}))),b=q(()=>h.selectedSubclass&&S.value.find(d=>d.id===h.selectedSubclass)||null),y=d=>{h.setSubclass(d),f.value=!1},c=()=>{S.value.length!==0&&(f.value=!f.value)},k=d=>{v.value&&!v.value.contains(d.target)&&(f.value=!1)};return de(()=>document.addEventListener("click",k)),ue(()=>document.removeEventListener("click",k)),(d,L)=>(t(),l("div",{class:V(["subclass-selector",{"is-disabled":S.value.length===0}]),ref_key:"dropdownRef",ref:v},[e("div",{class:V(["subclass-selector__header",{"is-open":f.value,"is-selected":!!b.value}]),onClick:c},[b.value?(t(),l("div",gl,[p(s(ie),{class:"header-icon",size:16}),e("span",Cl,n(s(a)(b.value.name)),1)])):(t(),l("div",wl,[S.value.length>0?(t(),l("span",Il,n(s(a)("planner.subclass.placeholder")),1)):(t(),l("span",xl,n(s(a)("planner.subclass.unavailable")),1))])),S.value.length>0?(t(),j(s(fe),{key:2,size:16,class:V(["chevron-icon",{rotate:f.value}])},null,8,["class"])):x("",!0)],2),p(ae,{name:"dropdown"},{default:K(()=>[f.value?(t(),l("div",El,[(t(!0),l(O,null,A(S.value,I=>(t(),l("button",{key:I.id,class:V(["subclass-item",{"is-active":s(h).selectedSubclass===I.id}]),onClick:T=>y(I.id)},[p(s(ie),{class:"subclass-item__icon",size:14}),e("span",Bl,n(s(a)(I.name)),1)],10,Ll))),128))])):x("",!0)]),_:1})],2))}}),Ml=Q(Dl,[["__scopeId","data-v-bd5ac1a8"]]),Pl={class:"row-icon-col"},zl={class:"skill-icon"},Rl={class:"row-info-col"},Tl={class:"skill-name"},Nl={key:0,class:"level-num"},ql={class:"skill-level-ctrl"},Ol={class:"muted-label"},Vl={class:"ctrl-group"},Fl=["disabled"],Al=["disabled"],Ul={class:"row-stats-col"},Hl={class:"muted-label"},Gl={class:"stats-val"},Kl={class:"highlight-blue"},jl={class:"highlight-cyan"},Xl={class:"row-effects-col"},Yl={class:"muted-label"},Ql={class:"effects-list"},Wl={class:"effect-text"},Jl={key:0,class:"effect-highlight"},Zl={key:0,class:"row-action-col"},ea={class:"stone-slot-wrapper"},sa=["title"],ta=["src","alt"],la={key:0,class:"stone-slot-actions"},aa=["title"],na=["title"],oa=Y({__name:"SkillNodeCard",props:{skill:{},index:{}},emits:["openStoneSelector","openStoneEditor"],setup(o,{emit:h}){const a=o,f=J(),v=te(),{t:S,locale:b}=Oe(),y=q(()=>{switch(b.value){case"pt-BR":return"Portuguese";case"es-ES":return"Spanish";default:return"English"}}),c=a.skill.maxLevel||f.maxSkillLevel,k=q(()=>f.skillLevels[a.skill.id]||0),d=q(()=>f.skillStones[a.skill.id]),L=q(()=>!!d.value),I=q(()=>d.value?v.getItemById(d.value):null),T=q(()=>I.value?v.getIconUrl(I.value.icon1||I.value.icon):null),z=q(()=>d.value&&f.equipmentOverrides["stone_"+a.skill.id]||null),U=q(()=>{if(!I.value)return"transparent";const F=z.value?.rarity??ye(I.value),w=f.rarityColors;return w&&w[F]?.rgba||"#30363d"}),D=()=>{k.value<c&&f.setSkillLevel(a.skill.id,k.value+1)},M=()=>{k.value>0&&f.setSkillLevel(a.skill.id,k.value-1)},m=q(()=>{const F=k.value,w=f.rarityThresholds;return w?F>=w.epic?"rarity-epic":F>=w.rare?"rarity-rare":F>=w.uncommon?"rarity-uncommon":"":""}),_=F=>{const w=Math.max(1,k.value),R=w-1;if(F.template){let g=F.template;const H={};return F.params&&Object.entries(F.params).forEach(([W,me])=>{const ne=(me.base||0)+(me.scaling||0)*R;H[W]=Number.isInteger(ne)?ne.toString():ne.toFixed(1),g=g.replace(`{${W}}`,H[W])}),g.startsWith("planner.")?S(g,H):g}if(F.text){const g=F.text,H=F.scaling;if(!H||w<=1)return g;const W=H.match(/([+-]?\d+(?:\.\d+)?)/);if(!W)return g;const ne=parseFloat(W[1])*R;let ee=g;return H.includes("CD")||H.toLowerCase().includes("s")?(ee=ee.replace(/CD\s*([+-]?\d+(?:\.\d+)?)s/i,(Se,re)=>"CD "+Number((parseFloat(re)+ne).toFixed(1))+"s"),ee===g&&(ee=ee.replace(/([+-]?\d+(?:\.\d+)?)s/,(Se,re)=>Number((parseFloat(re)+ne).toFixed(1))+"s"))):H.includes("%")?ee=ee.replace(/([+-]?\d+(?:\.\d+)?)%/,(Se,re)=>Number((parseFloat(re)+ne).toFixed(1))+"%"):ee=ee.replace(/([+-]?\d+(?:\.\d+)?)/,(Se,re)=>Number((parseFloat(re)+ne).toFixed(1)).toString()),ee}return""},u=F=>F.scaling?F.scaling:F.params?Object.values(F.params).filter(w=>w.scaling!==0).map(w=>{const R=(w.scaling||0)>0?"+":"",g=F.template.includes("%")?"%":"";return`${R}${w.scaling}${g}/lvl`}).join(", "):null,r=E(null),i=E(0),P=E(0),N=F=>{L.value&&I.value&&(r.value=I.value,i.value=F.clientX,P.value=F.clientY)},C=()=>{r.value=null},B=()=>{r.value=null,_e("openStoneSelector",a.skill.id)},$=()=>{r.value=null,_e("openStoneEditor",a.skill.id)},G=()=>{f.setSkillStone(a.skill.id,null),r.value=null},_e=h;return(F,w)=>(t(),l("div",{class:V(["clean-row-card",[{"is-active":k.value>0},m.value]])},[e("div",Pl,[e("div",zl,[e("span",null,n(o.index+1),1)])]),e("div",Rl,[e("h4",Tl,[le(n(s(S)(o.skill.name))+" ",1),k.value>0?(t(),l("span",Nl," I")):x("",!0)]),e("div",ql,[e("span",Ol,n(s(S)("planner.skills.levelLabel")),1),e("div",Vl,[e("button",{class:"ctrl-btn",onClick:M,disabled:k.value===0},[p(s(Fe),{size:12})],8,Fl),e("span",{class:V(["ctrl-val",{"is-active-val":k.value>0}])},n(k.value>0?k.value:1)+" / "+n(s(c)),3),e("button",{class:"ctrl-btn",onClick:D,disabled:k.value===s(c)},[p(s(we),{size:12})],8,Al)])])]),e("div",Ul,[e("div",Hl,n(s(S)("planner.skills.costCdLabel")),1),e("div",Gl,[e("span",Kl,n(o.skill.manaCost||o.skill.baseManaCost||0)+" MP",1),w[0]||(w[0]=e("span",{class:"separator"},"•",-1)),e("span",jl,n(o.skill.cooldown||o.skill.baseCooldown||0)+"s",1)])]),e("div",Xl,[e("div",Yl,n(s(S)("planner.skills.effectsLabel")),1),e("div",Ql,[(t(!0),l(O,null,A(o.skill.effects,(R,g)=>(t(),l("div",{class:"effect-line",key:g},[e("span",Wl,n(_(R)),1),u(R)?(t(),l("span",Jl,n(u(R)),1)):x("",!0)]))),128))])]),o.skill.hasStoneSlot?(t(),l("div",Zl,[e("div",ea,[e("button",{class:V(["action-btn",{"has-gem":L.value}]),onClick:se(B,["stop"]),title:L.value?"":s(S)("planner.skills.equipStone"),onMousemove:N,onMouseleave:C},[T.value?(t(),l("img",{key:0,src:T.value,alt:I.value?.["baslik_loc_"+y.value]||I.value?.baslik_loc_English,style:X({borderColor:U.value})},null,12,ta)):(t(),j(s(pe),{key:1,size:20}))],42,sa),L.value?(t(),l("div",la,[e("button",{class:"stone-action-btn edit-btn",onClick:se($,["stop"]),title:s(S)("planner.skills.changeStone")},[p(s(Be),{size:12})],8,aa),e("button",{class:"stone-action-btn remove-btn",onClick:se(G,["stop"]),title:s(S)("planner.skills.unsocketStone")},[p(s(Ee),{size:12})],8,na)])):x("",!0)])])):x("",!0),p(be,{item:r.value,visible:!!r.value,x:i.value,y:P.value,overrideRarity:r.value&&z.value?z.value.rarity:void 0,overrideLevel:r.value&&z.value?z.value.level:void 0,overrideStats:r.value&&z.value?z.value.stats:void 0},null,8,["item","visible","x","y","overrideRarity","overrideLevel","overrideStats"])],2))}}),ia=Q(oa,[["__scopeId","data-v-442e9498"]]),ca={class:"modal-header"},ra={class:"modal-title"},da={class:"modal-search"},ua=["placeholder"],va={class:"modal-body"},_a={key:0,class:"empty-state"},ma={key:1,class:"item-grid"},pa=["onClick","onMousemove"],ha=["src","alt"],ka={key:1,class:"item-card__fallback"},ba={key:2,class:"item-card__level-badge"},ya={class:"item-card__info"},fa=Y({__name:"SkillStoneSelectorModal",props:{show:{type:Boolean},skillId:{}},emits:["close"],setup(o,{emit:h}){const a=o,f=h,v=te(),S=J(),{t:b}=Z(),y=E(""),c=q(()=>v.items.filter(D=>D.tip_loc_English==="Skill Stone")),k=q(()=>{if(!y.value)return c.value;const D=y.value.toLowerCase();return c.value.filter(M=>{const m=(M.baslik_loc_English||M.isim_loc_English||"")?.toLowerCase(),_=(M.baslik_loc_Portuguese||M.isim_loc_Portuguese||"")?.toLowerCase(),u=(M.baslik_loc_Spanish||M.isim_loc_Spanish||"")?.toLowerCase();return m.includes(D)||_.includes(D)||u.includes(D)})}),d=D=>{a.skillId&&S.setSkillStone(a.skillId,D.id),L.value=null,f("close")},L=E(null),I=E(0),T=E(0),z=(D,M)=>{a.show&&(L.value=M,I.value=D.clientX,T.value=D.clientY)},U=()=>{a.show&&(L.value=null)};return xe(()=>a.show,D=>{D||(L.value=null)}),(D,M)=>(t(),l(O,null,[p(ae,{name:"modal"},{default:K(()=>[o.show?(t(),l("div",{key:0,class:"modal-overlay",onClick:M[3]||(M[3]=m=>f("close"))},[e("div",{class:"modal-content",onClick:M[2]||(M[2]=se(()=>{},["stop"]))},[e("div",ca,[e("div",ra,[p(s(pe),{size:20,class:"title-icon"}),e("h3",null,n(s(b)("planner.skillStone.title")),1)]),e("button",{class:"icon-btn close-btn",onClick:M[0]||(M[0]=m=>f("close"))},[p(s(ce),{size:20})])]),e("div",da,[p(s(Ce),{class:"search-icon",size:16}),oe(e("input",{type:"text","onUpdate:modelValue":M[1]||(M[1]=m=>y.value=m),placeholder:s(b)("planner.skillStone.searchPlaceholder"),class:"search-input",ref:"searchInput"},null,8,ua),[[he,y.value]])]),e("div",va,[k.value.length===0?(t(),l("div",_a,n(s(b)("planner.skillStone.emptyState")),1)):(t(),l("div",ma,[(t(!0),l(O,null,A(k.value,m=>(t(),l("button",{key:m.id,class:"item-card",onClick:_=>d(m),onMousemove:_=>z(_,m),onMouseleave:U},[e("div",{class:V(["item-card__icon","rarity-"+(m.quality||1)])},[m.icon1||m.icon?(t(),l("img",{key:0,src:s(v).getIconUrl(m.icon1||m.icon),alt:m.baslik_loc_English||m.isim_loc_English},null,8,ha)):(t(),l("div",ka)),m.level?(t(),l("div",ba,"Lv. "+n(m.level),1)):x("",!0)],2),e("div",ya,[e("span",{class:V(["item-name","text-rarity-"+(m.quality||1)])},n(m["baslik_loc_"+s(b)("lang_suffix")]||m["isim_loc_"+s(b)("lang_suffix")]||m.baslik_loc_English||m.isim_loc_English||m.id),3)])],40,pa))),128))]))])])])):x("",!0)]),_:1}),p(be,{item:L.value,visible:!!L.value,x:I.value,y:T.value},null,8,["item","visible","x","y"])],64))}}),Sa=Q(fa,[["__scopeId","data-v-802ff69d"]]),$a={class:"planner-skills"},ga={key:0,class:"planner-skills__empty"},Ca={key:1,class:"planner-skills__content"},wa={key:0,class:"passive-banner"},Ia={class:"passive-banner__header"},xa={class:"passive-tag"},Ea={class:"passive-name"},La={class:"passive-desc"},Ba={key:1,class:"skills-list"},Da={key:2,class:"planner-skills__empty"},Ma=Y({__name:"PlannerSkillsTab",setup(o){const h=J(),a=te(),{t:f}=Z(),v=q(()=>h.currentSubclassData),S=E(!1),b=E(null),y=z=>{b.value=z,S.value=!0},c=()=>{S.value=!1,b.value=null},k=E(!1),d=E(null),L=q(()=>{if(!d.value)return null;const z=h.skillStones[d.value];return z?a.getItemById(z):null}),I=z=>{d.value=z,k.value=!0},T=()=>{k.value=!1,d.value=null};return(z,U)=>(t(),l("div",$a,[v.value?(t(),l("div",Ca,[v.value.passive?(t(),l("div",wa,[e("div",Ia,[e("span",xa,n(s(f)("planner.skills.passiveAbility")),1),e("h4",Ea,n(s(f)(v.value.passive.name)),1)]),e("p",La,n(s(f)(v.value.passive.description)),1)])):x("",!0),v.value.skills&&v.value.skills.length>0?(t(),l("div",Ba,[(t(!0),l(O,null,A(v.value.skills,(D,M)=>(t(),j(ia,{key:D.id,skill:D,index:Number(M)+1,onOpenStoneSelector:y,onOpenStoneEditor:I},null,8,["skill","index"]))),128))])):(t(),l("div",Da,[e("p",null,n(s(f)("planner.skills.noSubclassSkills")),1)]))])):(t(),l("div",ga,[e("p",null,n(s(f)("planner.skills.emptySubclass")),1)])),p(Sa,{show:S.value,skillId:b.value,onClose:c},null,8,["show","skillId"]),p(De,{visible:k.value,slotId:"stone_"+d.value,item:L.value,onClose:T},null,8,["visible","slotId","item"])]))}}),Pa=Q(Ma,[["__scopeId","data-v-79a2b1e7"]]),za={class:"planner-page"},Ra={class:"planner-page__container"},Ta={class:"planner-page__header"},Na={class:"header-left"},qa={class:"planner-page__title"},Oa={key:0,class:"build-selector-box is-creating"},Va=["placeholder"],Fa={class:"build-actions inline-actions"},Aa={key:0,class:"custom-dropdown-list"},Ua={key:0,class:"dropdown-item empty-state",disabled:""},Ha=["onClick"],Ga={key:0,class:"dropdown-item__class"},Ka={class:"build-actions"},ja=["title"],Xa=["title"],Ya={class:"header-right"},Qa={key:0,class:"error-msg"},Wa={key:1,class:"planner-layout"},Ja={class:"planner-layout__col planner-layout__col--equip"},Za={class:"gear-ring"},en=["src"],sn={class:"gearscore-container"},tn={class:"gearscore-value"},ln={class:"planner-layout__col planner-layout__col--attrs"},an={class:"planner-tabs"},nn={class:"tab-content"},on={class:"planner-section-title"},cn={class:"planner-attr-counter"},rn={class:"attr-grid"},dn={key:0,class:"tab-content"},un={key:0},vn={style:{display:"flex",gap:"1rem","margin-bottom":"1.5rem"}},_n={style:{color:"#8b949e",display:"flex","align-items":"center","font-size":"0.875rem"}},mn={style:{"margin-top":"1rem"}},pn={key:1,style:{color:"#8b949e","text-align":"center","margin-top":"4rem"}},hn={class:"planner-layout__col planner-layout__col--stats"},kn={class:"planner-stats-panel"},bn={class:"planner-stats-panel__header"},yn={class:"planner-stats-panel__content"},fn={class:"planner-stat-label"},Sn={class:"planner-stat-value"},$n={key:0,class:"planner-stat-empty"},gn={key:0,class:"planner-stats-panel__set-bonuses"},Cn={class:"set-bonuses-header"},wn={class:"set-bonus-entry__header"},In={class:"set-bonus-entry__name"},xn={class:"set-bonus-entry__count"},En={class:"set-bonus-tier__label"},Ln={class:"set-bonus-tier__bonuses"},Bn={class:"set-bonus-tier__value"},Dn=Y({__name:"Planner",setup(o){const{t:h}=Z(),a=J(),f=te(),v=E("attributes"),S=E(!1),b=E(null),y=E(!1),c=E(null),k=E(null),d=E(""),L=E(!1),I=E(""),T=E(!1),z=E(null),U=()=>{L.value||(T.value=!T.value)},D=w=>{z.value&&!z.value.contains(w.target)&&(T.value=!1)},M=w=>{if(!a.selectedClass){d.value=h("planner.attributes.errorClass"),setTimeout(()=>d.value="",3e3);return}b.value=w,S.value=!0},m=(w,R)=>{c.value=w,k.value=R,y.value=!0},_=w=>{b.value&&(w===null?a.unequipItem(b.value):(a.equipItem(b.value,w),c.value=b.value,k.value=w,y.value=!0))},u=()=>{a.resetPlanner(),I.value=""},r=w=>{w&&(a.loadBuild(w),T.value=!1)},i=()=>{L.value=!0,I.value=""},P=()=>{L.value=!1,I.value=""},N=()=>{const w=I.value.trim();if(!w){d.value=h("planner.builds.errorName"),setTimeout(()=>d.value="",3e3);return}a.newBuild(w),L.value=!1,I.value=""},C=()=>{a.currentBuildId&&confirm(h("planner.builds.confirmDelete"))&&a.deleteBuild(a.currentBuildId)},B=q(()=>{const w={};return a.plannerData?.classes&&a.plannerData.classes.forEach(R=>{w[R.id]=R.labelKey}),w}),$=q(()=>{if(!a.currentBuildId)return a.savedBuilds.length?h("planner.builds.select"):h("planner.builds.none");const w=a.savedBuilds.find(R=>R.id===a.currentBuildId);return w?`${w.name} ${w.charClass?`(${h("planner.class.names."+(B.value[w.charClass]||w.charClass))})`:""}`:h("planner.builds.select")}),G=q(()=>{let w=0;return Object.keys(a.equipment).forEach(R=>{if(a.gearscoreExcludedSlots.includes(R))return;const g=a.equipment[R];if(!g)return;const H=a.equipmentOverrides[R],W=H?.grade!==void 0?H.grade:g.grade;W!=null&&(w+=Number(W))}),w});de(async()=>{await a.loadPlannerData(),await f.loadData(),document.addEventListener("click",D)}),ue(()=>{document.removeEventListener("click",D)});const _e=w=>h(`planner.attributes.bonus.${w}`),F=w=>"/CodexFall/"+w.replace(/^\//,"");return(w,R)=>(t(),l("div",za,[e("div",Ra,[e("div",Ta,[e("div",Na,[e("h1",qa,n(s(h)("nav.planner")),1),e("div",{class:"build-section-wrapper",ref_key:"buildDropdownRef",ref:z},[L.value?(t(),l("div",Oa,[oe(e("input",{type:"text","onUpdate:modelValue":R[0]||(R[0]=g=>I.value=g),placeholder:s(h)("planner.builds.namePlaceholder"),class:"build-input",onKeyup:ze(N,["enter"])},null,40,Va),[[he,I.value]]),e("div",Fa,[e("button",{class:"icon-btn success-btn",onClick:N},[p(s(Ve),{size:16})]),e("button",{class:"icon-btn",onClick:P},[p(s(ce),{size:16})])])])):(t(),l(O,{key:1},[e("div",{class:V(["build-selector-box",{"is-open":T.value,"is-selected":!!s(a).currentBuildId}]),onClick:U},[e("span",{class:V(["build-value",{placeholder:!s(a).currentBuildId}])},n($.value),3),p(s(fe),{size:16,class:V(["chevron-icon",{rotate:T.value}])},null,8,["class"])],2),p(ae,{name:"dropdown"},{default:K(()=>[T.value?(t(),l("div",Aa,[s(a).savedBuilds.length===0?(t(),l("button",Ua,n(s(h)("planner.builds.none")),1)):x("",!0),(t(!0),l(O,null,A(s(a).savedBuilds,g=>(t(),l("button",{key:g.id,class:V(["dropdown-item",{"is-active":s(a).currentBuildId===g.id}]),onClick:se(H=>r(g.id),["stop"])},[le(n(g.name)+" ",1),g.charClass?(t(),l("span",Ga,"("+n(s(h)("planner.class.names."+(B.value[g.charClass]||g.charClass)))+")",1)):x("",!0)],10,Ha))),128))])):x("",!0)]),_:1}),e("div",Ka,[e("button",{class:"icon-btn",title:s(h)("planner.builds.create"),onClick:i},[p(s(we),{size:16})],8,ja),s(a).currentBuildId?(t(),l("button",{key:0,class:"icon-btn delete-btn",title:s(h)("common.delete"),onClick:C},[p(s(He),{size:16})],8,Xa)):x("",!0)])],64))],512)]),e("div",Ya,[p($l),p(ge,{variant:"secondary",onClick:u,title:s(h)("planner.stats.clear")},{icon:K(()=>[p(s(Ae),{size:16})]),default:K(()=>[le(" "+n(s(h)("planner.stats.clear")),1)]),_:1},8,["title"])])]),d.value?(t(),l("div",Qa,n(d.value),1)):x("",!0),s(a).isLoaded?(t(),l("div",Wa,[e("div",Ja,[e("div",Za,[R[5]||(R[5]=e("div",{class:"gear-ring__bg-line"},null,-1)),R[6]||(R[6]=e("img",{src:Te,class:"gear-ring__watermark",alt:"Quinfall"},null,-1)),(t(!0),l(O,null,A(s(a).plannerData?.equipmentSlots,g=>(t(),l(O,{key:g.id},[!g.allowedClasses||g.allowedClasses.includes(s(a).selectedClass)?(t(),l("div",{key:0,class:V(["gear-ring__slot",g.positionClass])},[p(ls,{id:g.id,item:s(a).equipment[g.id],onClick:M,onEdit:m},{icon:K(()=>[e("img",{src:F(g.iconFallback),class:"planner-slot__fallback-img",alt:""},null,8,en)]),_:2},1032,["id","item"])],2)):x("",!0)],64))),128))]),e("div",sn,[R[7]||(R[7]=e("div",{class:"gearscore-label"},"GEARSCORE",-1)),e("div",tn,n(G.value),1)])]),e("div",ln,[e("div",an,[e("button",{class:V(["planner-tab",{"is-active":v.value==="attributes"}]),onClick:R[1]||(R[1]=g=>v.value="attributes")},n(s(h)("planner.tabs.attributes")),3),e("button",{class:V(["planner-tab",{"is-active":v.value==="skills"}]),onClick:R[2]||(R[2]=g=>v.value="skills")},n(s(h)("planner.tabs.skills")),3)]),oe(e("div",nn,[e("div",on,[e("h3",null,n(s(h)("planner.attributes.title")),1),e("span",cn,n(s(h)("planner.attributes.counter",{current:s(a).totalAttributePoints,max:s(a).maxAttributePoints})),1)]),e("div",rn,[(t(!0),l(O,null,A(s(a).plannerData?.attributes,g=>(t(),j(ks,{key:g.id,id:g.id,title:s(h)("planner.attributes."+g.id),shortName:s(h)("planner.attributes."+g.id+"Short"),value:s(a).attributes[g.id],"onUpdate:value":H=>s(a).attributes[g.id]=H,max:g.max,bonusText:_e(g.id)},null,8,["id","title","shortName","value","onUpdate:value","max","bonusText"]))),128))])],512),[[Ie,v.value==="attributes"]]),v.value==="skills"?(t(),l("div",dn,[s(a).selectedClass?(t(),l("div",un,[e("div",vn,[e("label",_n,n(s(h)("planner.skills.selectSubclass")),1),p(Ml)]),e("div",mn,[p(Pa)])])):(t(),l("div",pn,n(s(h)("planner.skills.selectWeaponPrompt")),1))])):x("",!0)]),e("div",hn,[e("div",kn,[e("div",bn,[p(s(Ne),{size:18}),e("h3",null,n(s(h)("planner.stats.title")),1)]),e("div",yn,[(t(!0),l(O,null,A(s(a).stats,(g,H)=>(t(),l("div",{class:"planner-stat-row",key:H},[e("span",fn,n(s(h)("stats."+H.toLowerCase().replace(/ /g,"_"))),1),e("span",Sn,n(g),1)]))),128)),Object.keys(s(a).stats).length===0?(t(),l("div",$n,n(s(h)("planner.stats.empty")),1)):x("",!0)]),s(a).activeSetBonuses.length>0?(t(),l("div",gn,[e("div",Cn,[e("h4",null,n(s(h)("planner.sockets.setBonus")),1)]),(t(!0),l(O,null,A(s(a).activeSetBonuses,g=>(t(),l("div",{key:g.setName,class:"set-bonus-entry"},[e("div",wn,[e("span",In,n(g.setName),1),e("span",xn,n(g.count)+"/4",1)]),(t(!0),l(O,null,A(g.thresholds,H=>(t(),l("div",{key:H.required,class:V(["set-bonus-tier",{"is-active":H.active}])},[e("span",En,n(H.required)+"pc",1),e("span",Ln,[(t(!0),l(O,null,A(H.bonuses,(W,me)=>(t(),l("span",{key:me,class:"set-bonus-tier__stat"},[le(n(s(h)("stats."+me))+": ",1),e("span",Bn,"+"+n(W),1)]))),128))])],2))),128))]))),128))])):x("",!0)])])])):x("",!0)]),p(Is,{visible:S.value,slotId:b.value,onClose:R[3]||(R[3]=g=>S.value=!1),onSelect:_},null,8,["visible","slotId"]),p(De,{visible:y.value,slotId:c.value,item:k.value,onClose:R[4]||(R[4]=g=>{y.value=!1,c.value=null,k.value=null})},null,8,["visible","slotId","item"])]))}}),On=Q(Dn,[["__scopeId","data-v-d4a346c6"]]);export{On as default};
